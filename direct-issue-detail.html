<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DoÄŸrudan Ã‡Ä±kÄ±ÅŸ Detay - IMMA</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<!--
================================================================================
IMMA DEVELOPER DOCUMENTATION
================================================================================

SCREEN: 20 DGI - Direct Goods Issue (Detail)
FILE: direct-issue-detail.html
LAST UPDATED: 2025-12-18

--------------------------------------------------------------------------------
RELATED DATABASE TABLES
--------------------------------------------------------------------------------

TABLE: Direct Goods Issue Header
| Field Name                 | Type     | Length | Description                  |
|----------------------------|----------|--------|------------------------------|
| Material Movement Header Id| int      | 8      | Primary key                  |
| Selected week number       | int      | 2      | SeÃ§ilen hafta numarasÄ±       |
| Selected weeks first day   | date     | -      | HaftanÄ±n ilk gÃ¼nÃ¼            |
| Description for the request| text     | 128    | Ä°stek aÃ§Ä±klamasÄ±             |
| Requesting department      | text     | 8      | Talep eden departman         |
| Requesting user info       | int      | 8      | Talep eden kullanÄ±cÄ±         |
| Priority                   | bool     | -      | Ã–ncelikli mi                 |

TABLE: Material Movement (for tracking)
| Field Name                 | Type     | Length | Description                  |
|----------------------------|----------|--------|------------------------------|
| Material Movement id       | int      | 12     | Hareket ID                   |
| Material number            | text     | 13     | Malzeme numarasÄ±             |
| Movement type              | int      | 2      | Hareket tipi (6=Goods issue) |
| Movement quantity          | float    | 15     | Hareket miktarÄ±              |
| Stock record Id            | int      | 8      | Stok kaydÄ± referansÄ±         |
| Created datetime           | datetime | -      | OluÅŸturma tarihi             |
| Created by user info       | int      | 8      | OluÅŸturan kullanÄ±cÄ±          |

--------------------------------------------------------------------------------
MOVEMENT TYPE FOR DIRECT ISSUE
--------------------------------------------------------------------------------

| Code | Type               | Description                    |
|------|--------------------|--------------------------------|
| 6    | Goods issue        | DoÄŸrudan Ã§Ä±kÄ±ÅŸ                 |
| 7    | Goods issue rollback| Ã‡Ä±kÄ±ÅŸ iptali                  |

--------------------------------------------------------------------------------
BUSINESS RULES
--------------------------------------------------------------------------------

1. DoÄŸrudan Ã§Ä±kÄ±ÅŸ, depodan masraf merkezi bazlÄ± malzeme Ã§Ä±kÄ±ÅŸÄ±dÄ±r
2. Masraf merkezi (Cost Center) ve kullanÄ±cÄ± seÃ§imi zorunlu
3. FIFO kuralÄ±na gÃ¶re en eski stoktan Ã§Ä±kÄ±ÅŸ yapÄ±lÄ±r
4. Ã‡Ä±kÄ±ÅŸ miktarÄ± mevcut stoktan fazla olamaz
5. Priority iÅŸaretlenirse Ã¶ncelikli olarak iÅŸlenir
6. 3 seviyeli onay eklenebilir (opsiyonel)

--------------------------------------------------------------------------------
DISPLAYED INFORMATION
--------------------------------------------------------------------------------

Issue Information:
- Issue ID (Material Movement Header Id)
- Date
- Status
- Performed by (user)

Material Information:
- Material number
- Material title
- Quantity
- Unit of measure

Location Information:
- Source Storage
- Location
- Bin
- Cost Center

--------------------------------------------------------------------------------
INTEGRATION NOTES
--------------------------------------------------------------------------------

- Material Stock tablosundan stok dÃ¼ÅŸÃ¼mÃ¼ yapÄ±lÄ±r
- Cost tablosunda Consumed Quantity gÃ¼ncellenir (FIFO)
- Material Movement tablosuna kayÄ±t eklenir (type=6)
- Budget'tan dÃ¼ÅŸÃ¼m yapÄ±lÄ±r (Euro deÄŸer bazÄ±nda)

================================================================================
-->
<body>
    <nav class="modern-navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">
                <div class="navbar-logo">M</div>
                <div class="brand-text">
                    <span class="brand-name">IMMA</span>
                    <span class="brand-subtitle">Endirek Malzeme YÃ¶netimi</span>
                </div>
            </a>
            <ul class="navbar-menu">
                <li class="nav-item"><a href="index.html" class="nav-link"><span class="nav-icon">ğŸ“Š</span>Dashboard</a></li>
                <li class="nav-item"><a href="material-list.html" class="nav-link"><span class="nav-icon">ğŸ“¦</span>Ana Veriler</a></li>
                <li class="nav-item"><a href="mrp.html" class="nav-link"><span class="nav-icon">ğŸ“ˆ</span>MRP</a></li>
                <li class="nav-item"><a href="srm-list.html" class="nav-link"><span class="nav-icon">ğŸ›’</span>SatÄ±nalma</a></li>
                <li class="nav-item"><a href="budget-management.html" class="nav-link"><span class="nav-icon">ğŸ’°</span>Budget</a></li>
                <li class="nav-item"><a href="material-request-list.html" class="nav-link"><span class="nav-icon">ğŸ“‹</span>Talepler</a></li>
                <li class="nav-item">
                    <a href="transfer-list.html" class="nav-link active"><span class="nav-icon">ğŸ­</span>Stock</a>
                    <div class="dropdown-menu">
                        <a href="direct-issue.html" class="dropdown-item active">DoÄŸrudan Ã‡Ä±kÄ±ÅŸ</a>
                        <a href="warehouse-transfer.html" class="dropdown-item">Depo Transferi</a>
                        <a href="transfer-list.html" class="dropdown-item">Transfer Listesi</a>
                        <a href="inventory-counting.html" class="dropdown-item">SayÄ±m Ä°ÅŸlemleri</a>
                        <a href="single-material-counting.html" class="dropdown-item">Tekli Malzeme SayÄ±mÄ±</a>
                        <a href="scrapping.html" class="dropdown-item">Hurda Ä°ÅŸlemleri</a>
                    </div>
                </li>
            </ul>
            <div class="navbar-user">
                <span class="user-name">Ahmet YÄ±lmaz</span>
                <div class="user-avatar">AY</div>
            </div>
        </div>
    </nav>

    <main class="modern-container">
        <div class="page-header">
            <div>
                <h1 class="page-title">DoÄŸrudan Ã‡Ä±kÄ±ÅŸ DetayÄ±</h1>
                <p class="page-subtitle">Stock > DoÄŸrudan Ã‡Ä±kÄ±ÅŸ > <span id="issueId">-</span></p>
            </div>
            <div class="page-actions">
                <a href="direct-issue.html" class="btn btn-outline">â† Geri DÃ¶n</a>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3>Issue Information</h3>
            </div>
            <div class="card-body">
                <div class="info-grid">
                    <div class="info-item">
                        <label>Issue ID:</label>
                        <span id="displayIssueId">-</span>
                    </div>
                    <div class="info-item">
                        <label>Date:</label>
                        <span id="displayDate">-</span>
                    </div>
                    <div class="info-item">
                        <label>Status:</label>
                        <span id="displayStatus">-</span>
                    </div>
                    <div class="info-item">
                        <label>Performed by:</label>
                        <span id="displayUser">-</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3>Material Information</h3>
            </div>
            <div class="card-body">
                <div class="info-grid">
                    <div class="info-item">
                        <label>Material number:</label>
                        <span id="displayMaterialNo">-</span>
                    </div>
                    <div class="info-item">
                        <label>Material title:</label>
                        <span id="displayMaterialName">-</span>
                    </div>
                    <div class="info-item">
                        <label>Quantity:</label>
                        <span id="displayQuantity">-</span>
                    </div>
                    <div class="info-item">
                        <label>Unit of measure:</label>
                        <span id="displayUnit">-</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3>Location Information</h3>
            </div>
            <div class="card-body">
                <div class="info-grid">
                    <div class="info-item">
                        <label>Source Storage:</label>
                        <span id="displayWarehouse">-</span>
                    </div>
                    <div class="info-item">
                        <label>Location:</label>
                        <span id="displayLocation">-</span>
                    </div>
                    <div class="info-item">
                        <label>Bin:</label>
                        <span id="displayBin">-</span>
                    </div>
                    <div class="info-item">
                        <label>Cost Center:</label>
                        <span id="displayCostCenter">-</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <style>
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        .info-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .info-item label {
            font-size: 12px;
            color: #666;
            font-weight: 600;
        }
        .info-item span {
            font-size: 14px;
            color: #333;
        }
    </style>

    <script>
        const issues = {
            'DGI-2025-000789': {
                id: 'DGI-2025-000789',
                date: '2025-12-14',
                status: 'TamamlandÄ±',
                user: 'Ahmet YÄ±lmaz',
                materialNo: '01.00002-0001',
                materialName: 'Rulman 6205-2RS',
                quantity: 5,
                unit: 'AD',
                warehouse: 'Merkez Storage',
                location: 'A-01-03',
                bin: 'SHELF-A-003',
                costCenter: 'BAKIM-001'
            },
            'DGI-2025-000788': {
                id: 'DGI-2025-000788',
                date: '2025-12-13',
                status: 'TamamlandÄ±',
                user: 'Mehmet Demir',
                materialNo: '02.00004-0001',
                materialName: 'SensÃ¶r EndÃ¼ktif M12',
                quantity: 2,
                unit: 'AD',
                warehouse: 'Merkez Storage',
                location: 'B-02-01',
                bin: 'SHELF-B-010',
                costCenter: 'URETIM-001'
            },
            'DGI-2025-000787': {
                id: 'DGI-2025-000787',
                date: '2025-12-12',
                status: 'TamamlandÄ±',
                user: 'Ali Kaya',
                materialNo: '03.00001-0001',
                materialName: 'Elektrik Kablosu 3x1.5',
                quantity: 50,
                unit: 'M',
                warehouse: 'Merkez Storage',
                location: 'C-03-01',
                bin: 'ROLL-C-001',
                costCenter: 'ELEKTRIK-001'
            },
            'DGI-2025-000786': {
                id: 'DGI-2025-000786',
                date: '2025-12-11',
                status: 'TamamlandÄ±',
                user: 'Fatma Ã–z',
                materialNo: '01.00005-0001',
                materialName: 'GÃ¼venlik Eldiveni',
                quantity: 10,
                unit: 'AD',
                warehouse: 'Merkez Storage',
                location: 'D-01-01',
                bin: 'BIN-D-100',
                costCenter: 'ISG-001'
            }
        };

        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return { id: params.get('id') || null };
        }

        function initializePage() {
            const { id } = getUrlParams();
            if (id && issues[id]) {
                loadIssueData(issues[id]);
            } else {
                alert('Ã‡Ä±kÄ±ÅŸ kaydÄ± bulunamadÄ±!');
                window.location.href = 'direct-issue.html';
            }
        }

        function loadIssueData(issue) {
            document.getElementById('issueId').textContent = issue.id;
            document.getElementById('displayIssueId').textContent = issue.id;
            document.getElementById('displayDate').textContent = issue.date;
            document.getElementById('displayStatus').innerHTML = `<span class="status-badge status-active">${issue.status}</span>`;
            document.getElementById('displayUser').textContent = issue.user;
            document.getElementById('displayMaterialNo').textContent = issue.materialNo;
            document.getElementById('displayMaterialName').textContent = issue.materialName;
            document.getElementById('displayQuantity').textContent = issue.quantity;
            document.getElementById('displayUnit').textContent = issue.unit;
            document.getElementById('displayWarehouse').textContent = issue.warehouse;
            document.getElementById('displayLocation').textContent = issue.location;
            document.getElementById('displayBin').textContent = issue.bin;
            document.getElementById('displayCostCenter').textContent = issue.costCenter;
        }

        document.addEventListener('DOMContentLoaded', initializePage);
    </script>

    <!-- DEVELOPER DOCUMENTATION PANEL -->
    <div id="devDocsPanel" class="dev-docs-panel">
        <button class="dev-docs-toggle" onclick="toggleDevDocs()">ğŸ“‹ GeliÅŸtirici DokÃ¼mantasyonu</button>
        <div class="dev-docs-content" id="devDocsContent">
            <div class="dev-docs-header">
                <h2>ğŸ“‹ 20 DGI - Direct Goods Issue (Detail)</h2>
                <button class="dev-docs-close" onclick="toggleDevDocs()">âœ•</button>
            </div>
            <div class="dev-docs-body">
                <div class="dev-docs-tabs">
                    <button class="dev-tab active" onclick="showDevTab('dataStructure')">Veri YapÄ±larÄ±</button>
                    <button class="dev-tab" onclick="showDevTab('businessRules')">Ä°ÅŸ KurallarÄ±</button>
                    <button class="dev-tab" onclick="showDevTab('movementTypes')">Hareket Tipleri</button>
                </div>
                <div id="dataStructure" class="dev-tab-content active">
                    <h3>Direct Goods Issue Header Tablosu</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>Uzunluk</th><th>AÃ§Ä±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Material Movement Header Id</td><td>int</td><td>8</td><td>Primary key</td></tr>
                            <tr><td>Selected week number</td><td>int</td><td>2</td><td>SeÃ§ilen hafta numarasÄ±</td></tr>
                            <tr><td>Selected weeks first day</td><td>date</td><td>-</td><td>HaftanÄ±n ilk gÃ¼nÃ¼</td></tr>
                            <tr><td>Description for the request</td><td>text</td><td>128</td><td>Talep aÃ§Ä±klamasÄ±</td></tr>
                            <tr><td>Requesting department</td><td>text</td><td>8</td><td>Talep eden departman</td></tr>
                            <tr><td>Requesting user info</td><td>int</td><td>8</td><td>Talep eden kullanÄ±cÄ±</td></tr>
                            <tr><td>Priority</td><td>bool</td><td>-</td><td>Ã–ncelikli mi</td></tr>
                        </tbody>
                    </table>
                    <h3>Material Movement AlanlarÄ±</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>AÃ§Ä±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Storage/Location/Bin</td><td>Ã‡Ä±kÄ±ÅŸ yapÄ±lan depo bilgileri</td></tr>
                            <tr><td>Cost Center Code</td><td>Masraf merkezi (maxlength=10)</td></tr>
                            <tr><td>Movement Type</td><td>6: Goods issue</td></tr>
                        </tbody>
                    </table>
                </div>
                <div id="businessRules" class="dev-tab-content">
                    <div class="rules-section">
                        <h4>DoÄŸrudan Ã‡Ä±kÄ±ÅŸ KurallarÄ±</h4>
                        <ul>
                            <li>Masraf merkezi seÃ§imi zorunlu</li>
                            <li>Talep eden kiÅŸi/departman seÃ§imi zorunlu</li>
                            <li>FIFO kuralÄ±na gÃ¶re stok seÃ§ilir (en eski Cost ID Ã¶nce)</li>
                            <li>3 seviyeli onay eklenebilir (isteÄŸe baÄŸlÄ±)</li>
                            <li>Hafta numarasÄ± bÃ¼tÃ§e kontrolÃ¼ iÃ§in kullanÄ±lÄ±r</li>
                        </ul>
                    </div>
                    <div class="rules-section">
                        <h4>Stok KontrolÃ¼</h4>
                        <ul>
                            <li>Stoktan fazla Ã§Ä±kÄ±ÅŸ yapÄ±lamaz</li>
                            <li>Bloklu stoktan Ã§Ä±kÄ±ÅŸ yapÄ±lamaz (Block for issue check)</li>
                            <li>Ä°naktif depodan Ã§Ä±kÄ±ÅŸ yapÄ±labilir</li>
                        </ul>
                    </div>
                </div>
                <div id="movementTypes" class="dev-tab-content">
                    <div class="rules-section">
                        <h4>Ä°lgili Hareket Tipleri</h4>
                        <table class="dev-table">
                            <thead><tr><th>Kod</th><th>Tip</th><th>AÃ§Ä±klama</th></tr></thead>
                            <tbody>
                                <tr><td>6</td><td>Goods issue</td><td>Malzeme Ã§Ä±kÄ±ÅŸÄ±</td></tr>
                                <tr><td>7</td><td>Goods issue rollback</td><td>Ã‡Ä±kÄ±ÅŸ iptali</td></tr>
                                <tr><td>14</td><td>Other material issue</td><td>DiÄŸer malzeme Ã§Ä±kÄ±ÅŸÄ±</td></tr>
                                <tr><td>15</td><td>Other material issue rollback</td><td>DiÄŸer Ã§Ä±kÄ±ÅŸ iptali</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>.dev-docs-panel{position:fixed;bottom:0;left:0;right:0;z-index:9999;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.dev-docs-toggle{width:100%;padding:12px 20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;cursor:pointer;font-size:14px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:8px}.dev-docs-toggle:hover{background:linear-gradient(135deg,#5a6fd6 0%,#6a4190 100%)}.dev-docs-content{display:none;background:#1a1a2e;color:#eee;max-height:70vh;overflow-y:auto}.dev-docs-content.active{display:block}.dev-docs-header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:#16213e;border-bottom:2px solid #667eea}.dev-docs-header h2{margin:0;font-size:16px;color:#fff}.dev-docs-close{background:#e74c3c;color:#fff;border:none;width:30px;height:30px;border-radius:50%;cursor:pointer;font-size:16px}.dev-docs-body{padding:20px}.dev-docs-tabs{display:flex;gap:10px;margin-bottom:20px;border-bottom:2px solid #333;padding-bottom:10px}.dev-tab{padding:8px 16px;background:#2d2d44;color:#aaa;border:none;border-radius:6px 6px 0 0;cursor:pointer;font-size:13px}.dev-tab.active,.dev-tab:hover{background:#667eea;color:#fff}.dev-tab-content{display:none}.dev-tab-content.active{display:block}.dev-table{width:100%;border-collapse:collapse;margin:15px 0;font-size:13px}.dev-table th,.dev-table td{padding:10px;text-align:left;border:1px solid #333}.dev-table th{background:#2d2d44;color:#667eea;font-weight:600}.dev-table tr:nth-child(even){background:#1f1f35}.rules-section{margin-bottom:20px}.rules-section h4{color:#667eea;margin-bottom:10px;font-size:14px}.rules-section ul{margin:0;padding-left:20px}.rules-section li{margin-bottom:6px;line-height:1.5;font-size:13px}</style>
    <script>function toggleDevDocs(){document.getElementById('devDocsContent').classList.toggle('active')}function showDevTab(tabId){document.querySelectorAll('.dev-tab-content').forEach(c=>c.classList.remove('active'));document.querySelectorAll('.dev-tab').forEach(t=>t.classList.remove('active'));document.getElementById(tabId).classList.add('active');event.target.classList.add('active')}</script>
</body>
</html>
