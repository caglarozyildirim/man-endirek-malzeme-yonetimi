<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMMA - Endirek Malzeme YÃ¶netimi</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- ============================================
         NAVBAR - Top Navigation (Maximo Style)
         ============================================ -->
    <nav class="modern-navbar">
        <div class="navbar-container">
            <!-- Brand -->
            <a href="index.html" class="navbar-brand">
                <div class="navbar-logo">M</div>
                <div class="brand-text">
                    <span class="brand-name">IMMA</span>
                    <span class="brand-subtitle">Endirek Malzeme YÃ¶netimi</span>
                </div>
            </a>

            <!-- Navigation Menu -->
                        <ul class="navbar-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link active">
                        <span class="nav-icon">ğŸ“Š</span>
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="material-list.html" class="nav-link">
                        <span class="nav-icon">ğŸ“¦</span>
                        Ana Veriler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-list.html" class="dropdown-item">Malzeme Listesi</a>
                        <a href="supplier-list.html" class="dropdown-item">TedarikÃ§i Listesi</a>
                        <a href="storage-type-list.html" class="dropdown-item">Depo Tipi Listesi</a>
                        <a href="number-series.html" class="dropdown-item">Numara Serileri</a>
                        <a href="material-group.html" class="dropdown-item">Malzeme GruplarÄ±</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="mrp.html" class="nav-link">
                        <span class="nav-icon">ğŸ“ˆ</span>
                        MRP
                    </a>
                </li>
                <li class="nav-item">
                    <a href="srm-list.html" class="nav-link">
                        <span class="nav-icon">ğŸ›’</span>
                        SatÄ±nalma
                    </a>
                    <div class="dropdown-menu">
                        <a href="srm-list.html" class="dropdown-item">Talep Listesi</a>
                        <a href="goods-receipt.html" class="dropdown-item">Mal Kabul</a>
                        <a href="po-list.html" class="dropdown-item">SatÄ±nalma SipariÅŸleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="budget-management.html" class="nav-link">
                        <span class="nav-icon">ğŸ’°</span>
                        BÃ¼tÃ§e
                    </a>
                    <div class="dropdown-menu">
                        <a href="budget-management.html" class="dropdown-item">BÃ¼tÃ§e YÃ¶netimi</a>
                        <a href="budget-preference.html" class="dropdown-item">BÃ¼tÃ§e Tercihleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="material-request-list.html" class="nav-link">
                        <span class="nav-icon">ğŸ“‹</span>
                        Talepler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-request-list.html" class="dropdown-item">Talep Listesi</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="transfer-list.html" class="nav-link">
                        <span class="nav-icon">ğŸ­</span>
                        Stok
                    </a>
                    <div class="dropdown-menu">
                        <a href="direct-issue.html" class="dropdown-item">DoÄŸrudan Ã‡Ä±kÄ±ÅŸ</a>
                        <a href="warehouse-transfer.html" class="dropdown-item">Depo Transferi</a>
                        <a href="transfer-list.html" class="dropdown-item">Transfer Listesi</a>
                        <a href="inventory-counting.html" class="dropdown-item">SayÄ±m Ä°ÅŸlemleri</a>
                        <a href="single-material-counting.html" class="dropdown-item">Tekli Malzeme SayÄ±mÄ±</a>
                        <a href="scrapping.html" class="dropdown-item">Hurda Ä°ÅŸlemleri</a>
                    </div>
                </li>
            </ul>

            <!-- User Menu -->
            <div class="navbar-user">
                <span class="user-name">Ahmet YÄ±lmaz</span>
                <div class="user-avatar">AY</div>
            </div>
        </div>
    </nav>

    <!-- ============================================
         MAIN CONTENT
         ============================================ -->
    <main class="modern-container">
        <!-- Page Header -->
        <div class="page-header">
            <div>
                <h1 class="page-title">Dashboard</h1>
                <p class="page-subtitle">Endirek Malzeme YÃ¶netimi - Genel BakÄ±ÅŸ</p>
            </div>
            <div class="page-actions">
                <button class="btn btn-secondary">ğŸ“¥ Rapor Ä°ndir</button>
            </div>
        </div>

        <!-- HÄ±zlÄ± Ä°ÅŸlemler - Quick Actions Bar -->
        <div class="quick-actions-bar" style="display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 1.5rem; padding: 16px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 8px; border: 1px solid #dee2e6;">
            <a href="material-request.html" class="btn btn-primary" style="display: inline-flex; align-items: center; gap: 8px;">
                ğŸ“‹ Yeni Talep
            </a>
            <a href="material-data.html" class="btn btn-secondary" style="display: inline-flex; align-items: center; gap: 8px;">
                ğŸ“¦ Yeni Malzeme
            </a>
            <a href="srm-request.html" class="btn btn-secondary" style="display: inline-flex; align-items: center; gap: 8px;">
                ğŸ›’ SRM Talebi
            </a>
            <a href="goods-receipt.html" class="btn btn-secondary" style="display: inline-flex; align-items: center; gap: 8px;">
                ğŸ“¥ Mal Kabul
            </a>
            <a href="direct-issue.html" class="btn btn-secondary" style="display: inline-flex; align-items: center; gap: 8px;">
                ğŸ“¤ DoÄŸrudan Ã‡Ä±kÄ±ÅŸ
            </a>
            <a href="warehouse-transfer.html" class="btn btn-secondary" style="display: inline-flex; align-items: center; gap: 8px;">
                ğŸ”„ Depo Transferi
            </a>
        </div>

        <!-- Developer Notes -->
        <div class="dev-note info">
            <h4>ğŸ“‹ Proje Bilgisi: IMMA (Indirect Material Management Application)</h4>
            <p><strong>AmaÃ§:</strong> MAN TÃ¼rkiye A.Å. iÃ§in Maximo sistemini deÄŸiÅŸtirmek Ã¼zere geliÅŸtirilen endirek malzeme yÃ¶netim uygulamasÄ±.</p>
            <p><strong>ModÃ¼ller:</strong> Ana Veri, MRP, SRM Talepleri, Mal Kabul, BÃ¼tÃ§e YÃ¶netimi, Malzeme Talepleri, Stok Ä°ÅŸlemleri, SayÄ±m, Hurda</p>
            <p><strong>Entegrasyonlar:</strong> SAP (KullanÄ±cÄ±, Kur, SÃ¶zleÅŸme, SipariÅŸ), IAM (Kimlik DoÄŸrulama)</p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ“¦</div>
                <div class="stat-content">
                    <div class="stat-label">Toplam Malzeme</div>
                    <div class="stat-value">1,247</div>
                </div>
            </div>
            <div class="stat-card warning">
                <div class="stat-icon">âš ï¸</div>
                <div class="stat-content">
                    <div class="stat-label">DÃ¼ÅŸÃ¼k Stok UyarÄ±sÄ±</div>
                    <div class="stat-value">23</div>
                </div>
            </div>
            <div class="stat-card info">
                <div class="stat-icon">ğŸ“‹</div>
                <div class="stat-content">
                    <div class="stat-label">Bekleyen Talepler</div>
                    <div class="stat-value">18</div>
                </div>
            </div>
            <div class="stat-card success">
                <div class="stat-icon">âœ…</div>
                <div class="stat-content">
                    <div class="stat-label">BugÃ¼n Mal Kabul</div>
                    <div class="stat-value">7</div>
                </div>
            </div>
        </div>

        <!-- Developer Note for Stats -->
        <div class="dev-note">
            <h4>ğŸ”§ Dashboard Ä°statistikleri API</h4>
            <ul>
                <li><strong>Toplam Malzeme:</strong> SELECT COUNT(*) FROM MDM_Material WHERE StatusID = 1</li>
                <li><strong>DÃ¼ÅŸÃ¼k Stok:</strong> SELECT COUNT(*) FROM INV_Stock s JOIN MDM_Material m ON s.MaterialID = m.ID WHERE s.Quantity < m.MinStock</li>
                <li><strong>Bekleyen Talepler:</strong> SELECT COUNT(*) FROM MR_Request WHERE StatusID IN (1,2)</li>
                <li><strong>BugÃ¼n Mal Kabul:</strong> SELECT COUNT(*) FROM GR_GoodsReceipt WHERE CAST(CreatedDate AS DATE) = CAST(GETDATE() AS DATE)</li>
            </ul>
        </div>

        <!-- Recent Transactions -->
        <div class="card">
            <div class="card-header">
                <h3>Son Ä°ÅŸlemler</h3>
                <a href="material-request-list.html" class="btn btn-sm btn-outline">TÃ¼mÃ¼nÃ¼ GÃ¶r</a>
            </div>
            <div class="card-body" style="padding: 0;">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Ä°ÅŸlem No</th>
                            <th>Tip</th>
                            <th>AÃ§Ä±klama</th>
                            <th>KullanÄ±cÄ±</th>
                            <th>Tarih</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>MR-2025-001234</strong></td>
                            <td>Malzeme Talebi</td>
                            <td>BakÄ±m malzemeleri</td>
                            <td>Ali YÄ±ldÄ±z</td>
                            <td>11.12.2025 14:30</td>
                            <td><span class="status-badge status-pending">Onay Bekliyor</span></td>
                        </tr>
                        <tr>
                            <td><strong>GR-2025-000567</strong></td>
                            <td>Mal Kabul</td>
                            <td>PO-4500012345</td>
                            <td>Hasan Kara</td>
                            <td>11.12.2025 11:15</td>
                            <td><span class="status-badge status-active">TamamlandÄ±</span></td>
                        </tr>
                        <tr>
                            <td><strong>SRM-2025-000456</strong></td>
                            <td>SRM Talebi</td>
                            <td>Elektrik malzemeleri</td>
                            <td>Mehmet Demir</td>
                            <td>11.12.2025 09:45</td>
                            <td><span class="status-badge status-preparing">SL OnayÄ±nda</span></td>
                        </tr>
                        <tr>
                            <td><strong>DI-2025-000789</strong></td>
                            <td>DoÄŸrudan Ã‡Ä±kÄ±ÅŸ</td>
                            <td>Acil arÄ±za</td>
                            <td>Fatma Åahin</td>
                            <td>10.12.2025 16:20</td>
                            <td><span class="status-badge status-active">TamamlandÄ±</span></td>
                        </tr>
                        <tr>
                            <td><strong>WT-2025-000456</strong></td>
                            <td>Depo Transferi</td>
                            <td>Merkez â†’ Hat 1</td>
                            <td>AyÅŸe YÄ±lmaz</td>
                            <td>10.12.2025 14:00</td>
                            <td><span class="status-badge status-active">TamamlandÄ±</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Alerts Section -->
        <div class="card" style="margin-top: 1.5rem;">
            <div class="card-header">
                <h3>âš ï¸ Dikkat Gerektiren Durumlar</h3>
            </div>
            <div class="card-body">
                <div class="alert alert-danger">
                    <strong>Kritik Stok UyarÄ±sÄ±:</strong> 3 malzeme stok tÃ¼kenme noktasÄ±nda!
                    <a href="material-list.html?filter=critical" style="color: inherit; text-decoration: underline;">GÃ¶rÃ¼ntÃ¼le</a>
                </div>
                <div class="alert alert-warning">
                    <strong>BÃ¼tÃ§e UyarÄ±sÄ±:</strong> CC002 (BakÄ±m) bÃ¼tÃ§esi %98 kullanÄ±ldÄ±.
                    <a href="budget-management.html" style="color: inherit; text-decoration: underline;">Detaylar</a>
                </div>
                <div class="alert alert-info">
                    <strong>MRP Ã–nerisi:</strong> 34 yeni satÄ±nalma Ã¶nerisi oluÅŸturuldu.
                    <a href="mrp.html" style="color: inherit; text-decoration: underline;">Ä°ncele</a>
                </div>
            </div>
        </div>

        <!-- Developer Notes - System Info -->
        <div class="dev-note success" style="margin-top: 1.5rem;">
            <h4>âœ… Sistem Bilgileri</h4>
            <ul>
                <li><strong>Son SAP Senkronizasyonu:</strong> 11.12.2025 06:00 (BaÅŸarÄ±lÄ±)</li>
                <li><strong>Son MRP Ã‡alÄ±ÅŸmasÄ±:</strong> 11.12.2025 02:00 (34 Ã¶neri)</li>
                <li><strong>Aktif KullanÄ±cÄ± SayÄ±sÄ±:</strong> 127</li>
                <li><strong>VeritabanÄ± Durumu:</strong> Normal</li>
            </ul>
        </div>

        <div class="dev-note">
            <h4>ğŸ“Š VeritabanÄ± TablolarÄ± (37 Tablo)</h4>
            <p>Ana tablolar:</p>
            <ul>
                <li><strong>MDM_*:</strong> Master Data Management (Material, Supplier, Unit, Status, StorageType, CostCenter)</li>
                <li><strong>INV_*:</strong> Inventory (Stock, StockTransaction, StockReservation, DirectIssue, WarehouseTransfer)</li>
                <li><strong>SRM_*:</strong> Supplier Relationship (Request, RequestItem, RequestApproval)</li>
                <li><strong>MR_*:</strong> Material Request (Request, RequestItem, RequestApproval)</li>
                <li><strong>GR_*:</strong> Goods Receipt (GoodsReceipt, GoodsReceiptItem, Document)</li>
                <li><strong>PO_*:</strong> Purchase Order (PurchaseOrder, PurchaseOrderItem) - SAP'den</li>
                <li><strong>BUD_*:</strong> Budget (Budget, BudgetUsage, BudgetReservation, BudgetTransfer)</li>
                <li><strong>MRP_*:</strong> MRP (Run, Suggestion, SuggestionHistory)</li>
                <li><strong>USR_*:</strong> User (User, Role, UserRole, Permission, RolePermission, Session)</li>
                <li><strong>SAP_*:</strong> SAP Integration (User, ExchangeRate, Contract)</li>
                <li><strong>AUD_*:</strong> Audit (AuditLog, UserActivity)</li>
            </ul>
        </div>
    </main>

    <script>
        // Page action buttons
        document.querySelector('.page-actions .btn-secondary').addEventListener('click', function() {
            alert('ğŸ“¥ Rapor Ä°ndirme\n\nDashboard raporu PDF olarak hazÄ±rlanÄ±yor...\n\n(GerÃ§ek uygulamada rapor indirilir)');
        });

        // Make transaction table rows clickable - navigate to detail pages
        document.querySelectorAll('.card-body table tbody tr').forEach(function(row) {
            row.style.cursor = 'pointer';
            row.addEventListener('click', function() {
                const transactionNo = this.cells[0].textContent.trim();

                let targetPage = '';
                if (transactionNo.startsWith('MR-')) {
                    targetPage = 'material-request.html?mode=view&id=' + transactionNo;
                } else if (transactionNo.startsWith('GR-')) {
                    targetPage = 'goods-receipt.html?mode=view&id=' + transactionNo;
                } else if (transactionNo.startsWith('SRM-')) {
                    targetPage = 'srm-request.html?mode=view&id=' + transactionNo;
                } else if (transactionNo.startsWith('DI-')) {
                    targetPage = 'direct-issue-detail.html?mode=view&id=' + transactionNo;
                } else if (transactionNo.startsWith('WT-')) {
                    targetPage = 'transfer-detail.html?mode=view&id=' + transactionNo;
                }

                if (targetPage) {
                    window.location.href = targetPage;
                }
            });
        });

        // Stat cards clickable
        document.querySelectorAll('.stat-card').forEach(function(card, index) {
            card.style.cursor = 'pointer';
            card.addEventListener('click', function() {
                const pages = ['material-list.html', 'material-list.html?filter=low', 'material-request-list.html', 'po-list.html'];
                window.location.href = pages[index];
            });
        });
    </script>
</body>
</html>
