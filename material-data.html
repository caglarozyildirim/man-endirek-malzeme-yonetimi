<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malzeme Veri Bakimi - IMMA</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* Autocomplete wrapper styles */
        .autocomplete-wrapper { position: relative; }
        .autocomplete-wrapper .search-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            opacity: 0.5;
        }
        .autocomplete-wrapper input { padding-right: 35px; }

        .image-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: var(--radius-lg);
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition-fast);
            background: var(--bg-primary);
        }
        .image-upload-area:hover {
            border-color: var(--primary);
            background: rgba(228, 0, 69, 0.02);
        }
        .image-upload-area.has-image {
            padding: 0;
            border-style: solid;
        }
        .image-upload-area img {
            max-width: 100%;
            max-height: 300px;
            border-radius: var(--radius-lg);
        }
        .material-number-preview {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            background: linear-gradient(135deg, var(--man-red-50), var(--man-red-100));
            padding: 16px 24px;
            border-radius: var(--radius-lg);
            text-align: center;
            font-family: monospace;
            letter-spacing: 2px;
        }
        .field-locked {
            position: relative;
        }
        .field-locked::after {
            content: "üîí";
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
        }
        .attachment-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .attachment-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
        }
        .attachment-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--man-red-50);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .attachment-info {
            flex: 1;
        }
        .attachment-name {
            font-weight: 500;
            font-size: 14px;
        }
        .attachment-meta {
            font-size: 12px;
            color: var(--text-light);
        }
        /* Upload Modal Styles */
        .upload-modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .upload-modal-overlay.active {
            display: flex;
        }
        .upload-modal-content {
            background: #fff;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }
        .upload-modal-header {
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .upload-modal-header h3 {
            margin: 0;
            font-size: 18px;
            color: #333;
        }
        .upload-modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        .upload-modal-body {
            padding: 20px;
        }
        .upload-drop-zone {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 15px;
        }
        .upload-drop-zone:hover,
        .upload-drop-zone.dragover {
            border-color: var(--primary, #e40045);
            background: rgba(228, 0, 69, 0.05);
        }
        .upload-drop-zone .upload-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        .upload-drop-zone p {
            margin: 5px 0;
            color: #666;
        }
        .upload-drop-zone .formats {
            font-size: 12px;
            color: #999;
        }
        .upload-file-input {
            display: none;
        }
        .upload-preview {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        .upload-preview.has-file {
            display: block;
        }
        .upload-preview-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .upload-preview-icon {
            font-size: 24px;
        }
        .upload-preview-info {
            flex: 1;
        }
        .upload-preview-name {
            font-weight: 500;
            font-size: 14px;
        }
        .upload-preview-size {
            font-size: 12px;
            color: #666;
        }
        .upload-preview-remove {
            background: none;
            border: none;
            color: #dc3545;
            cursor: pointer;
            font-size: 18px;
        }
        .upload-modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        .upload-modal-footer .btn-cancel {
            padding: 10px 20px;
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
        }
        .upload-modal-footer .btn-upload {
            padding: 10px 20px;
            background: var(--primary, #e40045);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        .upload-modal-footer .btn-upload:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<!--
================================================================================
IMMA DEVELOPER DOCUMENTATION
================================================================================

SCREEN: 1 MDM - Material Data Maintenance
FILE: material-data.html
LAST UPDATED: 2025-12-18

--------------------------------------------------------------------------------
RELATED DATABASE TABLES
--------------------------------------------------------------------------------

TABLE: Material (Data Structure IMMA.xlsx)
| Field Name                              | Type     | Length | Description                          |
|-----------------------------------------|----------|--------|--------------------------------------|
| id                                      | int      | 8      | Primary key                          |
| Material number                         | text     | 13     | Format: ##.#####-#### veya prefix    |
| Old material number                     | text     | 13     | Eski sistem (Maximo) numarasƒ±        |
| Title                                   | text     | 128    | Malzeme ba≈ülƒ±ƒüƒ± (taleplerde g√∂r√ºn√ºr) |
| Description                             | text     | 512    | Detaylƒ± a√ßƒ±klama (sadece key user)   |
| Unit of measure code                    | text     | 4      | √ñl√ß√º birimi kodu (AD, M, KG, LT...)  |
| Material Status code                    | char     | 1      | 1-5 arasƒ± deƒüer (a≈üaƒüƒ±ya bakƒ±nƒ±z)    |
| Blocking Reason                         | text     | 128    | Status=2 i√ßin ZORUNLU                |
| Blocking Reevaluation date              | datetime | -      | Bloklama yeniden deƒü. tarihi         |
| Reordering quantity                     | float    | 15     | Yeniden sipari≈ü miktarƒ±              |
| Safety stock quantity                   | float    | 15     | G√ºvenlik stoƒüu                       |
| Default Storage                         | text     | 8      | Varsayƒ±lan depo kodu                 |
| Default Location                        | text     | 8      | Varsayƒ±lan lokasyon kodu             |
| Default Bin                             | text     | 8      | Varsayƒ±lan bin kodu                  |
| Reordering point quantity               | float    | 15     | MRP tetikleme seviyesi               |
| Notes                                   | text     | 512    | Sadece yetkili kullanƒ±cƒ±lar g√∂r√ºr    |
| Created by user info                    | int      | 8      | Olu≈üturan kullanƒ±cƒ± ID               |
| Accounting Number                       | int      | 8      | SAP muhasebe hesap kodu              |
| Purchased Packing Material              | bool     | -      | ƒ∞ade edilebilir ambalaj mƒ±?          |
| Alternative material 1                  | text     | 13     | Alternatif malzeme 1 numarasƒ±        |
| Alternative material 2                  | text     | 13     | Alternatif malzeme 2 numarasƒ±        |
| Material Group Code                     | text     | 8      | Raporlama i√ßin grup kodu             |
| Order batch quantity                    | float    | 15     | Sipari≈ü parti miktarƒ±                |
| Unit quantity in a package              | float    | 15     | Paket i√ßi birim sayƒ±sƒ±               |
| Document group Id                       | int      | 8      | Dok√ºman grubu referansƒ± (FK)         |
| Accounting actions required             | bool     | -      | Muhasebe onayƒ± gerekli mi?           |
| Maximum stock quantity                  | float    | 15     | MRP maksimum stok seviyesi           |
| Blocked for material request check      | bool     | -      | Talep i√ßin bloklu mu?                |
| Total Stock                             | float    | 15     | Toplam stok (hesaplanan)             |
| Open request quantity                   | float    | 15     | A√ßƒ±k talep miktarƒ± (hesaplanan)      |
| Producer name                           | text     | 32     | √úretici firma adƒ±                    |
| Producer model name                     | text     | 64     | √úretici model/part numarasƒ±          |

NOT: Total Stock ve Open request quantity hesaplanan (aggregated) alanlardƒ±r.

Material Status Codes (Material Status code):
- 1: Active          ‚Üí T√ºm i≈ülemler yapƒ±labilir
- 2: Blocked         ‚Üí Blocking Reason ZORUNLU, i≈ülemler kƒ±sƒ±tlƒ±
- 3: Inactive        ‚Üí Hi√ßbir i≈ülem yapƒ±lamaz
- 4: Preparing to be used ‚Üí SRM/PO/GR OK, Material Request YAPILAMAZ
- 5: Preparing to discontinuation ‚Üí MR/Issue/Transfer OK, yeni SRM YAPILAMAZ

TABLE: Material Serial (Data Structure IMMA.xlsx - Numara atama i√ßin)
| Field Name                    | Type     | Length | Description                    |
|-------------------------------|----------|--------|--------------------------------|
| Material Serial Id            | int      | 4      | Primary key                    |
| Material Serial               | text     | 2      | Prefix (PN, CH, TL, SP vb.)    |
| Material Serial Title         | text     | 32     | Seri a√ßƒ±klamasƒ±                |
| Last created material number  | int      | 8      | Son olu≈üturulan numara         |
| Inactivation status           | bool     | -      | Seri aktif mi?                 |

TABLE: Document (Data Structure IMMA.xlsx - Ekli dok√ºmanlar i√ßin)
| Field Name          | Type     | Length | Description                    |
|---------------------|----------|--------|--------------------------------|
| Document Id         | int      | 8      | Primary key                    |
| Document group Id   | int      | 8      | Malzeme ile ili≈üki             |
| Document type       | char     | 1      | MSDS, Image, Manual vb.        |
| File name           | text     | 128    | Dosya adƒ±                      |
| File size           | int      | -      | Bayt cinsinden boyut           |
| Upload datetime     | datetime | -      | Y√ºkleme tarihi                 |

--------------------------------------------------------------------------------
SCREEN FIELDS (UI Elements) - Screen Designs: 1 MDM
--------------------------------------------------------------------------------

BASIC DATA SECTION:
- Material Serial (dropdown) - Numara serisi se√ßimi
- Material Serial Title (readonly) - Seri a√ßƒ±klamasƒ±
- Material number (text/auto) - Otomatik veya manuel giri≈ü
- Old material number (text) - Eski sistem numarasƒ±
- Material title (text, 128) - Malzeme ba≈ülƒ±ƒüƒ±
- Material description (textarea, 512) - Detaylƒ± a√ßƒ±klama
- Image (file upload) - Ana g√∂rsel y√ºkleme
- Unit of measure (dropdown) - √ñl√ß√º birimi se√ßimi
- Material status (dropdown) - Durum se√ßimi (1-5)
- Blocking Reason (text, 128) - Status=2 i√ßin zorunlu
- Blocking Reevaluation date (date) - Yeniden deƒüerlendirme tarihi
- Notes (textarea, 512) - Notlar
- Created by user info (readonly) - Olu≈üturan kullanƒ±cƒ±

MRP AND STORAGE DATA SECTION:
- Reordering point quantity (number) - MRP tetikleme seviyesi
- Reordering quantity (number) - Yeniden sipari≈ü miktarƒ±
- Safety stock quantity (number) - G√ºvenlik stoƒüu
- Order batch quantity (number) - Sipari≈ü parti miktarƒ±
- Default Storage (dropdown) - Varsayƒ±lan depo
- Default Location (dropdown) - Varsayƒ±lan lokasyon
- Default Bin (dropdown) - Varsayƒ±lan bin

ACCOUNTING AND OPTIONS SECTION:
- Accounting Number (number, 8) - SAP muhasebe hesap kodu
- Accounting actions required (checkbox) - Muhasebe onayƒ± gerekli mi

MATERIAL GROUP AND OPTIONS SECTION:
- Material Group Code (dropdown) - Malzeme grubu
- Material Group Title (readonly) - Grup a√ßƒ±klamasƒ±
- Purchased Packing Material (checkbox) - ƒ∞ade edilebilir ambalaj
- Alternative material 1 (search) - Alternatif malzeme 1
- Alternative material 2 (search) - Alternatif malzeme 2
- Unit quantity in a package (number) - Paket i√ßi birim sayƒ±sƒ±

DOCUMENTS SECTION:
- Document group Id (hidden)
- Document list table
- Upload Document button
- Upload Image button
- Delete document/image buttons

ACTION BUTTONS:
- Save (Kaydet) - Malzeme kaydet/g√ºncelle
- Cancel (ƒ∞ptal) - Deƒüi≈üiklikleri iptal et
- Delete (Sil) - view modunda, yetki varsa

--------------------------------------------------------------------------------
BUSINESS RULES (ƒ∞≈ü Kurallarƒ±) - Master Data Maintenance Paragraphs 251-264
--------------------------------------------------------------------------------

1. Malzeme numarasƒ± se√ßilen seriden prefix + sonraki numara olarak verilebilir veya √∂nceden tanƒ±mlƒ± "##.#####-####" formatƒ±nda 11 haneli malzeme kodu olarak manuel girilebilir.

2. "Kullanƒ±ma hazƒ±rlanƒ±yor" durumu satƒ±nalma ve mal kabul√º i√ßin izin verir ancak malzeme talebine izin vermez.

3. "Kullanƒ±mdan kaldƒ±rƒ±lmaya hazƒ±rlanƒ±yor" durumu malzeme talebi, √ßƒ±kƒ±≈ü ve transfer i√ßin se√ßime izin verir ancak yeni SRM talebine izin vermez.

4. Yeni malzeme olu≈üturulduƒüunda malzeme durumu varsayƒ±lan olarak "Kullanƒ±ma hazƒ±rlanƒ±yor" se√ßilir.

5. Malzeme grubu, malzemeleri √ße≈üitli ama√ßlarla gruplamak i√ßin kullanƒ±lacaktƒ±r.

6. Malzemeler inaktif depo, lokasyon ve binlerden √ßƒ±karƒ±labilir ancak i√ßine konulamaz.

7. ƒ∞lk lokasyon, ilgili depo i√ßin varsayƒ±lan lokasyon olarak otomatik atanƒ±r. Daha sonra endirekt malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan deƒüi≈ütirilebilir.

8. ƒ∞lk bin, ilgili lokasyon i√ßin varsayƒ±lan bin olarak otomatik atanƒ±r. Daha sonra endirekt malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan deƒüi≈ütirilebilir.

9. Bin kodu d√ºzeni 3 farklƒ± giri≈üten olu≈üur. "-" ayƒ±rƒ±cƒ±dƒ±r, "#" 0'dan ba≈ülayƒ±p artacak numara alanƒ±nƒ± belirtir, Sayƒ±lar sayƒ±mƒ±n bu numarayla ba≈ülayacaƒüƒ±nƒ± g√∂sterir. √ñrneƒüin:
   - "##-##" bin numaralarƒ±nƒ±n "00-00"dan ba≈ülayƒ±p artacaƒüƒ± anlamƒ±na gelir
   - "1#-##" "10-00" ile ba≈ülar ve "10-01" ile devam eder
   - "12-34-56" eƒüer # numara alanƒ± yoksa sadece bu tek bin olu≈üturulur
   - "-" ayƒ±rƒ±cƒ± zorunlu deƒüildir, "12##" tanƒ±mlanabilir

10. "Ana g√∂rsel" etiketi ile malzemeye eklenen g√∂rseller, malzeme g√∂r√ºnt√ºleme ekranƒ± y√ºklendiƒüinde g√∂r√ºlebilir. Her malzeme ba≈üƒ±na sadece bir g√∂rsel bu ek etiketine sahip olabilir.

--------------------------------------------------------------------------------
FIELD VALIDATIONS
--------------------------------------------------------------------------------

- Material number: Seri modu ‚Üí otomatik, Manuel mod ‚Üí ##.#####-#### regex
- Title: maxlength=128, ZORUNLU
- Description: maxlength=512
- Old material number: maxlength=13
- Producer name: maxlength=32
- Producer model name: maxlength=64
- Blocking Reason: maxlength=128, Status=2 ise ZORUNLU
- Notes: maxlength=512
- Accounting Number: maxlength=8, sadece rakam
- Material Group Code: maxlength=6
- Alternative material 1-2: maxlength=13, ##.#####-#### formatƒ±
- Default Storage/Location/Bin: maxlength=8

Sayƒ±sal alanlar (float, 15 basamak):
- Reordering point quantity
- Reordering quantity
- Maximum stock quantity
- Safety stock quantity
- Order batch quantity
- Unit quantity in a package

--------------------------------------------------------------------------------
WORKFLOW / PROCESS FLOW
--------------------------------------------------------------------------------

CREATE MODE:
1. Kullanƒ±cƒ± numara atama y√∂ntemini se√ßer
2. Seri ile: Dropdown'dan seri se√ßer ‚Üí Otomatik numara g√∂sterilir
3. Manuel ile: Format doƒürulamasƒ± yapƒ±lƒ±r
4. Temel bilgiler girilir (Title ZORUNLU)
5. Status varsayƒ±lan: "Preparing to be used"
6. Stok parametreleri ve depo bilgileri girilir
7. Kaydet ‚Üí Malzeme olu≈üturulur
8. Sonraki adƒ±m: Supplier info record ekleme, stok giri≈üi yapma

EDIT MODE:
1. URL'den ?id= parametresi okunur
2. Mevcut malzeme verileri y√ºklenir
3. Material number READONLY olur
4. T√ºm diƒüer alanlar d√ºzenlenebilir
5. Status deƒüi≈üikliƒüi √∂zel kurallara tabidir
6. Kaydet ‚Üí Deƒüi≈üiklikler kaydedilir

VIEW MODE:
1. T√ºm alanlar READONLY
2. "main image" etiketli g√∂rsel g√∂sterilir
3. Dok√ºman listesi g√∂r√ºnt√ºleme/indirme yapƒ±labilir
4. "D√ºzenle" butonu edit moduna ge√ßirir

--------------------------------------------------------------------------------
INTEGRATION NOTES
--------------------------------------------------------------------------------

SAP Integration:
- Material number SAP'dan gelebilir (Old material number alanƒ±nda saklanƒ±r)
- Accounting Number SAP muhasebe hesabƒ±na referans verir
- Stok hareketleri SAP'a aktarƒ±lƒ±r (MM movement types)

MRP Integration:
- Reordering point altƒ±na d√º≈ü√ºnce SRM Suggestion olu≈üturulur
- Maximum stock seviyesine kadar sipari≈ü √∂nerilir
- Order batch quantity katlarƒ± olarak sipari≈ü miktarƒ± hesaplanƒ±r

Budget Integration:
- Malzeme talepleri budget kontrol√ºnden ge√ßer
- Material Group bazƒ±nda b√ºt√ße raporlamasƒ± yapƒ±labilir

Supplier Info Record:
- Malzeme aktif olunca supplier info record eklenebilir
- Birden fazla tedarik√ßi tanƒ±mlanabilir (preferred order ile √∂ncelik)

================================================================================
-->
<body>
    <!-- ============================================
         NAVBAR - Top Navigation (Maximo Style)
         ============================================ -->
    <nav class="modern-navbar">
        <div class="navbar-container">
            <!-- Brand -->
            <a href="index.html" class="navbar-brand">
                <div class="navbar-logo">M</div>
                <div class="brand-text">
                    <span class="brand-name">IMMA</span>
                    <span class="brand-subtitle">Endirek Malzeme Y√∂netimi</span>
                </div>
            </a>

            <!-- Navigation Menu -->
                        <ul class="navbar-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="material-list.html" class="nav-link active">
                        <span class="nav-icon">üì¶</span>
                        Ana Veriler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-list.html" class="dropdown-item active">Malzeme Listesi</a>
                        <a href="supplier-list.html" class="dropdown-item">Tedarik√ßi Listesi</a>
                        <a href="storage-type-list.html" class="dropdown-item">Depo Tipi Listesi</a>
                        <a href="number-series.html" class="dropdown-item">Numara Serileri</a>
                        <a href="material-group.html" class="dropdown-item">Malzeme Gruplarƒ±</a>
                        <a href="unit-of-measure-list.html" class="dropdown-item">√ñl√ß√º Birimleri</a>
                        <a href="department-cost-center-list.html" class="dropdown-item">Departman-Masraf Merkezi</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="mrp.html" class="nav-link">
                        <span class="nav-icon">üìà</span>
                        MRP
                    </a>
                </li>
                <li class="nav-item">
                    <a href="srm-list.html" class="nav-link">
                        <span class="nav-icon">üõí</span>
                        Satƒ±nalma
                    </a>
                    <div class="dropdown-menu">
                        <a href="srm-list.html" class="dropdown-item">Talep Listesi</a>
                        <a href="goods-receipt.html" class="dropdown-item">Mal Kabul</a>
                        <a href="po-list.html" class="dropdown-item">Satƒ±nalma Sipari≈üleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="budget-management.html" class="nav-link">
                        <span class="nav-icon">üí∞</span>
                        Budget
                    </a>
                    <div class="dropdown-menu">
                        <a href="budget-management.html" class="dropdown-item">B√ºt√ße Y√∂netimi</a>
                        <a href="budget-preference.html" class="dropdown-item">B√ºt√ße Tercihleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="material-request-list.html" class="nav-link">
                        <span class="nav-icon">üìã</span>
                        Talepler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-request-list.html" class="dropdown-item">Talep Listesi</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="transfer-list.html" class="nav-link">
                        <span class="nav-icon">üè≠</span>
                        Stock
                    </a>
                    <div class="dropdown-menu">
                        <a href="direct-issue.html" class="dropdown-item">Doƒürudan √áƒ±kƒ±≈ü</a>
                        <a href="warehouse-transfer.html" class="dropdown-item">Depo Transferi</a>
                        <a href="transfer-list.html" class="dropdown-item">Transfer Listesi</a>
                        <a href="inventory-counting.html" class="dropdown-item">Sayƒ±m ƒ∞≈ülemleri</a>
                        <a href="single-material-counting.html" class="dropdown-item">Tekli Malzeme Sayƒ±mƒ±</a>
                        <a href="scrapping.html" class="dropdown-item">Hurda ƒ∞≈ülemleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="user-material-limit-list.html" class="nav-link">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        Ayarlar
                    </a>
                    <div class="dropdown-menu">
                        <a href="user-material-limit-list.html" class="dropdown-item">Kullanƒ±cƒ± Malzeme Limitleri</a>
                        <a href="accounting-confirmation.html" class="dropdown-item">Muhasebe Onaylarƒ±</a>
                    </div>
                </li>
            </ul>

            <!-- User Menu -->
            <div class="navbar-user">
                <span class="user-name">Ahmet Yƒ±lmaz</span>
                <div class="user-avatar">AY</div>
            </div>
        </div>
    </nav>

    <!-- ============================================
         MAIN CONTENT
         ============================================ -->
    <main class="modern-container">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <a href="index.html">Ana Sayfa</a>
            <span>‚Ä∫</span>
            <a href="material-list.html">Malzeme Listesi</a>
            <span>‚Ä∫</span>
            <span>Malzeme Olustur</span>
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <div>
                <h1 class="page-title">Malzeme Veri Bakimi</h1>
                <p class="page-subtitle">Yeni malzeme olusturun veya mevcut malzemeyi duzenleyin</p>
            </div>
            <div class="page-actions">
                <button class="btn btn-secondary">Iptal</button>
                <button class="btn btn-primary">üíæ Kaydet</button>
            </div>
        </div>

        <!-- Developer Note - Ekran Aciklamasi -->
        </div>

        <!-- Form Content -->
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px;">
            <!-- Sol Kolon - Form -->
            <div>
                <!-- Material number Atama -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">üî¢</span>
                            Material Number Assignment
                        </div>
                    </div>
                    <div class="card-body">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Number Assignment Method</label>
                            <div style="display: flex; gap: 16px; margin-top: 8px;">
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="radio" name="numberType" value="serial" checked>
                                    Seri ile Otomatik
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="radio" name="numberType" value="manual">
                                    Manuel Giris
                                </label>
                            </div>
                        </div>

                        <!-- Seri ile Otomatik Numara Atama -->
                        <div class="form-grid" id="serialNumberSection">
                            <div class="form-group">
                                <label class="form-label">Material Serial <span class="required">*</span></label>
                                <select class="form-control" id="materialSerialSelect">
                                    <option value="">Seri Se√ßin...</option>
                                    <option value="PN">PN - Standart Endirek Malzeme</option>
                                    <option value="CH">CH - Kimyasal Malzeme</option>
                                    <option value="TL">TL - Alet/Takimlar</option>
                                    <option value="SP">SP - Yedek Parca</option>
                                </select>
                                <div class="form-hint" id="lastSerialHint">Seri secildiginde son numara gosterilecek</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Generated Number</label>
                                <div class="material-number-preview" id="autoGeneratedNumber">-</div>
                            </div>
                        </div>

                        <!-- Manuel Numara Girisi -->
                        <div class="form-grid" id="manualNumberSection" style="display: none;">
                            <div class="form-group">
                                <label class="form-label">Material number <span class="required">*</span></label>
                                <input type="text" class="form-control" id="manualMaterialNumber" placeholder="##.#####-####" maxlength="13" style="font-family: monospace; font-size: 18px; letter-spacing: 1px;">
                                <div class="form-hint">Format: ##.#####-#### (Ornek: 01.00002-0001)</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Entered Number</label>
                                <div class="material-number-preview" id="manualPreview">-</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Temel Bilgiler -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">üìã</span>
                            Basic Information
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label required">Material title</label>
                                <input type="text" class="form-control" placeholder="Max 128 karakter" maxlength="128">
                                <div class="form-hint">Malzeme talebinde goruntulenir</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Old material number</label>
                                <input type="text" class="form-control" id="oldMaterialNumber" placeholder="13 karakter" maxlength="13">
                                <div class="form-hint">Maximo'dan tasinan eski numara</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Material description</label>
                            <textarea class="form-control" placeholder="Max 512 karakter - Detayli aciklama (sadece anahtar kullanici gorebilir)" maxlength="512"></textarea>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Producer name</label>
                                <input type="text" class="form-control" id="producerName" placeholder="Max 32 karakter" maxlength="32">
                                <div class="form-hint">√úretici firma adƒ±</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Producer model name</label>
                                <input type="text" class="form-control" id="producerModelName" placeholder="Max 64 karakter" maxlength="64">
                                <div class="form-hint">√úretici model kodu/adƒ±</div>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label required">Unit of measure</label>
                                <select class="form-control" id="unitOfMeasure">
                                    <option value="">Se√ßin...</option>
                                    <option value="AD">AD - Adet</option>
                                    <option value="M">M - Metre</option>
                                    <option value="KG">KG - Kilogram</option>
                                    <option value="LT">LT - Litre</option>
                                    <option value="MT">MT - Metretul</option>
                                    <option value="PK">PK - Paket</option>
                                    <option value="KT">KT - Kutu</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label required">Material status</label>
                                <select class="form-control" id="materialStatus" onchange="toggleBlockingInfo()">
                                    <option value="4" selected>Preparing to be used</option>
                                    <option value="1">Active</option>
                                    <option value="2">Blocked</option>
                                    <option value="3">Inactive</option>
                                    <option value="5">Preparing to discontinuation</option>
                                </select>
                            </div>
                        </div>

                        </div>

                        <!-- Bloklama Bilgileri (Status Bloke ise gorunur) -->
                        <div id="blockingInfo" style="display: none; margin-top: 16px;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">Blocking Reason</label>
                                    <input type="text" class="form-control" id="blockingReason" placeholder="Max 128 karakter" maxlength="128">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Blocking Reevaluation date</label>
                                    <input type="date" class="form-control" id="blockingReevaluationDate">
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 12px;">
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="checkbox" id="blockedForMaterialRequest" name="blockedForMaterialRequest">
                                    Blocked for material request
                                </label>
                                <div class="form-hint">Bu malzeme taleplerde gosterilmez</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stock Parametreleri -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">üìä</span>
                            Stock and MRP Parameters
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Reordering point quantity</label>
                                <input type="number" class="form-control" id="reorderingPointQuantity" placeholder="0.000" step="0.001" max="999999999999999">
                                <div class="form-hint">Bu seviyenin altina dusunce siparis onerisi olusturulur</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Reordering quantity</label>
                                <input type="number" class="form-control" id="reorderingQuantity" placeholder="0.000" step="0.001" max="999999999999999">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Safety stock quantity</label>
                                <input type="number" class="form-control" id="safetyStockQuantity" placeholder="0.000" step="0.001" max="999999999999999">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Order batch quantity</label>
                                <input type="number" class="form-control" id="orderBatchQuantity" placeholder="0.000" step="0.001" max="999999999999999">
                                <div class="form-hint">Siparisler bu miktarin katlari olarak olusturulur</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Unit quantity in a package</label>
                                <input type="number" class="form-control" id="unitQuantityInPackage" placeholder="0.000" step="0.001" max="999999999999999">
                                <div class="form-hint">Etiket yazdirma hesaplamasinda kullanilir</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Default Depolama -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">üè≠</span>
                            Default Storage Location
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Default Storage</label>
                                <select class="form-control" id="defaultStorage">
                                    <option value="">Se√ßin...</option>
                                    <option value="MAIN">Main - Bakim Deposu</option>
                                    <option value="02Q">02Q - Alet Atolyesi</option>
                                    <option value="02C">02C - Kimyasal Depo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Default Location</label>
                                <select class="form-control" id="defaultLocation">
                                    <option value="">Se√ßin...</option>
                                    <option value="A1">A1 - Raf B√∂l√ºm√º A1</option>
                                    <option value="A2">A2 - Raf B√∂l√ºm√º A2</option>
                                    <option value="B1">B1 - Raf B√∂l√ºm√º B1</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Default Bin</label>
                                <select class="form-control" id="defaultBin">
                                    <option value="">Se√ßin...</option>
                                    <option value="01-01">01-01</option>
                                    <option value="01-02">01-02</option>
                                    <option value="02-01">02-01</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Alternatif Malzemeler -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">üîÑ</span>
                            Alternative Materials
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Alternative material 1</label>
                                <input type="text" class="form-control" id="alternativeMaterial1" placeholder="##.#####-####" maxlength="13">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Alternative material 2</label>
                                <input type="text" class="form-control" id="alternativeMaterial2" placeholder="##.#####-####" maxlength="13">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Material Group Code ve Muhasebe -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">üíº</span>
                            Grouping and Accounting
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Material Group Code</label>
                                <div class="autocomplete-wrapper">
                                    <input type="text" class="form-control" id="materialGroupCode"
                                           list="materialGroupDatalist" autocomplete="off"
                                           placeholder="Kod veya ad ile arayin..." maxlength="6">
                                    <datalist id="materialGroupDatalist"></datalist>
                                    <span class="search-icon">üîç</span>
                                </div>
                                <div class="form-hint">Cesitli raporlama ve gruplama amacli (max 6 karakter)</div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Material Group Title</label>
                                <input type="text" class="form-control" id="materialGroupTitle" readonly>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Accounting Number</label>
                                <input type="text" class="form-control" id="accountingNumber" placeholder="8 haneli hesap kodu" maxlength="8">
                            </div>
                        </div>

                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="purchasedPackingMaterial" name="purchasedPacking">
                                Purchased Packing Material
                            </label>
                            <div class="form-hint">Bu malzeme iade edilebilir ambalaj malzemesi mi?</div>
                        </div>

                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="accountingActionsRequired" name="accountingRequired">
                                Accounting actions required for transactions
                            </label>
                            <div class="form-hint">Bu malzeme icin muhasebe islem onay gerektirir mi?</div>
                        </div>
                    </div>
                </div>

                <!-- Notes -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">üìù</span>
                            Notes
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">Notes</label>
                            <textarea class="form-control" placeholder="Max 512 karakter - Sadece yetkili kullanicilar gorebilir" maxlength="512" rows="4"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sag Kolon - Resim ve Ekler -->
            <div>
                <!-- Malzeme Resmi -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">üñºÔ∏è</span>
                            Material Image
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="image-upload-area" onclick="document.getElementById('imageInput').click()">
                            <input type="file" id="imageInput" accept="image/*" style="display: none;">
                            <div style="font-size: 48px; margin-bottom: 12px;">üì∑</div>
                            <div style="font-weight: 500; color: var(--text-primary);">Resim Yuklemek Icin Tiklayin</div>
                            <div style="font-size: 12px; color: var(--text-light); margin-top: 8px;">veya surukleyip birakin</div>
                        </div>

                        </div>
                    </div>
                </div>

                <!-- Ekli Dokumanlar -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">üìé</span>
                            Attached Documents
                        </div>
                        <button class="btn btn-sm btn-primary">+ Add Document</button>
                    </div>
                    <div class="card-body">
                        </div>

                        <div class="attachment-list" style="margin-top: 16px;">
                            <div class="attachment-item">
                                <div class="attachment-icon">üìÑ</div>
                                <div class="attachment-info">
                                    <div class="attachment-name">MSDS_Kimyasal_TR.pdf</div>
                                    <div class="attachment-meta">MSDS - 2.4 MB - 10.12.2024</div>
                                </div>
                                <button class="btn btn-icon btn-secondary">üëÅÔ∏è</button>
                                <button class="btn btn-icon btn-danger">üóëÔ∏è</button>
                            </div>
                            <div class="attachment-item">
                                <div class="attachment-icon">üñºÔ∏è</div>
                                <div class="attachment-info">
                                    <div class="attachment-name">malzeme_foto.jpg</div>
                                    <div class="attachment-meta">Material Image - 850 KB - 09.12.2024</div>
                                </div>
                                <button class="btn btn-icon btn-secondary">üëÅÔ∏è</button>
                                <button class="btn btn-icon btn-danger">üóëÔ∏è</button>
                            </div>
                        </div>

                        </div>
                    </div>
                </div>

                <!-- Record Information -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-title-icon">‚ÑπÔ∏è</span>
                            Record Information
                        </div>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; gap: 12px; font-size: 13px;">
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-light);">Created by user info:</span>
                                <span>-</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-light);">Creation date time:</span>
                                <span>-</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-light);">Last change user info:</span>
                                <span>-</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-light);">Last change date time:</span>
                                <span>-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Alt Butonlar -->
        <div class="card-footer" style="margin-top: 24px; background: var(--bg-secondary); border-radius: var(--radius-lg);">
            <button class="btn btn-secondary" id="cancelBtn">Iptal</button>
            <button class="btn btn-outline" id="saveDraftBtn">Taslak Olarak Kaydet</button>
            <button class="btn btn-primary" id="saveCloseBtn">üíæ Kaydet ve Kapat</button>
        </div>

    </main>

    <!-- Document Upload Modal -->
    <div class="upload-modal-overlay" id="documentUploadModal">
        <div class="upload-modal-content">
            <div class="upload-modal-header">
                <h3>üìé Add Document</h3>
                <button class="upload-modal-close" data-modal="documentUploadModal">&times;</button>
            </div>
            <div class="upload-modal-body">
                <div class="upload-drop-zone" id="documentDropZone">
                    <div class="upload-icon">üìÑ</div>
                    <p><strong>Dosya se√ßmek i√ßin tƒ±klayƒ±n</strong></p>
                    <p>veya s√ºr√ºkleyip bƒ±rakƒ±n</p>
                    <p class="formats">Desteklenen formatlar: PDF, JPG, PNG (Maks. 10MB)</p>
                </div>
                <input type="file" class="upload-file-input" id="documentFileInput" accept=".pdf,.jpg,.jpeg,.png">
                <div class="upload-preview" id="documentPreview">
                    <div class="upload-preview-item">
                        <span class="upload-preview-icon">üìÑ</span>
                        <div class="upload-preview-info">
                            <div class="upload-preview-name" id="documentFileName">-</div>
                            <div class="upload-preview-size" id="documentFileSize">-</div>
                        </div>
                        <button class="upload-preview-remove" id="documentRemoveBtn">&times;</button>
                    </div>
                </div>
            </div>
            <div class="upload-modal-footer">
                <button class="btn-cancel" data-modal="documentUploadModal">ƒ∞ptal</button>
                <button class="btn-upload" id="documentUploadBtn" disabled>Y√ºkle</button>
            </div>
        </div>
    </div>

    <!-- Image Upload Modal -->
    <div class="upload-modal-overlay" id="imageUploadModal">
        <div class="upload-modal-content">
            <div class="upload-modal-header">
                <h3>üì∑ Resim Y√ºkle</h3>
                <button class="upload-modal-close" data-modal="imageUploadModal">&times;</button>
            </div>
            <div class="upload-modal-body">
                <div class="upload-drop-zone" id="imageDropZone">
                    <div class="upload-icon">üñºÔ∏è</div>
                    <p><strong>Resim se√ßmek i√ßin tƒ±klayƒ±n</strong></p>
                    <p>veya s√ºr√ºkleyip bƒ±rakƒ±n</p>
                    <p class="formats">Desteklenen formatlar: JPG, PNG, GIF (Maks. 5MB)</p>
                </div>
                <input type="file" class="upload-file-input" id="imageFileInput" accept=".jpg,.jpeg,.png,.gif">
                <div class="upload-preview" id="imagePreview">
                    <div class="upload-preview-item">
                        <span class="upload-preview-icon">üñºÔ∏è</span>
                        <div class="upload-preview-info">
                            <div class="upload-preview-name" id="imageFileName">-</div>
                            <div class="upload-preview-size" id="imageFileSize">-</div>
                        </div>
                        <button class="upload-preview-remove" id="imageRemoveBtn">&times;</button>
                    </div>
                </div>
            </div>
            <div class="upload-modal-footer">
                <button class="btn-cancel" data-modal="imageUploadModal">ƒ∞ptal</button>
                <button class="btn-upload" id="imageUploadBtn" disabled>Y√ºkle</button>
            </div>
        </div>
    </div>

    <script>
        // Material Groups data for autocomplete
        const materialGroups = [
            { code: 'GEN', title: 'Genel Malzemeler' },
            { code: 'ELK', title: 'Elektrik Malzemeleri' },
            { code: 'MKN', title: 'Mekanik Parcalar' },
            { code: 'KMY', title: 'Kimyasallar' },
            { code: 'YAG', title: 'Yaglar ve Sivislar' },
            { code: 'HID', title: 'Hidrolik Malzemeler' },
            { code: 'PNO', title: 'Pnomatik Malzemeler' },
            { code: 'ISI', title: 'Isitma Sogutma' },
            { code: 'GUV', title: 'Guvenlik Malzemeleri' },
            { code: 'TEM', title: 'Temizlik Malzemeleri' }
        ];

        function findMaterialGroupByCode(code) {
            return materialGroups.find(g => g.code === code);
        }

        // Setup Material Group autocomplete
        function setupMaterialGroupAutocomplete() {
            const input = document.getElementById('materialGroupCode');
            const datalist = document.getElementById('materialGroupDatalist');
            const titleInput = document.getElementById('materialGroupTitle');

            if (!input || !datalist) return;

            // Dynamic filter on input
            input.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase().trim();
                datalist.innerHTML = '';

                if (searchTerm.length < 1) return;

                const filtered = materialGroups.filter(g =>
                    g.code.toLowerCase().includes(searchTerm) ||
                    g.title.toLowerCase().includes(searchTerm)
                ).slice(0, 10);

                filtered.forEach(g => {
                    const option = document.createElement('option');
                    option.value = g.code;
                    option.textContent = `${g.code} - ${g.title}`;
                    datalist.appendChild(option);
                });
            });

            // Auto-populate title on selection
            input.addEventListener('change', function() {
                const group = findMaterialGroupByCode(this.value);
                if (titleInput) {
                    titleInput.value = group ? group.title : '';
                }
            });

            input.addEventListener('blur', function() {
                const group = findMaterialGroupByCode(this.value);
                if (titleInput) {
                    titleInput.value = group ? group.title : '';
                }
            });
        }

        // Initialize autocomplete on page load
        document.addEventListener('DOMContentLoaded', function() {
            setupMaterialGroupAutocomplete();
        });

        // Toggle blocking info section based on material status
        function toggleBlockingInfo() {
            const status = document.getElementById('materialStatus').value;
            const blockingInfo = document.getElementById('blockingInfo');
            if (status === '2') { // Blocked
                blockingInfo.style.display = 'block';
            } else {
                blockingInfo.style.display = 'none';
            }
        }

        // Page header buttons
        document.querySelector('.page-actions .btn-secondary').addEventListener('click', function() {
            if (confirm('Yapƒ±lan deƒüi≈üiklikler kaydedilmeyecek. ƒ∞ptal etmek istediƒüinizden emin misiniz?')) {
                window.location.href = 'material-list.html';
            }
        });

        document.querySelector('.page-actions .btn-primary').addEventListener('click', function() {
            saveMaterial(false);
        });

        // Save function
        function saveMaterial(asDraft) {
            const materialNumber = document.querySelector('.material-number-preview').textContent;
            const materialTitle = document.querySelector('input[placeholder="Max 128 karakter"]').value;
            const unit = document.querySelector('select option[value="AD"]').parentElement.value;

            if (!materialTitle.trim()) {
                alert('L√ºtfen malzeme ba≈ülƒ±ƒüƒ±nƒ± giriniz.');
                return false;
            }

            const status = asDraft ? 'Taslak' : 'Aktif';
            if (confirm('Malzeme kaydedilecek: ' + materialNumber + '\nStatus: ' + status + '\n\nDevam etmek istiyor musunuz?')) {
                alert('‚úÖ Malzeme ba≈üarƒ±yla kaydedildi!\n\nMaterial number: ' + materialNumber + '\nMaterial title: ' + materialTitle);
                return true;
            }
            return false;
        }

        // Cancel button
        document.getElementById('cancelBtn').addEventListener('click', function() {
            if (confirm('Yapƒ±lan deƒüi≈üiklikler kaydedilmeyecek. ƒ∞ptal etmek istediƒüinizden emin misiniz?')) {
                window.location.href = 'material-list.html';
            }
        });

        // Save as draft button
        document.getElementById('saveDraftBtn').addEventListener('click', function() {
            if (saveMaterial(true)) {
                // Stay on the page for draft
            }
        });

        // Save and close button
        document.getElementById('saveCloseBtn').addEventListener('click', function() {
            if (saveMaterial(false)) {
                window.location.href = 'material-list.html';
            }
        });

        // Attachment view buttons - opens file in new window
        document.querySelectorAll('.attachment-item .btn-secondary').forEach(function(btn) {
            btn.addEventListener('click', function() {
                const fileName = this.closest('.attachment-item').querySelector('.attachment-name').textContent;
                // In a real app, this would open the actual file URL
                // For demo, we show a simulated viewer
                const viewerWindow = window.open('', '_blank', 'width=800,height=600');
                viewerWindow.document.write(`
                    <html>
                    <head>
                        <title>Dosya G√∂r√ºnt√ºleyici - ${fileName}</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 40px; text-align: center; background: #f5f5f5; }
                            .viewer-container { background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; }
                            .file-icon { font-size: 64px; margin-bottom: 20px; }
                            h2 { color: #333; margin-bottom: 10px; }
                            p { color: #666; }
                            .btn { padding: 12px 24px; background: #e40045; color: white; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px; }
                        </style>
                    </head>
                    <body>
                        <div class="viewer-container">
                            <div class="file-icon">üìÑ</div>
                            <h2>${fileName}</h2>
                            <p>Dosya g√∂r√ºnt√ºleniyor</p>
                            <p style="font-size: 13px; color: #999;">(Demo modunda ger√ßek dosya i√ßeriƒüi g√∂r√ºnt√ºlenmiyor)</p>
                            <button class="btn" onclick="window.close()">Kapat</button>
                        </div>
                    </body>
                    </html>
                `);
            });
        });

        // Attachment delete buttons
        document.querySelectorAll('.attachment-item .btn-danger').forEach(function(btn) {
            btn.addEventListener('click', function() {
                const item = this.closest('.attachment-item');
                const fileName = item.querySelector('.attachment-name').textContent;
                if (confirm('Dosya silinecek: ' + fileName + '\n\nBu i≈ülem geri alƒ±namaz!')) {
                    item.style.transition = 'opacity 0.3s';
                    item.style.opacity = '0';
                    setTimeout(function() {
                        item.remove();
                        alert('‚úÖ Dosya silindi: ' + fileName);
                    }, 300);
                }
            });
        });

        // ======================================
        // Upload Modal Handling
        // ======================================
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('active');
            // Reset the modal state
            const preview = modal.querySelector('.upload-preview');
            if (preview) preview.classList.remove('has-file');
            const uploadBtn = modal.querySelector('.btn-upload');
            if (uploadBtn) uploadBtn.disabled = true;
            const fileInput = modal.querySelector('.upload-file-input');
            if (fileInput) fileInput.value = '';
        }

        // Close modal buttons
        document.querySelectorAll('.upload-modal-close, .btn-cancel').forEach(btn => {
            btn.addEventListener('click', function() {
                const modalId = this.dataset.modal || this.closest('.upload-modal-overlay').id;
                closeModal(modalId);
            });
        });

        // Close on overlay click
        document.querySelectorAll('.upload-modal-overlay').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal(this.id);
                }
            });
        });

        // Document upload modal setup
        const documentModal = document.getElementById('documentUploadModal');
        const documentDropZone = document.getElementById('documentDropZone');
        const documentFileInput = document.getElementById('documentFileInput');
        const documentPreview = document.getElementById('documentPreview');
        const documentFileName = document.getElementById('documentFileName');
        const documentFileSize = document.getElementById('documentFileSize');
        const documentUploadBtn = document.getElementById('documentUploadBtn');
        const documentRemoveBtn = document.getElementById('documentRemoveBtn');
        let selectedDocumentFile = null;

        documentDropZone.addEventListener('click', () => documentFileInput.click());
        documentDropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            documentDropZone.classList.add('dragover');
        });
        documentDropZone.addEventListener('dragleave', () => {
            documentDropZone.classList.remove('dragover');
        });
        documentDropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            documentDropZone.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file) handleDocumentFile(file);
        });

        documentFileInput.addEventListener('change', function() {
            if (this.files[0]) handleDocumentFile(this.files[0]);
        });

        function handleDocumentFile(file) {
            const allowedTypes = ['application/pdf', 'image/jpeg', 'image/png'];
            if (!allowedTypes.includes(file.type)) {
                alert('Desteklenmeyen dosya formatƒ±. L√ºtfen PDF, JPG veya PNG y√ºkleyin.');
                return;
            }
            if (file.size > 10 * 1024 * 1024) {
                alert('Dosya boyutu 10MB\'dan b√ºy√ºk olamaz.');
                return;
            }
            selectedDocumentFile = file;
            documentFileName.textContent = file.name;
            documentFileSize.textContent = formatFileSize(file.size);
            documentPreview.classList.add('has-file');
            documentUploadBtn.disabled = false;
        }

        documentRemoveBtn.addEventListener('click', function() {
            selectedDocumentFile = null;
            documentFileInput.value = '';
            documentPreview.classList.remove('has-file');
            documentUploadBtn.disabled = true;
        });

        documentUploadBtn.addEventListener('click', function() {
            if (selectedDocumentFile) {
                // Simulate upload
                alert('‚úÖ Dok√ºman ba≈üarƒ±yla y√ºklendi!\n\nDosya: ' + selectedDocumentFile.name);

                // Add to attachment list
                const attachmentList = document.querySelector('.attachment-list');
                if (attachmentList) {
                    const newItem = document.createElement('div');
                    newItem.className = 'attachment-item';
                    newItem.innerHTML = `
                        <div class="attachment-icon">üìÑ</div>
                        <div class="attachment-info">
                            <div class="attachment-name">${selectedDocumentFile.name}</div>
                            <div class="attachment-meta">${formatFileSize(selectedDocumentFile.size)} ‚Ä¢ Yeni y√ºklendi</div>
                        </div>
                        <button class="btn btn-secondary btn-sm">G√∂r√ºnt√ºle</button>
                        <button class="btn btn-danger btn-sm">Sil</button>
                    `;
                    attachmentList.appendChild(newItem);
                }

                closeModal('documentUploadModal');
            }
        });

        // Image upload modal setup
        const imageDropZone = document.getElementById('imageDropZone');
        const imageFileInput = document.getElementById('imageFileInput');
        const imagePreview = document.getElementById('imagePreview');
        const imageFileName = document.getElementById('imageFileName');
        const imageFileSize = document.getElementById('imageFileSize');
        const imageUploadBtn = document.getElementById('imageUploadBtn');
        const imageRemoveBtn = document.getElementById('imageRemoveBtn');
        let selectedImageFile = null;

        imageDropZone.addEventListener('click', () => imageFileInput.click());
        imageDropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            imageDropZone.classList.add('dragover');
        });
        imageDropZone.addEventListener('dragleave', () => {
            imageDropZone.classList.remove('dragover');
        });
        imageDropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            imageDropZone.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file) handleImageFile(file);
        });

        imageFileInput.addEventListener('change', function() {
            if (this.files[0]) handleImageFile(this.files[0]);
        });

        function handleImageFile(file) {
            const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];
            if (!allowedTypes.includes(file.type)) {
                alert('Desteklenmeyen dosya formatƒ±. L√ºtfen JPG, PNG veya GIF y√ºkleyin.');
                return;
            }
            if (file.size > 5 * 1024 * 1024) {
                alert('Dosya boyutu 5MB\'dan b√ºy√ºk olamaz.');
                return;
            }
            selectedImageFile = file;
            imageFileName.textContent = file.name;
            imageFileSize.textContent = formatFileSize(file.size);
            imagePreview.classList.add('has-file');
            imageUploadBtn.disabled = false;
        }

        imageRemoveBtn.addEventListener('click', function() {
            selectedImageFile = null;
            imageFileInput.value = '';
            imagePreview.classList.remove('has-file');
            imageUploadBtn.disabled = true;
        });

        imageUploadBtn.addEventListener('click', function() {
            if (selectedImageFile) {
                // Simulate upload and show preview
                const reader = new FileReader();
                reader.onload = function(e) {
                    const uploadArea = document.querySelector('.image-upload-area');
                    uploadArea.innerHTML = '<img src="' + e.target.result + '" alt="Malzeme Resmi">';
                    uploadArea.classList.add('has-image');
                    alert('‚úÖ Resim ba≈üarƒ±yla y√ºklendi!\n\nDosya: ' + selectedImageFile.name);
                };
                reader.readAsDataURL(selectedImageFile);
                closeModal('imageUploadModal');
            }
        });

        // Add document button - opens modal
        document.querySelector('.card-header .btn-primary').addEventListener('click', function() {
            openModal('documentUploadModal');
        });

        // Image upload area - opens modal
        document.querySelector('.image-upload-area').addEventListener('click', function() {
            openModal('imageUploadModal');
        });

        // Demo material data for edit mode (matching material-list.html)
        const materialsData = {
            '1': {
                materialNo: '01.00001-0001',
                title: 'Elektrik Motoru 5.5kW',
                oldMaterialNo: 'MAX-001-EM',
                description: '5.5kW g√º√ßl√º elektrik motoru, end√ºstriyel kullanƒ±m i√ßin uygundur. ABB marka, IE3 verimlilik sƒ±nƒ±fƒ±.',
                unit: 'AD',
                status: '1',
                group: 'ELK',
                manufacturer: 'ABB',
                modelCode: 'M3AA 112M 4',
                reorderPoint: '5',
                reorderQty: '10',
                maxStock: '20',
                safetyStock: '3',
                lotSize: '5',
                packageQty: '1',
                warehouse: 'MAIN',
                location: 'A1',
                shelf: '01-01',
                accountCode: '25310001',
                createdBy: 'Mehmet Yƒ±lmaz',
                createdDate: '15.03.2024',
                modifiedBy: 'Ahmet Yƒ±lmaz',
                modifiedDate: '10.12.2024'
            },
            '2': {
                materialNo: '01.00002-0001',
                title: 'Rulman 6205-2RS',
                oldMaterialNo: 'MAX-002-RL',
                description: 'SKF marka 6205-2RS kapaklƒ± rulman. Y√ºksek hƒ±z ve d√º≈ü√ºk g√ºr√ºlt√º seviyesi.',
                unit: 'AD',
                status: '1',
                group: 'MKN',
                manufacturer: 'SKF',
                modelCode: '6205-2RS1',
                reorderPoint: '50',
                reorderQty: '100',
                maxStock: '300',
                safetyStock: '30',
                lotSize: '50',
                packageQty: '10',
                warehouse: 'MAIN',
                location: 'A2',
                shelf: '01-02',
                accountCode: '25310002',
                createdBy: 'Ali Demir',
                createdDate: '10.01.2024',
                modifiedBy: 'Ali Demir',
                modifiedDate: '05.11.2024'
            },
            '3': {
                materialNo: '01.00003-0001',
                title: 'Hidrolik Yaƒü ISO 46',
                oldMaterialNo: 'MAX-003-HY',
                description: 'Shell Tellus S2 M 46 hidrolik yaƒüƒ±. Y√ºksek sƒ±caklƒ±k stabilitesi ve a≈üƒ±nma korumasƒ±.',
                unit: 'LT',
                status: '1',
                group: 'KMY',
                manufacturer: 'Shell',
                modelCode: 'Tellus S2 M 46',
                reorderPoint: '200',
                reorderQty: '500',
                maxStock: '1000',
                safetyStock: '100',
                lotSize: '200',
                packageQty: '20',
                warehouse: '02C',
                location: 'B1',
                shelf: '02-01',
                accountCode: '25310003',
                createdBy: 'Fatma Kaya',
                createdDate: '20.02.2024',
                modifiedBy: 'Fatma Kaya',
                modifiedDate: '01.12.2024'
            },
            '4': {
                materialNo: '01.00004-0001',
                title: 'PLC Mod√ºl√º S7-1500',
                oldMaterialNo: 'MAX-004-PL',
                description: 'Siemens S7-1500 serisi dijital giri≈ü mod√ºl√º. 32 kanal, 24VDC.',
                unit: 'AD',
                status: '1',
                group: 'ELK',
                manufacturer: 'Siemens',
                modelCode: '6ES7521-1BL00-0AB0',
                reorderPoint: '3',
                reorderQty: '5',
                maxStock: '15',
                safetyStock: '2',
                lotSize: '1',
                packageQty: '1',
                warehouse: 'MAIN',
                location: 'A1',
                shelf: '01-01',
                accountCode: '25310004',
                createdBy: 'Mehmet Yƒ±lmaz',
                createdDate: '05.04.2024',
                modifiedBy: 'Ahmet Yƒ±lmaz',
                modifiedDate: '08.12.2024'
            },
            '5': {
                materialNo: '01.00005-0001',
                title: 'G√ºvenlik Eldiveni (√áift)',
                oldMaterialNo: 'MAX-005-GE',
                description: 'Nitril kaplƒ± i≈ü eldiveni. Mekanik koruma seviyesi 4.',
                unit: 'AD',
                status: '1',
                group: 'GEN',
                manufacturer: 'Ansell',
                modelCode: 'HyFlex 11-800',
                reorderPoint: '100',
                reorderQty: '200',
                maxStock: '500',
                safetyStock: '50',
                lotSize: '50',
                packageQty: '12',
                warehouse: 'MAIN',
                location: 'B1',
                shelf: '02-01',
                accountCode: '25310005',
                createdBy: 'Ali Demir',
                createdDate: '12.03.2024',
                modifiedBy: 'Fatma Kaya',
                modifiedDate: '25.11.2024'
            },
            '6': {
                materialNo: '02.00001-0001',
                title: 'Konvey√∂r Kayƒ±≈üƒ± 500mm',
                oldMaterialNo: 'MAX-006-KK',
                description: 'PVC konvey√∂r kayƒ±≈üƒ±, geni≈ülik 500mm, 3 katlƒ±.',
                unit: 'MT',
                status: '2',
                group: 'MKN',
                manufacturer: 'Continental',
                modelCode: 'EP400/3-500',
                reorderPoint: '20',
                reorderQty: '50',
                maxStock: '100',
                safetyStock: '10',
                lotSize: '25',
                packageQty: '1',
                warehouse: 'MAIN',
                location: 'A2',
                shelf: '01-02',
                accountCode: '25310006',
                createdBy: 'Mehmet Yƒ±lmaz',
                createdDate: '08.05.2024',
                modifiedBy: 'Ali Demir',
                modifiedDate: '15.10.2024'
            },
            '7': {
                materialNo: '02.00002-0001',
                title: 'Frekans Konvert√∂r√º 7.5kW',
                oldMaterialNo: 'MAX-007-FK',
                description: 'ABB frekans konvert√∂r√º, 7.5kW, 380V, 3 faz.',
                unit: 'AD',
                status: '4',
                group: 'ELK',
                manufacturer: 'ABB',
                modelCode: 'ACS580-01-017A-4',
                reorderPoint: '2',
                reorderQty: '3',
                maxStock: '10',
                safetyStock: '1',
                lotSize: '1',
                packageQty: '1',
                warehouse: 'MAIN',
                location: 'A1',
                shelf: '01-01',
                accountCode: '25310007',
                createdBy: 'Fatma Kaya',
                createdDate: '22.06.2024',
                modifiedBy: 'Mehmet Yƒ±lmaz',
                modifiedDate: '05.12.2024'
            },
            '8': {
                materialNo: '02.00003-0001',
                title: 'Pn√∂matik Silindir 100x200',
                oldMaterialNo: 'MAX-008-PS',
                description: 'Festo pn√∂matik silindir, √ßap 100mm, strok 200mm.',
                unit: 'AD',
                status: '1',
                group: 'MKN',
                manufacturer: 'Festo',
                modelCode: 'DSBC-100-200-PPVA-N3',
                reorderPoint: '3',
                reorderQty: '5',
                maxStock: '15',
                safetyStock: '2',
                lotSize: '1',
                packageQty: '1',
                warehouse: 'MAIN',
                location: 'A2',
                shelf: '01-02',
                accountCode: '25310008',
                createdBy: 'Ali Demir',
                createdDate: '18.07.2024',
                modifiedBy: 'Ali Demir',
                modifiedDate: '28.11.2024'
            },
            '9': {
                materialNo: '02.00004-0001',
                title: 'Sens√∂r End√ºktif M12',
                oldMaterialNo: 'MAX-009-SE',
                description: 'Omron end√ºktif yakla≈üƒ±m sens√∂r√º, M12, NPN, 4mm algƒ±lama.',
                unit: 'AD',
                status: '1',
                group: 'ELK',
                manufacturer: 'Omron',
                modelCode: 'E2A-M12KS04-WP-B1',
                reorderPoint: '10',
                reorderQty: '20',
                maxStock: '50',
                safetyStock: '5',
                lotSize: '10',
                packageQty: '1',
                warehouse: 'MAIN',
                location: 'A1',
                shelf: '01-01',
                accountCode: '25310009',
                createdBy: 'Mehmet Yƒ±lmaz',
                createdDate: '03.08.2024',
                modifiedBy: 'Fatma Kaya',
                modifiedDate: '02.12.2024'
            },
            '10': {
                materialNo: '02.00005-0001',
                title: 'Baret (Sarƒ±)',
                oldMaterialNo: 'MAX-010-BR',
                description: 'MSA V-Gard sarƒ± i≈ü bareti, 6 nokta s√ºspansiyon.',
                unit: 'AD',
                status: '3',
                group: 'GEN',
                manufacturer: 'MSA',
                modelCode: 'V-Gard 520',
                reorderPoint: '30',
                reorderQty: '50',
                maxStock: '150',
                safetyStock: '20',
                lotSize: '10',
                packageQty: '1',
                warehouse: 'MAIN',
                location: 'B1',
                shelf: '02-01',
                accountCode: '25310010',
                createdBy: 'Ali Demir',
                createdDate: '25.09.2024',
                modifiedBy: 'Ali Demir',
                modifiedDate: '20.11.2024'
            }
        };

        // =============================================
        // Material number Atama Mantigi
        // =============================================
        const serialNumberSection = document.getElementById('serialNumberSection');
        const manualNumberSection = document.getElementById('manualNumberSection');
        const materialSerialSelect = document.getElementById('materialSerialSelect');
        const lastSerialHint = document.getElementById('lastSerialHint');
        const autoGeneratedNumber = document.getElementById('autoGeneratedNumber');
        const manualMaterialNumber = document.getElementById('manualMaterialNumber');
        const manualPreview = document.getElementById('manualPreview');
        const numberTypeRadios = document.querySelectorAll('input[name="numberType"]');

        // Seri numaralari ve son kullanilan degerler
        const serialData = {
            'PN': { lastNumber: 12847, title: 'Standart Endirek Malzeme' },
            'CH': { lastNumber: 523, title: 'Kimyasal Malzeme' },
            'TL': { lastNumber: 156, title: 'Alet/Takimlar' },
            'SP': { lastNumber: 89, title: 'Yedek Parca' }
        };

        // Radio button degisikliginde mod degistir
        numberTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'serial') {
                    serialNumberSection.style.display = 'grid';
                    manualNumberSection.style.display = 'none';
                } else {
                    serialNumberSection.style.display = 'none';
                    manualNumberSection.style.display = 'grid';
                }
            });
        });

        // Seri secildiginde otomatik numara goster
        materialSerialSelect.addEventListener('change', function() {
            const selectedSerial = this.value;
            if (selectedSerial && serialData[selectedSerial]) {
                const nextNumber = serialData[selectedSerial].lastNumber + 1;
                lastSerialHint.textContent = 'Son olusturulan numara: ' + selectedSerial + '-' + serialData[selectedSerial].lastNumber.toString().padStart(5, '0');
                autoGeneratedNumber.textContent = selectedSerial + '-' + nextNumber.toString().padStart(5, '0');
            } else {
                lastSerialHint.textContent = 'Seri secildiginde son numara gosterilecek';
                autoGeneratedNumber.textContent = '-';
            }
        });

        // Manuel giris formatlama (##.#####-####)
        manualMaterialNumber.addEventListener('input', function() {
            let value = this.value.replace(/[^0-9]/g, ''); // Sadece rakamlar

            // Format: ##.#####-####
            if (value.length > 11) value = value.substring(0, 11);

            let formatted = '';
            if (value.length > 0) formatted = value.substring(0, 2);
            if (value.length > 2) formatted += '.' + value.substring(2, 7);
            if (value.length > 7) formatted += '-' + value.substring(7, 11);

            this.value = formatted;

            // Preview guncelle
            if (formatted.length === 13) {
                manualPreview.textContent = formatted;
                manualPreview.style.color = '#28a745';
            } else {
                manualPreview.textContent = formatted || '-';
                manualPreview.style.color = '#dc3545';
            }
        });

        // Check URL for edit mode and auto-fill form
        const urlParams = new URLSearchParams(window.location.search);
        const materialId = urlParams.get('id');

        if (materialId && materialsData[materialId]) {
            const material = materialsData[materialId];

            // Update page title and breadcrumb
            document.querySelector('.page-title').textContent = 'Malzeme D√ºzenle';
            document.querySelector('.page-subtitle').textContent = 'Mevcut malzeme bilgilerini d√ºzenleyin';
            document.querySelector('.breadcrumb').innerHTML = '<a href="index.html">Ana Sayfa</a><span>‚Ä∫</span><a href="material-list.html">Malzeme Listesi</a><span>‚Ä∫</span><span>Malzeme D√ºzenle</span>';

            // Edit modunda manuel numara girisi goster ve mevcut numarayi doldur
            document.querySelector('input[name="numberType"][value="manual"]').checked = true;
            serialNumberSection.style.display = 'none';
            manualNumberSection.style.display = 'grid';
            manualMaterialNumber.value = material.materialNo;
            manualPreview.textContent = material.materialNo;
            manualPreview.style.color = '#28a745';

            // Edit modunda numara degistirilemez
            manualMaterialNumber.readOnly = true;
            manualMaterialNumber.style.backgroundColor = '#f5f5f5';
            document.querySelectorAll('input[name="numberType"]').forEach(r => r.disabled = true);

            // Fill basic info
            document.querySelector('input[placeholder="Max 128 karakter"]').value = material.title;
            document.querySelector('input[placeholder="13 karakter"]').value = material.oldMaterialNo;
            document.querySelector('textarea[placeholder*="Max 512 karakter"]').value = material.description;

            // Fill unit dropdown
            const unitSelect = document.querySelector('select option[value="AD"]').parentElement;
            unitSelect.value = material.unit;

            // Fill status dropdown
            const statusSelect = document.querySelector('select option[value="4"]').parentElement;
            statusSelect.value = material.status;

            // Fill manufacturer info
            document.querySelector('input[placeholder="Max 32 karakter"]').value = material.manufacturer;
            document.querySelector('input[placeholder="Max 64 karakter"]').value = material.modelCode;

            // Fill stock parameters
            const stockInputs = document.querySelectorAll('input[type="number"][step="0.001"]');
            if (stockInputs.length >= 6) {
                stockInputs[0].value = material.reorderPoint;
                stockInputs[1].value = material.reorderQty;
                stockInputs[2].value = material.maxStock;
                stockInputs[3].value = material.safetyStock;
                stockInputs[4].value = material.lotSize;
                stockInputs[5].value = material.packageQty;
            }

            // Fill warehouse dropdown
            const warehouseSelect = document.querySelector('select option[value="MAIN"]').parentElement;
            warehouseSelect.value = material.warehouse;

            // Fill material group
            const groupSelect = document.querySelector('select option[value="GEN"]').parentElement;
            groupSelect.value = material.group;

            // Fill account code
            document.querySelector('input[placeholder="8 haneli hesap kodu"]').value = material.accountCode;

            // Fill record info
            const recordInfoDiv = document.querySelector('.card-title-icon + .card-title')?.closest('.card')?.querySelector('.card-body div');
            if (!recordInfoDiv) {
                // Alternative method - find by card title text
                document.querySelectorAll('.card').forEach(card => {
                    const title = card.querySelector('.card-title');
                    if (title && title.textContent.includes('Record Information')) {
                        const infoGrid = card.querySelector('.card-body > div');
                        if (infoGrid) {
                            const spans = infoGrid.querySelectorAll('div > span:last-child');
                            if (spans.length >= 4) {
                                spans[0].textContent = material.createdBy;
                                spans[1].textContent = material.createdDate;
                                spans[2].textContent = material.modifiedBy;
                                spans[3].textContent = material.modifiedDate;
                            }
                        }
                    }
                });
            }
        }
    </script>

    <!-- DEVELOPER DOCUMENTATION PANEL -->
    <div id="devDocsPanel" class="dev-docs-panel">
        <button class="dev-docs-toggle" onclick="toggleDevDocs()">
            üìã Geli≈ütirici Dok√ºmantasyonu
        </button>
        <div class="dev-docs-content" id="devDocsContent">
            <div class="dev-docs-header">
                <h2>üìã 1 MDM - Material Data Maintenance</h2>
                <button class="dev-docs-close" onclick="toggleDevDocs()">‚úï</button>
            </div>
            <div class="dev-docs-body">
                <div class="dev-docs-tabs">
                    <button class="dev-tab active" onclick="showDevTab('dataStructure')">Veri Yapƒ±larƒ±</button>
                    <button class="dev-tab" onclick="showDevTab('formFields')">Form Alanlarƒ±</button>
                    <button class="dev-tab" onclick="showDevTab('businessRules')">ƒ∞≈ü Kurallarƒ±</button>
                    <button class="dev-tab" onclick="showDevTab('validations')">Validasyonlar</button>
                </div>

                <div id="dataStructure" class="dev-tab-content active">
                    <h3>TABLE: Material</h3>
                    <table class="dev-table">
                        <thead>
                            <tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>id</td><td>int</td><td>8</td><td>Primary key</td></tr>
                            <tr><td>Material number</td><td>text</td><td>13</td><td>Format: ##.#####-####</td></tr>
                            <tr><td>Old material number</td><td>text</td><td>13</td><td>Eski sistem numarasƒ±</td></tr>
                            <tr><td>Title</td><td>text</td><td>128</td><td>Malzeme ba≈ülƒ±ƒüƒ± (ZORUNLU)</td></tr>
                            <tr><td>Description</td><td>text</td><td>512</td><td>Detaylƒ± a√ßƒ±klama</td></tr>
                            <tr><td>Unit of measure code</td><td>text</td><td>4</td><td>AD, M, KG, LT...</td></tr>
                            <tr><td>Material Status code</td><td>char</td><td>1</td><td>1-5 arasƒ± deƒüer</td></tr>
                            <tr><td>Blocking Reason</td><td>text</td><td>128</td><td>Status=2 i√ßin ZORUNLU</td></tr>
                            <tr><td>Blocking Reevaluation date</td><td>datetime</td><td>-</td><td>Yeniden deƒü. tarihi</td></tr>
                            <tr><td>Reordering quantity</td><td>float</td><td>15</td><td>Yeniden sipari≈ü miktarƒ±</td></tr>
                            <tr><td>Safety stock quantity</td><td>float</td><td>15</td><td>G√ºvenlik stoƒüu</td></tr>
                            <tr><td>Default Storage</td><td>text</td><td>8</td><td>Varsayƒ±lan depo</td></tr>
                            <tr><td>Default Location</td><td>text</td><td>8</td><td>Varsayƒ±lan lokasyon</td></tr>
                            <tr><td>Default Bin</td><td>text</td><td>8</td><td>Varsayƒ±lan bin</td></tr>
                            <tr><td>Reordering point quantity</td><td>float</td><td>15</td><td>MRP tetikleme seviyesi</td></tr>
                            <tr><td>Notes</td><td>text</td><td>512</td><td>Notlar</td></tr>
                            <tr><td>Created by user info</td><td>int</td><td>8</td><td>Olu≈üturan kullanƒ±cƒ± ID</td></tr>
                            <tr><td>Accounting Number</td><td>int</td><td>8</td><td>SAP muhasebe kodu</td></tr>
                            <tr><td>Purchased Packing Material</td><td>bool</td><td>-</td><td>ƒ∞ade edilebilir ambalaj</td></tr>
                            <tr><td>Alternative material 1</td><td>text</td><td>13</td><td>Alternatif malzeme 1</td></tr>
                            <tr><td>Alternative material 2</td><td>text</td><td>13</td><td>Alternatif malzeme 2</td></tr>
                            <tr><td>Material Group Code</td><td>text</td><td>8</td><td>Malzeme grubu kodu</td></tr>
                            <tr><td>Order batch quantity</td><td>float</td><td>15</td><td>Sipari≈ü parti miktarƒ±</td></tr>
                            <tr><td>Unit quantity in a package</td><td>float</td><td>15</td><td>Paket i√ßi adet</td></tr>
                            <tr><td>Document group Id</td><td>int</td><td>8</td><td>Dok√ºman grubu ref.</td></tr>
                            <tr><td>Accounting actions required</td><td>bool</td><td>-</td><td>Muhasebe onayƒ± gerekli</td></tr>
                            <tr><td>Maximum stock quantity</td><td>float</td><td>15</td><td>MRP max stok</td></tr>
                            <tr><td>Blocked for material request</td><td>bool</td><td>-</td><td>Taleplerde g√∂r√ºnmez</td></tr>
                            <tr><td>Total Stock</td><td>float</td><td>15</td><td>READONLY - Toplam stok</td></tr>
                            <tr><td>Open request quantity</td><td>float</td><td>15</td><td>READONLY - A√ßƒ±k talep</td></tr>
                            <tr><td>Producer name</td><td>text</td><td>32</td><td>√úretici firma adƒ±</td></tr>
                            <tr><td>Producer model name</td><td>text</td><td>64</td><td>Model/part numarasƒ±</td></tr>
                        </tbody>
                    </table>

                    <h3>Material Status Codes</h3>
                    <table class="dev-table">
                        <thead><tr><th>Code</th><th>Status</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Active</td><td>T√ºm i≈ülemler yapƒ±labilir</td></tr>
                            <tr><td>2</td><td>Blocked</td><td>Blocking Reason ZORUNLU</td></tr>
                            <tr><td>3</td><td>Inactive</td><td>Hi√ßbir i≈ülem yapƒ±lamaz</td></tr>
                            <tr><td>4</td><td>Preparing to be used</td><td>SRM/PO/GR OK, MR YAPILAMAZ</td></tr>
                            <tr><td>5</td><td>Preparing to discontinuation</td><td>MR/Issue/Transfer OK, yeni SRM YAPILAMAZ</td></tr>
                        </tbody>
                    </table>
                </div>

                <div id="formFields" class="dev-tab-content">
                    <h3>Temel Bilgiler</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Material number *</td><td>text/readonly</td><td>Malzeme numarasƒ± (##.#####-#### formatƒ±)</td></tr>
                            <tr><td>Old material number</td><td>text</td><td>Eski sistem (Maximo) numarasƒ±</td></tr>
                            <tr><td>Title *</td><td>text</td><td>Malzeme ba≈ülƒ±ƒüƒ± (max 128 karakter)</td></tr>
                            <tr><td>Description</td><td>textarea</td><td>Detaylƒ± a√ßƒ±klama (max 512 karakter)</td></tr>
                            <tr><td>Unit of measure code *</td><td>dropdown</td><td>√ñl√ß√º birimi (AD, M, KG, LT...)</td></tr>
                            <tr><td>Material Status code *</td><td>dropdown</td><td>Malzeme durumu (1-5)</td></tr>
                            <tr><td>Blocking Reason</td><td>text</td><td>Bloklama nedeni (Status=2 i√ßin zorunlu)</td></tr>
                            <tr><td>Blocking Reevaluation date</td><td>datetime</td><td>Yeniden deƒüerlendirme tarihi</td></tr>
                            <tr><td>Material Group Code *</td><td>dropdown</td><td>Malzeme grubu</td></tr>
                        </tbody>
                    </table>
                    <h3>√úretici Bilgileri</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Producer name</td><td>text</td><td>√úretici firma adƒ± (max 32)</td></tr>
                            <tr><td>Producer model name</td><td>text</td><td>√úretici model/part no (max 64)</td></tr>
                        </tbody>
                    </table>
                    <h3>Stok Y√∂netimi (MRP)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Reordering point quantity</td><td>number</td><td>MRP tetikleme seviyesi</td></tr>
                            <tr><td>Reordering quantity</td><td>number</td><td>Yeniden sipari≈ü miktarƒ±</td></tr>
                            <tr><td>Maximum stock quantity</td><td>number</td><td>Maksimum stok miktarƒ±</td></tr>
                            <tr><td>Safety stock quantity</td><td>number</td><td>G√ºvenlik stoƒüu</td></tr>
                            <tr><td>Order batch quantity</td><td>number</td><td>Sipari≈ü parti miktarƒ±</td></tr>
                            <tr><td>Unit quantity in a package</td><td>number</td><td>Paket i√ßi birim adedi</td></tr>
                        </tbody>
                    </table>
                    <h3>Depolama Bilgileri</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Default Storage</td><td>dropdown</td><td>Varsayƒ±lan depo</td></tr>
                            <tr><td>Default Location</td><td>dropdown</td><td>Varsayƒ±lan lokasyon</td></tr>
                            <tr><td>Default Bin</td><td>dropdown</td><td>Varsayƒ±lan bin</td></tr>
                        </tbody>
                    </table>
                    <h3>Ek Bilgiler</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Accounting Number</td><td>text</td><td>SAP muhasebe hesap kodu</td></tr>
                            <tr><td>Alternative material 1</td><td>search</td><td>Alternatif malzeme 1</td></tr>
                            <tr><td>Alternative material 2</td><td>search</td><td>Alternatif malzeme 2</td></tr>
                            <tr><td>Purchased Packing Material</td><td>checkbox</td><td>ƒ∞ade edilebilir ambalaj mƒ±?</td></tr>
                            <tr><td>Accounting actions required</td><td>checkbox</td><td>Muhasebe onayƒ± gerekli mi?</td></tr>
                            <tr><td>Blocked for material request</td><td>checkbox</td><td>Taleplerde g√∂r√ºnmez</td></tr>
                            <tr><td>Notes</td><td>textarea</td><td>Notlar (max 512 karakter)</td></tr>
                        </tbody>
                    </table>
                    <h3>Readonly Alanlar (Hesaplanan)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Total Stock</td><td>Toplam stok miktarƒ±</td></tr>
                            <tr><td>Open request quantity</td><td>A√ßƒ±k talep miktarƒ±</td></tr>
                            <tr><td>Created by user info</td><td>Olu≈üturan kullanƒ±cƒ±</td></tr>
                            <tr><td>Creation date time</td><td>Olu≈üturma tarihi</td></tr>
                            <tr><td>Modified by user info</td><td>G√ºncelleyen kullanƒ±cƒ±</td></tr>
                            <tr><td>Modified date time</td><td>G√ºncelleme tarihi</td></tr>
                        </tbody>
                    </table>
                    <h3>Malzeme G√∂rseli</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Material image</td><td>file upload</td><td>Malzeme ana g√∂rseli (JPG, PNG, GIF)</td></tr>
                        </tbody>
                    </table>
                    <h3>Dok√ºmanlar</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Document group</td><td>file upload</td><td>Ekli dok√ºmanlar (PDF, DOC, XLS)</td></tr>
                        </tbody>
                    </table>
                </div>

                <div id="businessRules" class="dev-tab-content">
                    <h3>ƒ∞≈ü Kurallarƒ± (Ana Veri Bakƒ±mƒ± - Paragraf 251-264)</h3>
                    <ol>
                        <li>Malzeme numarasƒ± se√ßilen seriden prefix + sonraki numara olarak verilebilir veya "##.#####-####" formatƒ±nda 11 haneli malzeme kodu ile manuel olarak girilebilir.</li>
                        <li>"Kullanƒ±ma hazƒ±rlanƒ±yor" durumu satƒ±nalma, mal kabul i≈ülemlerine izin verir ancak malzeme talebine izin vermez.</li>
                        <li>"Kullanƒ±mdan kaldƒ±rƒ±lmaya hazƒ±rlanƒ±yor" durumu malzeme talebi, √ßƒ±kƒ±≈ü ve transfere izin verir ancak yeni SRM talebine izin vermez.</li>
                        <li>Yeni malzeme olu≈üturulduƒüunda varsayƒ±lan olarak "Kullanƒ±ma hazƒ±rlanƒ±yor" durumu se√ßilir.</li>
                        <li>Malzeme grubu malzemeleri √ße≈üitli ama√ßlarla gruplamak i√ßin kullanƒ±lacaktƒ±r.</li>
                        <li>ƒ∞naktif depo, lokasyon ve bin'lerden malzeme √ßƒ±kƒ±≈üƒ± yapƒ±labilir ancak giri≈ü yapƒ±lamaz.</li>
                        <li>ƒ∞lk lokasyon ilgili depo i√ßin varsayƒ±lan lokasyon olarak otomatik atanƒ±r. Daha sonra endirek malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan deƒüi≈ütirilebilir.</li>
                        <li>ƒ∞lk bin ilgili lokasyon i√ßin varsayƒ±lan bin olarak otomatik atanƒ±r. Daha sonra endirek malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan deƒüi≈ütirilebilir.</li>
                        <li>Bin kodu d√ºzeni 3 farklƒ± girdiden olu≈üur. "-" ayƒ±rƒ±cƒ±dƒ±r, "#" 0'dan ba≈ülayƒ±p artacak sayƒ± alanƒ±nƒ± belirler, Sayƒ±lar sayƒ±mƒ±n bu numaradan ba≈ülayacaƒüƒ±nƒ± g√∂sterir.</li>
                        <li>"Ana g√∂rsel" etiketi ile malzemeye eklenen g√∂rseller malzeme g√∂r√ºnt√ºleme ekranƒ±nda sayfa y√ºklendiƒüinde g√∂r√ºlebilecektir. Her malzeme i√ßin bu etikete sahip sadece bir g√∂rsel olacaktƒ±r.</li>
                    </ol>
                </div>

                <div id="validations" class="dev-tab-content">
                    <h3>Zorunlu Alanlar</h3>
                    <ul>
                        <li><strong>Title:</strong> maxlength=128, ZORUNLU</li>
                        <li><strong>Blocking Reason:</strong> Status=2 ise ZORUNLU</li>
                    </ul>

                    <h3>Maxlength Kurallarƒ±</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Maxlength</th></tr></thead>
                        <tbody>
                            <tr><td>Title</td><td>128</td></tr>
                            <tr><td>Description</td><td>512</td></tr>
                            <tr><td>Old material number</td><td>13</td></tr>
                            <tr><td>Producer name</td><td>32</td></tr>
                            <tr><td>Producer model name</td><td>64</td></tr>
                            <tr><td>Blocking Reason</td><td>128</td></tr>
                            <tr><td>Notes</td><td>512</td></tr>
                            <tr><td>Accounting Number</td><td>8</td></tr>
                            <tr><td>Material Group Code</td><td>8</td></tr>
                            <tr><td>Alternative material 1-2</td><td>13</td></tr>
                            <tr><td>Default Storage/Location/Bin</td><td>8</td></tr>
                        </tbody>
                    </table>

                    <h3>Format Validasyonlarƒ±</h3>
                    <ul>
                        <li><strong>Material number:</strong> ##.#####-#### regex pattern</li>
                        <li><strong>Alternative material:</strong> ##.#####-#### formatƒ±</li>
                        <li><strong>Accounting Number:</strong> Sadece rakam</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <style>
        .dev-docs-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 9999;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .dev-docs-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }
        .dev-docs-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }
        .dev-docs-content {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60vh;
            background: #1a1a2e;
            color: #e0e0e0;
            box-shadow: 0 -5px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .dev-docs-content.active {
            display: flex;
            flex-direction: column;
        }
        .dev-docs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .dev-docs-header h2 {
            margin: 0;
            font-size: 18px;
        }
        .dev-docs-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
        }
        .dev-docs-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px 25px;
        }
        .dev-docs-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
        }
        .dev-tab {
            background: #2a2a4a;
            border: none;
            color: #aaa;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        .dev-tab:hover {
            background: #3a3a5a;
            color: #fff;
        }
        .dev-tab.active {
            background: #667eea;
            color: white;
        }
        .dev-tab-content {
            display: none;
        }
        .dev-tab-content.active {
            display: block;
        }
        .dev-tab-content h3 {
            color: #667eea;
            margin: 20px 0 10px 0;
            font-size: 16px;
            border-bottom: 1px solid #333;
            padding-bottom: 5px;
        }
        .dev-tab-content h3:first-child {
            margin-top: 0;
        }
        .dev-tab-content ul {
            margin: 0;
            padding-left: 20px;
        }
        .dev-tab-content li {
            margin: 8px 0;
            line-height: 1.5;
        }
        .dev-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 13px;
        }
        .dev-table th {
            background: #2a2a4a;
            color: #667eea;
            text-align: left;
            padding: 10px;
            border: 1px solid #333;
        }
        .dev-table td {
            padding: 8px 10px;
            border: 1px solid #333;
        }
        .dev-table tr:hover {
            background: #2a2a4a;
        }
    </style>

    <script>
        function toggleDevDocs() {
            const content = document.getElementById('devDocsContent');
            const toggle = document.querySelector('.dev-docs-toggle');
            content.classList.toggle('active');
            toggle.style.display = content.classList.contains('active') ? 'none' : 'block';
        }

        function showDevTab(tabId) {
            document.querySelectorAll('.dev-tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.dev-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
