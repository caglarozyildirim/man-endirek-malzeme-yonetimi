<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hurda Belgesi Detay - IMMA</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<!--
================================================================================
IMMA DEVELOPER DOCUMENTATION
================================================================================

SCREEN: 24 IC-SO - Scrapping or Other (Detail)
FILE: scrapping-detail.html
LAST UPDATED: 2025-12-18

--------------------------------------------------------------------------------
RELATED DATABASE TABLES
--------------------------------------------------------------------------------

TABLE: Stock Correction Header (Data Structure IMMA.xlsx)
| Field Name                         | Type     | Length | Description                  |
|------------------------------------|----------|--------|------------------------------|
| Stock Correction document Id       | int      | 8      | Primary key                  |
| Stock Correction document title    | text     | 64     | Belge ba≈ülƒ±ƒüƒ±                |
| Stock Correction document Description| text   | 64     | Belge a√ßƒ±klamasƒ±             |
| Correction type                    | char     | 1      | H/D/Q/E/O (Hurda/Hasar/vb)   |
| Creation date time                 | datetime | -      | Olu≈üturma tarihi             |
| Created by user info               | int      | 8      | Olu≈üturan kullanƒ±cƒ±          |
| Created for user info              | int      | 8      | Atanan kullanƒ±cƒ±             |
| Approver 1 user id                 | int      | 8      | 1. seviye onaylayƒ±cƒ±         |
| Approver 2 user id                 | int      | 8      | 2. seviye onaylayƒ±cƒ±         |
| Approver 3 user id                 | int      | 8      | 3. seviye onaylayƒ±cƒ±         |
| Approved by user id                | int      | 8      | Onaylayan kullanƒ±cƒ±          |
| Approved datetime                  | datetime | -      | Onay tarihi                  |
| Approval                           | bool     | -      | Onay durumu                  |
| Euro Total Value                   | float    | 14     | Toplam Euro deƒüer            |
| TRY Total Value                    | float    | 14     | Toplam TRY deƒüer             |
| Comment Group Id                   | int      | 8      | Yorumlar grubu               |
| Document Group Id                  | int      | 8      | Ek dok√ºmanlar grubu          |

TABLE: Stock Correction Item (Data Structure IMMA.xlsx)
| Field Name                         | Type  | Length | Description                  |
|------------------------------------|-------|--------|------------------------------|
| Stock Correction document Id       | int   | 8      | Header referansƒ±             |
| Stock Correction document item number| int | 4      | Satƒ±r numarasƒ±               |
| Stock record Id                    | int   | 8      | Stok kaydƒ± referansƒ±         |
| Selected quantity                  | float | 15     | Se√ßilen miktar               |

--------------------------------------------------------------------------------
CORRECTION TYPES
--------------------------------------------------------------------------------

| Code | Type             | Description                    |
|------|------------------|--------------------------------|
| H    | Hurda            | Hurda i≈ülemi                   |
| D    | Hasar (Damage)   | Hasarlƒ± malzeme                |
| Q    | Kalite (Quality) | Kalite hatasƒ±                  |
| E    | Expiry           | Son kullanma tarihi ge√ßmi≈ü     |
| O    | Other            | Diƒüer nedenler                 |

--------------------------------------------------------------------------------
3-LEVEL APPROVAL SYSTEM
--------------------------------------------------------------------------------

Onay seviyeleri deƒüer bazlƒ±:
- 0 - 5.000 TRY: Sadece Seviye 1 onayƒ±
- 5.000 - 25.000 TRY: Seviye 1 + Seviye 2 onayƒ±
- 25.000+ TRY: Seviye 1 + Seviye 2 + Seviye 3 onayƒ±

--------------------------------------------------------------------------------
MOVEMENT TYPE FOR SCRAPPING
--------------------------------------------------------------------------------

| Code | Type                    | Description                    |
|------|-------------------------|--------------------------------|
| 12   | Scrapping               | Hurda i≈ülemi                   |
| 13   | Scrapping Rollback      | Hurda iptali                   |
| 14   | Other material issue    | Diƒüer √ßƒ±kƒ±≈ü                    |
| 15   | Other material issue rollback | Diƒüer √ßƒ±kƒ±≈ü iptali       |

--------------------------------------------------------------------------------
SCREEN FIELDS (UI Elements) - Screen Designs: 24 IC-SO Detail
--------------------------------------------------------------------------------

DOCUMENT HEADER SECTION:
- Correction document Id (text, readonly) - SC-YYYY-XXXXXX format
- Creation date time (datetime) - Olu≈üturma tarihi
- Status (text, readonly) - Taslak/Onay Bekliyor/Onaylandƒ±/Reddedildi/Tamamlandƒ±
- Correction document title (text, 64, zorunlu) - Belge ba≈ülƒ±ƒüƒ±
- Correction document description (textarea, 64, zorunlu) - Detaylƒ± a√ßƒ±klama
- Correction type (select, zorunlu) - H/D/Q/E/O se√ßenekleri
- Created for user info (select) - Sorumlu kullanƒ±cƒ±
- Created by user info (text, readonly) - Olu≈üturan kullanƒ±cƒ±
- Cost Center (select) - COST-001/002/003/004
- EUR Toplam Deger (text, readonly) - Hesaplanan
- TRY Toplam Deger (text, readonly) - Hesaplanan
- Comment Group ID (text, readonly) - Otomatik
- Document Group ID (text, readonly) - Otomatik

APPROVAL TABLE COLUMNS:
- Seviye (text) - Onay 1/2/3
- Onaylayƒ±cƒ± ID (text) - approver_X_user_id
- Approved by user info (text) - X_approved_by_user_id
- Approval date time (datetime) - X_approved_datetime
- Status (badge) - X_approval
- Gerekli mi? (badge) - X_requirement_check

ITEMS TABLE COLUMNS:
- # No (int) - Satƒ±r numarasƒ±
- Stock Kayƒ±t ID (text) - Stock record referansƒ±
- Material number (text) - Malzeme numarasƒ±
- Material title (text) - Malzeme a√ßƒ±klamasƒ±
- Material Group Code (badge)
- Cost Id (text)
- Storage/Location/Bin (text)
- Stock Mik. (float) - Stok miktarƒ±
- Se√ßilen Mik. (float, bold) - Selected quantity
- Unit of measure/PB (text)
- Unit value (currency)
- Stock Degeri/Euro value/TRY Deger (currency)
- MR/SRM/PO (badge) - A√ßƒ±k i≈ülem sayƒ±larƒ±

--------------------------------------------------------------------------------
ƒ∞≈û KURALLARI
--------------------------------------------------------------------------------

ENVANTER D√úZELTMELERƒ∞ ƒ∞≈û KURALLARI:
Kural 1: A√ßƒ±k sayƒ±m belgesi varsa etkilenen malzemeler i√ßin yeni malzeme talebi engellenecektir ancak onay s√ºreci devam edebilmelidir.
Kural 2: Sayƒ±m belgesi mevcut stok miktarlarƒ±nƒ± i√ßermemelidir.
Kural 3: Tekli malzeme envanter d√ºzeltmesi i√ßin onay s√ºreci olmayacaktƒ±r.
Kural 4: Sayƒ±m raf bazƒ±nda yapƒ±lƒ±r, bu nedenle sayƒ±m belgesi kapsamƒ± se√ßim listesi raf numaralarƒ±na g√∂re ayrƒ±lmƒ±≈ü bilgileri i√ßerecektir.
Kural 5: Diƒüer ve hurda envanter d√ºzeltmesi i√ßin onaylayƒ±cƒ± y√∂netici malzeme grubuna ili≈ükin kayda g√∂re se√ßilecektir. S√ºre√ß endirek ve GPS malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan ba≈ülatƒ±lacak ve muhasebe ile ilgiliyse muhasebe endirek ve GPS sorumlu kullanƒ±cƒ±sƒ± tarafƒ±ndan sonlandƒ±rƒ±lacaktƒ±r.
Kural 6: Ek belge gereklidir.
Kural 7: Yorum gereklidir.
Kural 8: Onay sƒ±rasƒ± malzeme grubuna ili≈ükin kayƒ±tta olduƒüu gibi takip edilecektir (onay sƒ±rasƒ±, departman kodu, malzeme grubu).
Kural 9: Stok transferleri ile d√ºzeltmeler yalnƒ±zca malzemenin t√ºm stoƒüu aynƒ± sayƒ±m belgesi i√ßinde sayƒ±m i√ßin se√ßildiƒüinde hesaplanƒ±r. Bir raftaki eksik miktarƒ± ba≈üka bir raftaki fazla miktardan kar≈üƒ±lamak i√ßin √∂neriler olu≈üturulacaktƒ±r.
Kural 10: T√ºm geri almalar yanlƒ±≈ülƒ±kla yapƒ±lan bir i≈ülemin d√ºzeltilmesidir. Y√∂netici kullanƒ±cƒ± tarafƒ±ndan yapƒ±labilir.
Kural 11: Hurda ve diƒüer d√ºzeltmeler i√ßin en az bir y√∂netici onaylayƒ±cƒ± olarak eklenmelidir. Bu belge endirek malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan olu≈üturulabilir ve onaylayƒ±cƒ± eklenebilir.

--------------------------------------------------------------------------------
FORM MODES
--------------------------------------------------------------------------------

- view: Sadece g√∂r√ºnt√ºleme, onay kartlarƒ± ve itemler g√∂r√ºn√ºr
- edit: D√ºzenleme modu
- create: Yeni belge olu≈üturma, itemler gizli

================================================================================
-->
<body>
    <nav class="modern-navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">
                <div class="navbar-logo">M</div>
                <div class="brand-text">
                    <span class="brand-name">IMMA</span>
                    <span class="brand-subtitle">Endirek Malzeme Yonetimi</span>
                </div>
            </a>
            <ul class="navbar-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="material-list.html" class="nav-link">
                        <span class="nav-icon">üì¶</span>
                        Ana Veriler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-list.html" class="dropdown-item">Malzeme Listesi</a>
                        <a href="supplier-list.html" class="dropdown-item">Tedarik√ßi Listesi</a>
                        <a href="storage-type-list.html" class="dropdown-item">Depo Tipi Listesi</a>
                        <a href="number-series.html" class="dropdown-item">Numara Serileri</a>
                        <a href="material-group.html" class="dropdown-item">Malzeme Gruplari</a>
                        <a href="unit-of-measure-list.html" class="dropdown-item">Olcu Birimleri</a>
                        <a href="department-cost-center-list.html" class="dropdown-item">Dept-Masraf Merkezi</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="mrp.html" class="nav-link">
                        <span class="nav-icon">üìà</span>
                        MRP
                    </a>
                </li>
                <li class="nav-item">
                    <a href="srm-list.html" class="nav-link">
                        <span class="nav-icon">üõí</span>
                        Satinalma
                    </a>
                    <div class="dropdown-menu">
                        <a href="srm-list.html" class="dropdown-item">Talep Listesi</a>
                        <a href="goods-receipt.html" class="dropdown-item">Mal Kabul</a>
                        <a href="po-list.html" class="dropdown-item">Satinalma Siparisleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="budget-management.html" class="nav-link">
                        <span class="nav-icon">üí∞</span>
                        Budget
                    </a>
                    <div class="dropdown-menu">
                        <a href="budget-management.html" class="dropdown-item">Budget Yonetimi</a>
                        <a href="budget-preference.html" class="dropdown-item">B√ºt√ße Tercihleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="material-request-list.html" class="nav-link">
                        <span class="nav-icon">üìã</span>
                        Talepler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-request-list.html" class="dropdown-item">Talep Listesi</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="transfer-list.html" class="nav-link active">
                        <span class="nav-icon">üè≠</span>
                        Stock
                    </a>
                    <div class="dropdown-menu">
                        <a href="direct-issue.html" class="dropdown-item">Doƒürudan √áƒ±kƒ±≈ü</a>
                        <a href="warehouse-transfer.html" class="dropdown-item">Depo Transferi</a>
                        <a href="transfer-list.html" class="dropdown-item">Transfer Listesi</a>
                        <a href="inventory-counting.html" class="dropdown-item">Sayƒ±m ƒ∞≈ülemleri</a>
                        <a href="single-material-counting.html" class="dropdown-item">Tekli Malzeme Sayƒ±mƒ±</a>
                        <a href="scrapping.html" class="dropdown-item active">Hurda ƒ∞≈ülemleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="user-material-limit-list.html" class="nav-link">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        Ayarlar
                    </a>
                    <div class="dropdown-menu">
                        <a href="user-material-limit-list.html" class="dropdown-item">Kullanƒ±cƒ± Malzeme Limitleri</a>
                        <a href="accounting-confirmation.html" class="dropdown-item">Muhasebe Onaylarƒ±</a>
                    </div>
                </li>
            </ul>
            <div class="navbar-user">
                <span class="user-name">Ahmet Yilmaz</span>
                <div class="user-avatar">AY</div>
            </div>
        </div>
    </nav>

    <main class="modern-container">
        <div class="page-header">
            <div>
                <h1 class="page-title" id="pageTitle">Hurda Belgesi Detay</h1>
                <p class="page-subtitle">Stock > Hurda ƒ∞≈ülemleri > <span id="breadcrumbAction">G√∂r√ºnt√ºle</span></p>
            </div>
            <div class="page-actions">
                <a href="scrapping.html" class="btn btn-outline">‚Üê Listeye Don</a>
                <button class="btn btn-primary" id="editModeBtn" style="display: none;">D√ºzenle</button>
            </div>
        </div>

        <!-- Belge Bilgileri Card -->
        <div class="card">
            <div class="card-header">
                <h3 id="formTitle">Document Information (Stock Correction Header)</h3>
            </div>
            <div class="card-body">
                <form id="scrappingForm">
                    <div class="form-row">
                        <div class="form-group col-4">
                            <label>Correction document Id (stock_correction_document_id)</label>
                            <input type="text" id="documentId" class="form-control" readonly>
                        </div>
                        <div class="form-group col-4">
                            <label>Creation date time (creation_datetime)</label>
                            <input type="datetime-local" id="creationDateTime" class="form-control">
                        </div>
                        <div class="form-group col-4">
                            <label>Status</label>
                            <input type="text" id="status" class="form-control" readonly>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-12">
                            <label>Correction document title (document_title) <span class="required">*</span></label>
                            <input type="text" id="documentTitle" class="form-control" placeholder="Orn: Hasarli Malzemeler - Hat 1" required maxlength="64">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-12">
                            <label>Correction document description (document_description) <span class="required">*</span></label>
                            <textarea id="documentDescription" class="form-control" rows="3" placeholder="Stock duzeltmesinin nedenini detayli aciklayin..." maxlength="64"></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-6">
                            <label>Correction type (correction_type) <span class="required">*</span></label>
                            <select id="correctionType" class="form-control" required>
                                <option value="">Se√ßiniz...</option>
                                <option value="H">Hurda</option>
                                <option value="D">Hasar (Damage)</option>
                                <option value="Q">Kalite Hatasi (Quality)</option>
                                <option value="E">Son Kullanma (Expiry)</option>
                                <option value="O">Diger (Other)</option>
                            </select>
                        </div>
                        <div class="form-group col-6">
                            <label>Created for user info (created_for_user_info)</label>
                            <select id="createdFor" class="form-control">
                                <option value="">Se√ßiniz...</option>
                                <option value="101">USR-101 - Mehmet Demir</option>
                                <option value="102">USR-102 - Ayse Kara</option>
                                <option value="103">USR-103 - Fatma Yildiz</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-6">
                            <label>Created by user info (created_by_user_info)</label>
                            <input type="text" id="createdBy" class="form-control" readonly value="USR-100 - Ahmet Yilmaz">
                        </div>
                        <div class="form-group col-6">
                            <label>Cost Center (cost_id)</label>
                            <select id="costId" class="form-control">
                                <option value="">Se√ßiniz...</option>
                                <option value="cost1">COST-001 - Uretim</option>
                                <option value="cost2">COST-002 - Bakim</option>
                                <option value="cost3">COST-003 - Kalite</option>
                                <option value="cost4">COST-004 - Storage</option>
                            </select>
                        </div>
                    </div>

                    <!-- Deger Alanlari -->
                    <div class="form-row" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <div class="form-group col-6">
                            <label>EUR Toplam Deger (euro_total_value)</label>
                            <input type="text" id="euroTotalValue" class="form-control" readonly placeholder="0,00 ‚Ç¨">
                        </div>
                        <div class="form-group col-6">
                            <label>TRY Toplam Deger (try_total_value)</label>
                            <input type="text" id="tryTotalValue" class="form-control" readonly placeholder="0,00 ‚Ç∫">
                        </div>
                    </div>

                    <!-- Material Group Id'leri -->
                    <div class="form-row">
                        <div class="form-group col-6">
                            <label>Comment Group ID (comment_group_id)</label>
                            <input type="text" id="commentGroupId" class="form-control" readonly placeholder="Otomatik olusturulur">
                        </div>
                        <div class="form-group col-6">
                            <label>Document Group ID (document_group_id)</label>
                            <input type="text" id="documentGroupId" class="form-control" readonly placeholder="Otomatik olusturulur">
                        </div>
                    </div>

                    <div class="form-actions" style="margin-top: 30px;" id="formActions">
                        <a href="scrapping.html" class="btn btn-outline">Iptal</a>
                        <button type="submit" class="btn btn-primary">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Onay Mekanizmasi Card -->
        <div class="card" id="approvalCard" style="margin-top: 20px; display: none;">
            <div class="card-header">
                <h3>Onay Sureci (Data Structure: Approver 1/2/3)</h3>
            </div>
            <div class="card-body" style="overflow-x: auto;">
                <table class="table table-sm" style="min-width: 900px; white-space: nowrap;">
                    <thead>
                        <tr>
                            <th style="min-width: 80px;">Seviye</th>
                            <th style="min-width: 180px;">Onaylayici ID (approver_X_user_id)</th>
                            <th style="min-width: 180px;">Approved by user info (X_approved_by_user_id)</th>
                            <th style="min-width: 160px;">Approval date time (X_approved_datetime)</th>
                            <th style="min-width: 120px;">Status (X_approval)</th>
                            <th style="min-width: 150px;">Gerekli mi? (X_requirement_check)</th>
                        </tr>
                    </thead>
                    <tbody id="approvalTableBody">
                        <tr>
                            <td><strong>Onay 1</strong></td>
                            <td id="approver1Id">-</td>
                            <td id="approved1By">-</td>
                            <td id="approved1DateTime">-</td>
                            <td id="approval1Status"><span class="badge badge-secondary">-</span></td>
                            <td><span class="badge badge-info">Her zaman gerekli</span></td>
                        </tr>
                        <tr>
                            <td><strong>Onay 2</strong></td>
                            <td id="approver2Id">-</td>
                            <td id="approved2By">-</td>
                            <td id="approved2DateTime">-</td>
                            <td id="approval2Status"><span class="badge badge-secondary">-</span></td>
                            <td id="approval2Required"><span class="badge badge-secondary">5000-25000‚Ç∫ arasi</span></td>
                        </tr>
                        <tr>
                            <td><strong>Onay 3</strong></td>
                            <td id="approver3Id">-</td>
                            <td id="approved3By">-</td>
                            <td id="approved3DateTime">-</td>
                            <td id="approval3Status"><span class="badge badge-secondary">-</span></td>
                            <td id="approval3Required"><span class="badge badge-secondary">25000‚Ç∫ uzeri</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Belge Item numberleri Card -->
        <div class="card" id="itemsCard" style="margin-top: 20px; display: none;">
            <div class="card-header">
                <h3>Document Items (Stock Correction Item)</h3>
            </div>
            <div class="card-body" style="overflow-x: auto;">
                <table class="table table-sm" style="min-width: 2200px; white-space: nowrap;">
                    <thead>
                        <tr>
                            <th style="min-width: 60px;"># No</th>
                            <th style="min-width: 120px;">Stock Kayit ID</th>
                            <th style="min-width: 120px;">Material number</th>
                            <th style="min-width: 180px;">Material title</th>
                            <th style="min-width: 100px;">Material Group Code</th>
                            <th style="min-width: 80px;">Cost Id</th>
                            <th style="min-width: 80px;">Storage</th>
                            <th style="min-width: 80px;">Location</th>
                            <th style="min-width: 60px;">Bin</th>
                            <th style="min-width: 80px;">Stock Mik.</th>
                            <th style="min-width: 80px;">Se√ßilen Mik.</th>
                            <th style="min-width: 60px;">Unit of measure</th>
                            <th style="min-width: 60px;">PB</th>
                            <th style="min-width: 90px;">Unit value</th>
                            <th style="min-width: 100px;">Stock Degeri</th>
                            <th style="min-width: 90px;">Euro value</th>
                            <th style="min-width: 90px;">TRY Deger</th>
                            <th style="min-width: 50px;">Material Request</th>
                            <th style="min-width: 50px;">SRM</th>
                            <th style="min-width: 50px;">PO</th>
                        </tr>
                    </thead>
                    <tbody id="itemsTableBody">
                    </tbody>
                    <tfoot>
                        <tr style="font-weight: bold; background: #f8f9fa;">
                            <td colspan="15" style="text-align: right;">Toplam:</td>
                            <td id="totalEur">0,00 ‚Ç¨</td>
                            <td id="totalTry">0,00 ‚Ç∫</td>
                            <td colspan="3"></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <!-- Ek Dosyalar Card -->
        <div class="card" id="attachmentsCard" style="margin-top: 20px; display: none;">
            <div class="card-header">
                <h3>Ek Dosyalar (Document Group)</h3>
            </div>
            <div class="card-body">
                <div id="attachmentsList">
                    <p class="text-muted">Henuz ek dosya yok.</p>
                </div>
            </div>
        </div>

        <!-- Yorumlar Card -->
        <div class="card" id="commentsCard" style="margin-top: 20px; display: none;">
            <div class="card-header">
                <h3>Yorumlar (Comment Group)</h3>
            </div>
            <div class="card-body">
                <div id="commentsList">
                    <p class="text-muted">Henuz yorum yok.</p>
                </div>
            </div>
        </div>
    </main>

    <style>
        .required { color: #dc3545; font-weight: bold; }
        .form-control[readonly] { background-color: #f5f5f5; }
        .form-control:disabled { background-color: #f5f5f5; cursor: not-allowed; }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 11px; }
        .badge-success { background: #28a745; color: white; }
        .badge-warning { background: #ffc107; color: #333; }
        .badge-danger { background: #dc3545; color: white; }
        .badge-info { background: #17a2b8; color: white; }
        .badge-secondary { background: #6c757d; color: white; }
    </style>

    <script>
        const documents = {
            'SC-2025-000089': {
                id: 'SC-2025-000089',
                title: 'Hasarli Malzemeler - Hat 1',
                description: 'Hat 1 uretim hattinda hasar goren malzemelerin stoktan dusurulmesi',
                correctionType: 'D',
                creationDateTime: '2025-12-15T14:30',
                createdBy: 'USR-100 - Ahmet Yilmaz',
                createdFor: '101',
                costId: 'cost2',
                status: 'Onay Bekliyor',
                euroTotalValue: '75,00 ‚Ç¨',
                tryTotalValue: '2.725,00 ‚Ç∫',
                commentGroupId: 'CMG-089',
                documentGroupId: 'DOC-089',
                approvals: {
                    approver1Id: 'USR-101',
                    approved1By: '-',
                    approved1DateTime: '-',
                    approval1: null,
                    approver2Required: false,
                    approver3Required: false
                },
                items: [
                    { no: 1, stockRecordId: 'STK-2025-8901', materialNo: '02.00001-0001', materialDesc: 'Konveyor Kayisi 500mm', materialGroup: 'Mekanik', costId: 'COST-156', storage: 'Material RequestK-01', location: 'A-12', bin: 'R05', stockQty: 50, selectedQty: 15, unit: 'MT', currency: 'TRY', unitValue: 125.00, stockValue: 6250.00, eurValue: 51.65, tryValue: 1875.00, mr: 1, srm: 0, po: 0 },
                    { no: 2, stockRecordId: 'STK-2025-8902', materialNo: '02.00005-0001', materialDesc: 'Baret (Sari)', materialGroup: 'ISG', costId: 'COST-157', storage: 'Material RequestK-01', location: 'A-12', bin: 'R06', stockQty: 25, selectedQty: 10, unit: 'AD', currency: 'TRY', unitValue: 85.00, stockValue: 2125.00, eurValue: 23.41, tryValue: 850.00, mr: 0, srm: 0, po: 0 }
                ],
                attachments: [
                    { name: 'hasar_foto_1.jpg', size: '254 KB', date: '15.12.2025 14:35' }
                ],
                comments: [
                    { user: 'Ahmet Yilmaz', date: '15.12.2025 14:32', text: 'Uretim muduru ile gorusuldu, malzeme tamir edilemez durumda.' },
                    { user: 'Mehmet Demir', date: '15.12.2025 15:10', text: 'Onaya sunulmasi uygundur.' }
                ]
            },
            'SC-2025-000088': {
                id: 'SC-2025-000088',
                title: 'Kalite Kontrolu Red - Boya Defekti',
                description: 'Kalite kontrolunden gecemeyen boyali metal paneller',
                correctionType: 'Q',
                creationDateTime: '2025-12-14T10:15',
                createdBy: 'USR-102 - Mehmet Demir',
                createdFor: '103',
                costId: 'cost3',
                status: 'Onaylandi',
                euroTotalValue: '232,88 ‚Ç¨',
                tryTotalValue: '8.450,00 ‚Ç∫',
                commentGroupId: 'CMG-088',
                documentGroupId: 'DOC-088',
                approvals: {
                    approver1Id: 'USR-101',
                    approved1By: 'USR-101 (Storage Sorumlusu)',
                    approved1DateTime: '14.12.2025 11:00',
                    approval1: true,
                    approver2Required: true,
                    approver2Id: 'USR-102',
                    approved2By: 'USR-102 (Storage Muduru)',
                    approved2DateTime: '14.12.2025 11:45',
                    approval2: true,
                    approver3Required: false
                },
                items: [
                    { no: 1, stockRecordId: 'STK-2025-7756', materialNo: '03.00123-0002', materialDesc: 'Metal Panel - Boyali (Mavi)', materialGroup: 'Yapisal', costId: 'COST-089', storage: 'Material RequestK-02', location: 'B-05', bin: 'R12', stockQty: 100, selectedQty: 50, unit: 'AD', currency: 'TRY', unitValue: 169.00, stockValue: 16900.00, eurValue: 232.88, tryValue: 8450.00, mr: 0, srm: 1, po: 0 }
                ],
                attachments: [
                    { name: 'kalite_raporu.pdf', size: '1.2 MB', date: '14.12.2025 10:20' },
                    { name: 'boya_defekt_1.jpg', size: '380 KB', date: '14.12.2025 10:22' },
                    { name: 'boya_defekt_2.jpg', size: '425 KB', date: '14.12.2025 10:22' }
                ],
                comments: [
                    { user: 'Mehmet Demir', date: '14.12.2025 10:18', text: 'Kalite kontrol tarafƒ±ndan reddedilen parti. Tedarik√ßi ile g√∂r√º≈ü√ºlecek.' }
                ]
            },
            'SC-2025-000087': {
                id: 'SC-2025-000087',
                title: 'Son Kullanma Datei Gecmis - Kimyasallar',
                description: 'Bin omru dolmus kimyasal malzemelerin stoktan dusurulmesi',
                correctionType: 'E',
                creationDateTime: '2025-12-13T16:45',
                createdBy: 'USR-103 - Ayse Kara',
                createdFor: '102',
                costId: 'cost4',
                status: 'Tamamlandi',
                euroTotalValue: '437,53 ‚Ç¨',
                tryTotalValue: '15.890,00 ‚Ç∫',
                commentGroupId: 'CMG-087',
                documentGroupId: 'DOC-087',
                approvals: {
                    approver1Id: 'USR-103',
                    approved1By: 'USR-103 (Storage Sorumlusu)',
                    approved1DateTime: '13.12.2025 17:00',
                    approval1: true,
                    approver2Required: true,
                    approver2Id: 'USR-104',
                    approved2By: 'USR-104 (Storage Muduru)',
                    approved2DateTime: '13.12.2025 17:30',
                    approval2: true,
                    approver3Required: false
                },
                items: [
                    { no: 1, stockRecordId: 'STK-2025-6543', materialNo: '05.00234-0001', materialDesc: 'Temizlik Kimyasali - Yuzey Temizleyici', materialGroup: 'Kimyasal', costId: 'COST-234', storage: 'KIM-01', location: 'C-03', bin: 'R01', stockQty: 200, selectedQty: 120, unit: 'LT', currency: 'TRY', unitValue: 45.50, stockValue: 9100.00, eurValue: 150.41, tryValue: 5460.00, mr: 0, srm: 0, po: 0 },
                    { no: 2, stockRecordId: 'STK-2025-6544', materialNo: '05.00567-0003', materialDesc: 'Boya - Koruyucu Kaplama', materialGroup: 'Kimyasal', costId: 'COST-235', storage: 'KIM-01', location: 'C-03', bin: 'R02', stockQty: 150, selectedQty: 85, unit: 'LT', currency: 'TRY', unitValue: 122.70, stockValue: 18405.00, eurValue: 287.12, tryValue: 10430.00, mr: 0, srm: 0, po: 1 }
                ],
                attachments: [
                    { name: 'skt_kontrol_raporu.pdf', size: '890 KB', date: '13.12.2025 16:50' },
                    { name: 'imha_formu.pdf', size: '156 KB', date: '13.12.2025 18:10' }
                ],
                comments: [
                    { user: 'Ayse Kara', date: '13.12.2025 16:48', text: 'Periyodik kontrol sirasinda tespit edildi. Guvenli imha gerekli.' },
                    { user: 'Ali Veli', date: '13.12.2025 17:15', text: 'Cevre biriminden onay alindi.' }
                ]
            },
            'SC-2025-000086': {
                id: 'SC-2025-000086',
                title: 'Obsolete Yedek Parcalar - Model Degisikligi',
                description: 'Uretimden kalkan model parcalarinin stoktan dusurulmesi',
                correctionType: 'O',
                creationDateTime: '2025-12-12T09:00',
                createdBy: 'USR-104 - Fatma Yildiz',
                createdFor: '101',
                costId: 'cost2',
                status: 'Tamamlandi',
                euroTotalValue: '895,33 ‚Ç¨',
                tryTotalValue: '32.500,00 ‚Ç∫',
                commentGroupId: 'CMG-086',
                documentGroupId: 'DOC-086',
                approvals: {
                    approver1Id: 'USR-105',
                    approved1By: 'USR-105 (Storage Sorumlusu)',
                    approved1DateTime: '12.12.2025 10:00',
                    approval1: true,
                    approver2Required: true,
                    approver2Id: 'USR-106',
                    approved2By: 'USR-106 (Storage Muduru)',
                    approved2DateTime: '12.12.2025 11:30',
                    approval2: true,
                    approver3Required: true,
                    approver3Id: 'USR-107',
                    approved3By: 'USR-107 (Finans Direktoru)',
                    approved3DateTime: '12.12.2025 14:15',
                    approval3: true
                },
                items: [
                    { no: 1, stockRecordId: 'STK-2025-5678', materialNo: '02.00891-0002', materialDesc: 'Motor Kontrol Unitesi - Model X200', materialGroup: 'Elektrik', costId: 'COST-456', storage: 'YDP-01', location: 'D-08', bin: 'R15', stockQty: 20, selectedQty: 15, unit: 'AD', currency: 'TRY', unitValue: 1450.00, stockValue: 29000.00, eurValue: 599.17, tryValue: 21750.00, mr: 0, srm: 0, po: 0 },
                    { no: 2, stockRecordId: 'STK-2025-5679', materialNo: '02.00892-0001', materialDesc: 'Sensor Modulu - Tip A-45', materialGroup: 'Elektronik', costId: 'COST-457', storage: 'YDP-01', location: 'D-08', bin: 'R16', stockQty: 30, selectedQty: 25, unit: 'AD', currency: 'TRY', unitValue: 430.00, stockValue: 12900.00, eurValue: 296.16, tryValue: 10750.00, mr: 0, srm: 0, po: 0 }
                ],
                attachments: [
                    { name: 'model_degisikligi_bildirimi.pdf', size: '1.5 MB', date: '12.12.2025 09:10' },
                    { name: 'teknik_analiz_raporu.pdf', size: '2.3 MB', date: '12.12.2025 09:15' },
                    { name: 'muhasebe_onay.pdf', size: '450 KB', date: '12.12.2025 14:20' },
                    { name: 'yonetim_onayi.pdf', size: '320 KB', date: '12.12.2025 14:30' }
                ],
                comments: [
                    { user: 'Fatma Yildiz', date: '12.12.2025 09:05', text: 'Muhendislik departmanindan gelen model degisikligi bildirimi dogrultusunda.' },
                    { user: 'Hasan Ozturk', date: '12.12.2025 10:30', text: 'Yuksek deger nedeniyle 3 seviyeli onay sureci baslatildi.' }
                ]
            },
            'SC-2025-000085': {
                id: 'SC-2025-000085',
                title: 'Hurda - Asinmis Kayislar',
                description: 'Asindigi dusunulen kayislarin stoktan dusurulmesi talebi',
                correctionType: 'H',
                creationDateTime: '2025-12-11T13:20',
                createdBy: 'USR-102 - Mehmet Demir',
                createdFor: '103',
                costId: 'cost1',
                status: 'Reddedildi',
                euroTotalValue: '88,15 ‚Ç¨',
                tryTotalValue: '3.200,00 ‚Ç∫',
                commentGroupId: 'CMG-085',
                documentGroupId: '',
                approvals: {
                    approver1Id: 'USR-101',
                    approved1By: 'USR-101 (Storage Sorumlusu)',
                    approved1DateTime: '11.12.2025 14:00',
                    approval1: false,
                    approver2Required: false,
                    approver3Required: false
                },
                items: [
                    { no: 1, stockRecordId: 'STK-2025-4321', materialNo: '02.00045-0003', materialDesc: 'V Kayis A-45', materialGroup: 'Mekanik', costId: 'COST-321', storage: 'Material RequestK-01', location: 'A-05', bin: 'R03', stockQty: 80, selectedQty: 40, unit: 'AD', currency: 'TRY', unitValue: 80.00, stockValue: 6400.00, eurValue: 88.15, tryValue: 3200.00, mr: 2, srm: 0, po: 0 }
                ],
                attachments: [],
                comments: [
                    { user: 'Mehmet Demir', date: '11.12.2025 13:25', text: 'Gorsel inceleme sonucu asindigi degerlendirildi.' }
                ]
            },
            'SC-2025-000084': {
                id: 'SC-2025-000084',
                title: 'Taslak Belge - Devam Ediyor',
                description: 'Uretim hattinda tespit edilen hasarli malzemeler icin taslak belge',
                correctionType: 'D',
                creationDateTime: '2025-12-10T15:00',
                createdBy: 'USR-100 - Ahmet Yilmaz',
                createdFor: '101',
                costId: 'cost2',
                status: 'Taslak',
                euroTotalValue: '0,00 ‚Ç¨',
                tryTotalValue: '0,00 ‚Ç∫',
                commentGroupId: '',
                documentGroupId: '',
                approvals: {
                    approver1Id: '',
                    approved1By: '-',
                    approved1DateTime: '-',
                    approval1: null,
                    approver2Required: false,
                    approver3Required: false
                },
                items: [],
                attachments: [],
                comments: []
            }
        };

        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return { mode: params.get('mode') || 'view', id: params.get('id') || null };
        }

        function initializePage() {
            const { mode, id } = getUrlParams();
            const formElements = document.querySelectorAll('#scrappingForm select, #scrappingForm input:not([readonly]), #scrappingForm textarea');

            switch(mode) {
                case 'view':
                    document.getElementById('pageTitle').textContent = 'Hurda Belgesi G√∂r√ºnt√ºle';
                    document.getElementById('breadcrumbAction').textContent = 'G√∂r√ºnt√ºle';
                    document.getElementById('editModeBtn').style.display = 'inline-block';
                    document.getElementById('formActions').style.display = 'none';
                    document.getElementById('itemsCard').style.display = 'block';
                    document.getElementById('approvalCard').style.display = 'block';
                    document.getElementById('attachmentsCard').style.display = 'block';
                    document.getElementById('commentsCard').style.display = 'block';
                    formElements.forEach(el => el.disabled = true);
                    document.getElementById('editModeBtn').addEventListener('click', function() {
                        window.location.href = `scrapping-detail.html?mode=edit&id=${id}`;
                    });
                    if (id && documents[id]) loadData(documents[id]);
                    break;
                case 'edit':
                    document.getElementById('pageTitle').textContent = 'Hurda Belgesi D√ºzenle';
                    document.getElementById('breadcrumbAction').textContent = 'D√ºzenle';
                    document.getElementById('editModeBtn').style.display = 'none';
                    document.getElementById('formActions').style.display = 'flex';
                    document.getElementById('itemsCard').style.display = 'block';
                    document.getElementById('approvalCard').style.display = 'block';
                    document.getElementById('attachmentsCard').style.display = 'block';
                    document.getElementById('commentsCard').style.display = 'block';
                    formElements.forEach(el => el.disabled = false);
                    if (id && documents[id]) loadData(documents[id]);
                    break;
                case 'create':
                    document.getElementById('pageTitle').textContent = 'Yeni Hurda Belgesi';
                    document.getElementById('breadcrumbAction').textContent = 'Yeni';
                    document.getElementById('editModeBtn').style.display = 'none';
                    document.getElementById('formActions').style.display = 'flex';
                    document.getElementById('itemsCard').style.display = 'none';
                    document.getElementById('approvalCard').style.display = 'none';
                    document.getElementById('attachmentsCard').style.display = 'none';
                    document.getElementById('commentsCard').style.display = 'none';
                    document.getElementById('documentId').value = 'SC-2025-' + String(Math.floor(Math.random() * 900000) + 100000);
                    document.getElementById('creationDateTime').value = new Date().toISOString().slice(0, 16);
                    document.getElementById('status').value = 'Taslak';
                    formElements.forEach(el => el.disabled = false);
                    break;
            }
        }

        function loadData(doc) {
            // Header fields
            document.getElementById('documentId').value = doc.id;
            document.getElementById('documentTitle').value = doc.title;
            document.getElementById('documentDescription').value = doc.description;
            document.getElementById('correctionType').value = doc.correctionType;
            document.getElementById('creationDateTime').value = doc.creationDateTime;
            document.getElementById('createdBy').value = doc.createdBy;
            document.getElementById('createdFor').value = doc.createdFor;
            document.getElementById('costId').value = doc.costId;
            document.getElementById('status').value = doc.status;
            document.getElementById('euroTotalValue').value = doc.euroTotalValue;
            document.getElementById('tryTotalValue').value = doc.tryTotalValue;
            document.getElementById('commentGroupId').value = doc.commentGroupId;
            document.getElementById('documentGroupId').value = doc.documentGroupId;

            // Approvals
            if (doc.approvals) {
                const a = doc.approvals;
                document.getElementById('approver1Id').textContent = a.approver1Id || '-';
                document.getElementById('approved1By').textContent = a.approved1By || '-';
                document.getElementById('approved1DateTime').textContent = a.approved1DateTime || '-';
                document.getElementById('approval1Status').innerHTML = a.approval1 === true ? '<span class="badge badge-success">Onaylandi</span>' :
                    (a.approval1 === false ? '<span class="badge badge-danger">Reddedildi</span>' : '<span class="badge badge-warning">Bekliyor</span>');

                if (a.approver2Required) {
                    document.getElementById('approver2Id').textContent = a.approver2Id || '-';
                    document.getElementById('approved2By').textContent = a.approved2By || '-';
                    document.getElementById('approved2DateTime').textContent = a.approved2DateTime || '-';
                    document.getElementById('approval2Status').innerHTML = a.approval2 === true ? '<span class="badge badge-success">Onaylandi</span>' :
                        (a.approval2 === false ? '<span class="badge badge-danger">Reddedildi</span>' : '<span class="badge badge-warning">Bekliyor</span>');
                    document.getElementById('approval2Required').innerHTML = '<span class="badge badge-info">Evet</span>';
                }

                if (a.approver3Required) {
                    document.getElementById('approver3Id').textContent = a.approver3Id || '-';
                    document.getElementById('approved3By').textContent = a.approved3By || '-';
                    document.getElementById('approved3DateTime').textContent = a.approved3DateTime || '-';
                    document.getElementById('approval3Status').innerHTML = a.approval3 === true ? '<span class="badge badge-success">Onaylandi</span>' :
                        (a.approval3 === false ? '<span class="badge badge-danger">Reddedildi</span>' : '<span class="badge badge-warning">Bekliyor</span>');
                    document.getElementById('approval3Required').innerHTML = '<span class="badge badge-info">Evet</span>';
                }
            }

            // Load items
            const tbody = document.getElementById('itemsTableBody');
            tbody.innerHTML = '';
            let totalEur = 0, totalTry = 0;
            doc.items.forEach(item => {
                totalEur += item.eurValue;
                totalTry += item.tryValue;
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.no}</td>
                    <td><span class="text-muted">${item.stockRecordId}</span></td>
                    <td>${item.materialNo}</td>
                    <td>${item.materialDesc}</td>
                    <td><span class="badge badge-secondary">${item.materialGroup}</span></td>
                    <td><span class="text-muted">${item.costId || '-'}</span></td>
                    <td>${item.storage || '-'}</td>
                    <td>${item.location || '-'}</td>
                    <td>${item.bin || '-'}</td>
                    <td>${item.stockQty}</td>
                    <td><strong>${item.selectedQty}</strong></td>
                    <td>${item.unit}</td>
                    <td>${item.currency || 'TRY'}</td>
                    <td>${item.unitValue.toFixed(2)} ‚Ç∫</td>
                    <td>${item.stockValue ? item.stockValue.toFixed(2) + ' ‚Ç∫' : '-'}</td>
                    <td>${item.eurValue.toFixed(2)} ‚Ç¨</td>
                    <td>${item.tryValue.toFixed(2)} ‚Ç∫</td>
                    <td>${item.mr > 0 ? '<span class="badge badge-warning">' + item.mr + '</span>' : '-'}</td>
                    <td>${item.srm > 0 ? '<span class="badge badge-info">' + item.srm + '</span>' : '-'}</td>
                    <td>${item.po > 0 ? '<span class="badge badge-success">' + item.po + '</span>' : '-'}</td>
                `;
                tbody.appendChild(row);
            });
            document.getElementById('totalEur').textContent = totalEur.toFixed(2) + ' ‚Ç¨';
            document.getElementById('totalTry').textContent = totalTry.toFixed(2) + ' ‚Ç∫';

            // Load attachments
            const attachmentsList = document.getElementById('attachmentsList');
            if (doc.attachments && doc.attachments.length > 0) {
                attachmentsList.innerHTML = '<ul style="padding-left: 20px;">' +
                    doc.attachments.map(att => `<li><a href="#" class="text-primary">${att.name}</a> (${att.size}) - ${att.date}</li>`).join('') +
                    '</ul>';
            }

            // Load comments
            const commentsList = document.getElementById('commentsList');
            if (doc.comments && doc.comments.length > 0) {
                commentsList.innerHTML = doc.comments.map(c => `
                    <div style="padding: 8px; background: #f1f3f5; border-radius: 4px; margin-bottom: 8px;">
                        <small class="text-muted">${c.user} - ${c.date}</small><br>
                        ${c.text}
                    </div>
                `).join('');
            }
        }

        document.getElementById('scrappingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const { mode } = getUrlParams();
            const action = mode === 'create' ? 'olusturuldu' : 'guncellendi';
            alert(`Hurda belgesi ${action}!\n\n(Backend entegrasyonu ile calisacak)`);
            window.location.href = 'scrapping.html';
        });

        document.addEventListener('DOMContentLoaded', initializePage);
    </script>

    <!-- DEVELOPER DOCUMENTATION PANEL -->
    <div id="devDocsPanel" class="dev-docs-panel">
        <button class="dev-docs-toggle" onclick="toggleDevDocs()">üìã Geli≈ütirici Dok√ºmantasyonu</button>
        <div class="dev-docs-content" id="devDocsContent">
            <div class="dev-docs-header">
                <h2>üìã 24 IC-SO - Scrapping or Other (Detail)</h2>
                <button class="dev-docs-close" onclick="toggleDevDocs()">‚úï</button>
            </div>
            <div class="dev-docs-body">
                <div class="dev-docs-tabs">
                    <button class="dev-tab active" onclick="showDevTab('dataStructure')">Veri Yapƒ±larƒ±</button>
                    <button class="dev-tab" onclick="showDevTab('formFields')">Form Alanlarƒ±</button>
                    <button class="dev-tab" onclick="showDevTab('businessRules')">ƒ∞≈ü Kurallarƒ±</button>
                    <button class="dev-tab" onclick="showDevTab('approvalFlow')">Onay Akƒ±≈üƒ±</button>
                </div>
                <div id="dataStructure" class="dev-tab-content active">
                    <h3>Stock Correction Header Tablosu</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>Uzunluk</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Stock Correction document Id</td><td>int</td><td>8</td><td>Primary key</td></tr>
                            <tr><td>Stock Correction document title</td><td>text</td><td>64</td><td>Belge ba≈ülƒ±ƒüƒ±</td></tr>
                            <tr><td>Stock Correction document Description</td><td>text</td><td>64</td><td>Belge a√ßƒ±klamasƒ±</td></tr>
                            <tr><td>Correction type</td><td>char</td><td>1</td><td>D:Hasar, Q:Kalite, E:SKT, O:Diƒüer</td></tr>
                            <tr><td>Creation date time</td><td>datetime</td><td>-</td><td>Olu≈üturma tarihi</td></tr>
                            <tr><td>Created by user info</td><td>int</td><td>8</td><td>Olu≈üturan kullanƒ±cƒ±</td></tr>
                            <tr><td>Created for user info</td><td>int</td><td>8</td><td>Sorumlu kullanƒ±cƒ±</td></tr>
                            <tr><td>Approver 1/2/3 user id</td><td>int</td><td>8</td><td>Onaylayƒ±cƒ± kullanƒ±cƒ±lar</td></tr>
                            <tr><td>Approved by user id</td><td>int</td><td>8</td><td>Onaylayan kullanƒ±cƒ±</td></tr>
                            <tr><td>Approved datetime</td><td>datetime</td><td>-</td><td>Onay tarihi</td></tr>
                            <tr><td>Approval</td><td>bool</td><td>-</td><td>Onay durumu</td></tr>
                            <tr><td>Euro Total Value</td><td>float</td><td>14</td><td>Toplam Euro deƒüer</td></tr>
                            <tr><td>TRY Total Value</td><td>float</td><td>14</td><td>Toplam TRY deƒüer</td></tr>
                            <tr><td>Comment Group Id</td><td>int</td><td>8</td><td>Yorum grubu referansƒ±</td></tr>
                            <tr><td>Document Group Id</td><td>int</td><td>8</td><td>Dok√ºman grubu referansƒ±</td></tr>
                        </tbody>
                    </table>
                    <h3>Stock Correction Item Tablosu</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>Uzunluk</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Stock Correction document Id</td><td>int</td><td>8</td><td>Header FK</td></tr>
                            <tr><td>Stock Correction document item number</td><td>int</td><td>4</td><td>Kalem numarasƒ±</td></tr>
                            <tr><td>Stock record Id</td><td>int</td><td>8</td><td>Stok kaydƒ± referansƒ±</td></tr>
                            <tr><td>Selected quantity</td><td>float</td><td>15</td><td>Se√ßilen miktar</td></tr>
                        </tbody>
                    </table>
                </div>
                <div id="formFields" class="dev-tab-content">
                    <h3>Correction Document Header</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Stock Correction document Id</td><td>readonly</td><td>Belge numarasƒ± (otomatik)</td></tr>
                            <tr><td>Stock Correction document title</td><td>readonly</td><td>Belge ba≈ülƒ±ƒüƒ±</td></tr>
                            <tr><td>Stock Correction document Description</td><td>readonly</td><td>Belge a√ßƒ±klamasƒ±</td></tr>
                            <tr><td>Correction type</td><td>readonly</td><td>D:Hasar, Q:Kalite, E:SKT, O:Diƒüer</td></tr>
                            <tr><td>Status</td><td>badge</td><td>Beklemede/Onaylandƒ±/Reddedildi</td></tr>
                        </tbody>
                    </table>
                    <h3>Creation Information (Readonly)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Creation date time</td><td>Olu≈üturma tarihi</td></tr>
                            <tr><td>Created by user info</td><td>Olu≈üturan kullanƒ±cƒ±</td></tr>
                            <tr><td>Created for user info</td><td>Sorumlu kullanƒ±cƒ±</td></tr>
                        </tbody>
                    </table>
                    <h3>Approval Section (3 Seviyeli)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Approver 1 user</td><td>1. Seviye onaylayƒ±cƒ±</td></tr>
                            <tr><td>Approver 2 user</td><td>2. Seviye onaylayƒ±cƒ±</td></tr>
                            <tr><td>Approver 3 user</td><td>3. Seviye onaylayƒ±cƒ±</td></tr>
                            <tr><td>Approved by user</td><td>Onaylayan kullanƒ±cƒ±</td></tr>
                            <tr><td>Approved datetime</td><td>Onay tarihi</td></tr>
                            <tr><td>Approval status</td><td>Onay durumu</td></tr>
                        </tbody>
                    </table>
                    <h3>Value Summary (Readonly)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Euro Total Value</td><td>Toplam Euro deƒüer</td></tr>
                            <tr><td>TRY Total Value</td><td>Toplam TRY deƒüer</td></tr>
                        </tbody>
                    </table>
                    <h3>Scrapping Items Table (Readonly)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Kolon</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Item No</td><td>Kalem numarasƒ±</td></tr>
                            <tr><td>Material Number</td><td>Malzeme numarasƒ±</td></tr>
                            <tr><td>Material Title</td><td>Malzeme ba≈ülƒ±ƒüƒ±</td></tr>
                            <tr><td>Stock Record Id</td><td>Stok kaydƒ± referansƒ±</td></tr>
                            <tr><td>Storage/Location/Bin</td><td>Lokasyon bilgileri</td></tr>
                            <tr><td>Selected quantity</td><td>Se√ßilen miktar</td></tr>
                            <tr><td>Unit</td><td>√ñl√ß√º birimi</td></tr>
                            <tr><td>Unit Value</td><td>Birim deƒüer</td></tr>
                            <tr><td>Total Value</td><td>Toplam deƒüer</td></tr>
                        </tbody>
                    </table>
                </div>
                <div id="businessRules" class="dev-tab-content">
                    <div class="rules-section">
                        <h4>Envanter D√ºzeltmeleri ƒ∞≈ü Kurallarƒ±</h4>
                        <ul>
                            <li><strong>Kural 1:</strong> A√ßƒ±k sayƒ±m belgesi varsa etkilenen malzemeler i√ßin yeni malzeme talebi engellenir ancak onay s√ºreci devam edebilmelidir</li>
                            <li><strong>Kural 2:</strong> Sayƒ±m belgesi mevcut stok miktarlarƒ±nƒ± i√ßermemelidir</li>
                            <li><strong>Kural 3:</strong> Tekli malzeme envanter d√ºzeltmesi i√ßin onay s√ºreci olmayacaktƒ±r</li>
                            <li><strong>Kural 4:</strong> Sayƒ±m bin bazƒ±nda yapƒ±ldƒ±ƒüƒ±ndan sayƒ±m belgesi kapsamƒ± i√ßin se√ßim listesi bin numaralarƒ±na g√∂re ayrƒ±lmƒ±≈ü bilgi i√ßerecektir</li>
                            <li><strong>Kural 5:</strong> Diƒüer ve hurda envanter d√ºzeltmeleri i√ßin onaylayan y√∂netici malzeme grubuna baƒülƒ± kayƒ±ttan se√ßilecektir. S√ºre√ß endirek ve GPS malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan ba≈ülatƒ±lacak ve muhasebe ile ilgiliyse muhasebe endirek ve GPS sorumlu kullanƒ±cƒ±sƒ± tarafƒ±ndan tamamlanacaktƒ±r.</li>
                            <li><strong>Kural 6:</strong> Ek belge zorunludur</li>
                            <li><strong>Kural 7:</strong> A√ßƒ±klama zorunludur</li>
                            <li><strong>Kural 8:</strong> Onay sƒ±rasƒ± malzeme grubuna baƒülƒ± kayƒ±ttaki gibi takip edilecektir (onay sƒ±rasƒ±, departman kodu, malzeme grubu)</li>
                            <li><strong>Kural 9:</strong> Stok transferleri ile d√ºzeltmeler yalnƒ±zca malzemenin t√ºm stoƒüu aynƒ± sayƒ±m belgesi i√ßinde sayƒ±ma se√ßildiƒüinde hesaplanƒ±r. Bir bin'deki eksik miktarƒ± ba≈üka bir bin'deki fazla miktardan kar≈üƒ±lamak i√ßin √∂neriler olu≈üturulacaktƒ±r.</li>
                            <li><strong>Kural 10:</strong> T√ºm geri almalar yanlƒ±≈ülƒ±kla yapƒ±lan bir i≈ülemin d√ºzeltilmesidir. Admin kullanƒ±cƒ± tarafƒ±ndan yapƒ±labilir</li>
                            <li><strong>Kural 11:</strong> Hurda ve diƒüer d√ºzeltmeler i√ßin en az bir y√∂netici onaylayƒ±cƒ± olarak eklenmelidir. Bu belge endirek malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan olu≈üturulabilir ve onaylayƒ±cƒ± eklenebilir.</li>
                        </ul>
                    </div>
                </div>
                <div id="approvalFlow" class="dev-tab-content">
                    <div class="rules-section">
                        <h4>3 Seviyeli Onay Akƒ±≈üƒ±</h4>
                        <ul>
                            <li><strong>Seviye 1:</strong> Depo Sorumlusu - D√º≈ü√ºk deƒüerli hurdalar</li>
                            <li><strong>Seviye 2:</strong> Depo M√ºd√ºr√º - Orta deƒüerli hurdalar</li>
                            <li><strong>Seviye 3:</strong> Finans/Genel M√ºd√ºr - Y√ºksek deƒüerli hurdalar</li>
                        </ul>
                    </div>
                    <div class="rules-section">
                        <h4>Hareket Tipleri</h4>
                        <table class="dev-table">
                            <thead><tr><th>Kod</th><th>Tip</th></tr></thead>
                            <tbody>
                                <tr><td>12</td><td>Scrapping</td></tr>
                                <tr><td>13</td><td>Scrapping Rollback</td></tr>
                                <tr><td>14</td><td>Other material issue</td></tr>
                                <tr><td>15</td><td>Other material issue rollback</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>.dev-docs-panel{position:fixed;bottom:0;left:0;right:0;z-index:9999;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.dev-docs-toggle{width:100%;padding:12px 20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;cursor:pointer;font-size:14px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:8px}.dev-docs-toggle:hover{background:linear-gradient(135deg,#5a6fd6 0%,#6a4190 100%)}.dev-docs-content{display:none;background:#1a1a2e;color:#eee;max-height:70vh;overflow-y:auto}.dev-docs-content.active{display:block}.dev-docs-header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:#16213e;border-bottom:2px solid #667eea}.dev-docs-header h2{margin:0;font-size:16px;color:#fff}.dev-docs-close{background:#e74c3c;color:#fff;border:none;width:30px;height:30px;border-radius:50%;cursor:pointer;font-size:16px}.dev-docs-body{padding:20px}.dev-docs-tabs{display:flex;gap:10px;margin-bottom:20px;border-bottom:2px solid #333;padding-bottom:10px}.dev-tab{padding:8px 16px;background:#2d2d44;color:#aaa;border:none;border-radius:6px 6px 0 0;cursor:pointer;font-size:13px}.dev-tab.active,.dev-tab:hover{background:#667eea;color:#fff}.dev-tab-content{display:none}.dev-tab-content.active{display:block}.dev-table{width:100%;border-collapse:collapse;margin:15px 0;font-size:13px}.dev-table th,.dev-table td{padding:10px;text-align:left;border:1px solid #333}.dev-table th{background:#2d2d44;color:#667eea;font-weight:600}.dev-table tr:nth-child(even){background:#1f1f35}.rules-section{margin-bottom:20px}.rules-section h4{color:#667eea;margin-bottom:10px;font-size:14px}.rules-section ul{margin:0;padding-left:20px}.rules-section li{margin-bottom:6px;line-height:1.5;font-size:13px}</style>
    <script>function toggleDevDocs(){document.getElementById('devDocsContent').classList.toggle('active')}function showDevTab(tabId){document.querySelectorAll('.dev-tab-content').forEach(c=>c.classList.remove('active'));document.querySelectorAll('.dev-tab').forEach(t=>t.classList.remove('active'));document.getElementById(tabId).classList.add('active');event.target.classList.add('active')}</script>
</body>
</html>
