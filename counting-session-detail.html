<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counting Detay - IMMA</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<!--
================================================================================
IMMA DEVELOPER DOCUMENTATION
================================================================================

SCREEN: 22 IC-C - Inventory Counting (Session Detail)
FILE: counting-session-detail.html
LAST UPDATED: 2025-12-18

--------------------------------------------------------------------------------
RELATED DATABASE TABLES
--------------------------------------------------------------------------------

TABLE: Inventory Counting Header
| Field Name                    | Type     | Length | Description                  |
|-------------------------------|----------|--------|------------------------------|
| Inventory Counting Header Id  | int      | 8      | Primary key                  |
| Correction type               | char     | 1      | D√ºzeltme tipi                |
| Creation date time            | datetime | -      | Olu≈üturma tarihi             |
| Created by user info          | int      | 8      | Olu≈üturan kullanƒ±cƒ±          |
| Created for user info         | int      | 8      | Sayƒ±mƒ± yapacak kullanƒ±cƒ±     |
| Counted by user info          | int      | 8      | Sayan kullanƒ±cƒ±              |
| Entered by user info          | int      | 8      | Veri giri≈ü kullanƒ±cƒ±sƒ±       |
| Document group Id             | int      | 8      | Ek dok√ºmanlar grubu          |
| Correction finalized check    | bool     | -      | D√ºzeltme tamamlandƒ± mƒ±       |

TABLE: Inventory Counting Item
| Field Name                    | Type     | Length | Description                  |
|-------------------------------|----------|--------|------------------------------|
| Inventory Counting item id    | int      | 8      | Primary key                  |
| Inventory Counting item number| int      | 4      | Satƒ±r numarasƒ±               |
| Material number               | text     | 13     | Malzeme numarasƒ±             |
| Stock record Id               | int      | 8      | Stok kaydƒ± referansƒ±         |
| Stock quantity                | float    | 15     | Sistem stok miktarƒ±          |
| Counting result quantity      | float    | 15     | Sayƒ±m sonucu miktarƒ±         |

--------------------------------------------------------------------------------
BUSINESS RULES
--------------------------------------------------------------------------------

1. Sayƒ±m oturumu bir depo/lokasyon i√ßin olu≈üturulur
2. Created for user info sayƒ±mƒ± yapacak depo personelini belirtir
3. Counted by user info fiili sayƒ±mƒ± yapan ki≈üidir
4. Entered by user info veriyi sisteme giren ki≈üidir (farklƒ± olabilir)
5. Differences by quantity = Counting result quantity - Stock quantity
6. Pozitif fark: Fazla malzeme (ye≈üil)
7. Negatif fark: Eksik malzeme (kƒ±rmƒ±zƒ±)
8. Sƒ±fƒ±r fark: E≈üle≈üme (gri)

--------------------------------------------------------------------------------
MOVEMENT TYPES FOR INVENTORY
--------------------------------------------------------------------------------

| Code | Type                    | Description                    |
|------|-------------------------|--------------------------------|
| 8    | Inventory positive record| Sayƒ±m fazlasƒ± (stok artƒ±≈üƒ±)   |
| 9    | Inventory negative record| Sayƒ±m eksiƒüi (stok azalmasƒ±)  |

--------------------------------------------------------------------------------
DISPLAYED INFORMATION
--------------------------------------------------------------------------------

Session Header:
- Counting document Id
- Counting Type (Yƒ±llƒ±k/D√∂nemsel)
- Storage
- Status
- Creation date time
- Created by user info
- Counted by user info
- Total Items

Item Table Columns:
- Item (satƒ±r no)
- Material number
- Material title
- Storage / Location / Bin
- System Quantity
- Counting result Quantity
- Differences by quantity
- Unit value
- Differences by quantity Value

Summary Stats:
- Total Items
- Counted Items
- Items with Difference
- Total Difference Value

================================================================================
-->
<body>
    <!-- NAVBAR -->
    <nav class="modern-navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">
                <div class="navbar-logo">M</div>
                <div class="brand-text">
                    <span class="brand-name">IMMA</span>
                    <span class="brand-subtitle">Endirek Malzeme Y√∂netimi</span>
                </div>
            </a>
            <ul class="navbar-menu">
                <li class="nav-item"><a href="index.html" class="nav-link"><span class="nav-icon">üìä</span>Dashboard</a></li>
                <li class="nav-item"><a href="material-list.html" class="nav-link"><span class="nav-icon">üì¶</span>Ana Veriler</a></li>
                <li class="nav-item"><a href="mrp.html" class="nav-link"><span class="nav-icon">üìà</span>MRP</a></li>
                <li class="nav-item"><a href="srm-list.html" class="nav-link"><span class="nav-icon">üõí</span>Satƒ±nalma</a></li>
                <li class="nav-item"><a href="budget-management.html" class="nav-link"><span class="nav-icon">üí∞</span>Budget</a></li>
                <li class="nav-item"><a href="material-request-list.html" class="nav-link"><span class="nav-icon">üìã</span>Talepler</a></li>
                <li class="nav-item">
                    <a href="transfer-list.html" class="nav-link active"><span class="nav-icon">üè≠</span>Stock</a>
                    <div class="dropdown-menu">
                        <a href="direct-issue.html" class="dropdown-item">Doƒürudan √áƒ±kƒ±≈ü</a>
                        <a href="warehouse-transfer.html" class="dropdown-item">Depo Transferi</a>
                        <a href="transfer-list.html" class="dropdown-item">Transfer Listesi</a>
                        <a href="inventory-counting.html" class="dropdown-item active">Sayƒ±m ƒ∞≈ülemleri</a>
                        <a href="single-material-counting.html" class="dropdown-item">Tekli Malzeme Sayƒ±mƒ±</a>
                        <a href="scrapping.html" class="dropdown-item">Hurda ƒ∞≈ülemleri</a>
                    </div>
                </li>
            </ul>
            <div class="navbar-user">
                <span class="user-name">Ahmet Yƒ±lmaz</span>
                <div class="user-avatar">AY</div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="modern-container">
        <div class="page-header">
            <div>
                <h1 class="page-title">Counting Detaylarƒ±</h1>
                <p class="page-subtitle">Stock > Sayƒ±m ƒ∞≈ülemleri > <span id="sessionId">-</span></p>
            </div>
            <div class="page-actions">
                <a href="inventory-counting.html" class="btn btn-outline">‚Üê Geri D√∂n</a>
            </div>
        </div>

        <!-- Session Header Info -->
        <div class="card">
            <div class="card-header">
                <h3>Counting Session Information</h3>
            </div>
            <div class="card-body">
                <div class="detail-header">
                    <div class="detail-row">
                        <div class="detail-col">
                            <label>Counting document Id</label>
                            <div id="detailId" class="detail-value">-</div>
                        </div>
                        <div class="detail-col">
                            <label>Counting Type</label>
                            <div id="detailType" class="detail-value">-</div>
                        </div>
                        <div class="detail-col">
                            <label>Storage</label>
                            <div id="detailStorage" class="detail-value">-</div>
                        </div>
                        <div class="detail-col">
                            <label>Status</label>
                            <div id="detailStatus" class="detail-value">-</div>
                        </div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-col">
                            <label>Creation date time</label>
                            <div id="detailCreationDate" class="detail-value">-</div>
                        </div>
                        <div class="detail-col">
                            <label>Created by user info</label>
                            <div id="detailCreatedBy" class="detail-value">-</div>
                        </div>
                        <div class="detail-col">
                            <label>Counted by user info</label>
                            <div id="detailCreatedFor" class="detail-value">-</div>
                        </div>
                        <div class="detail-col">
                            <label>Total Items</label>
                            <div id="detailTotalItems" class="detail-value">-</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detail Items Table -->
        <div class="card">
            <div class="card-header">
                <h3>Counting Items</h3>
            </div>
            <div class="card-body">
                <div class="table-container" style="max-height: 500px;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Material number</th>
                                <th>Material title</th>
                                <th>Storage</th>
                                <th>Location</th>
                                <th>Bin</th>
                                <th>System Quantity</th>
                                <th>Counting result Quantity</th>
                                <th>Differences by quantity</th>
                                <th>Unit value</th>
                                <th>Differences by quantity Value</th>
                            </tr>
                        </thead>
                        <tbody id="detailItemsTable">
                            <tr>
                                <td>1</td>
                                <td><strong>MAT-ELC-0234</strong></td>
                                <td>Motor Rulman SKF 6205</td>
                                <td>Merkez Storage</td>
                                <td>A</td>
                                <td>A-01</td>
                                <td>45 PC</td>
                                <td><strong>43 PC</strong></td>
                                <td class="difference-negative">-2</td>
                                <td>125.50 TRY</td>
                                <td class="difference-negative">-251.00 TRY</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><strong>MAT-MEC-0891</strong></td>
                                <td>V Kayƒ±≈ü A-45</td>
                                <td>Merkez Storage</td>
                                <td>A</td>
                                <td>A-01</td>
                                <td>120 PC</td>
                                <td><strong>125 PC</strong></td>
                                <td class="difference-positive">+5</td>
                                <td>85.00 TRY</td>
                                <td class="difference-positive">+425.00 TRY</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><strong>MAT-HYD-0456</strong></td>
                                <td>Hidrolik Yaƒü ISO VG 46</td>
                                <td>Merkez Storage</td>
                                <td>A</td>
                                <td>A-02</td>
                                <td>200 L</td>
                                <td><strong>200 L</strong></td>
                                <td class="difference-zero">0</td>
                                <td>45.75 TRY</td>
                                <td class="difference-zero">0.00 TRY</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Summary -->
        <div class="card">
            <div class="card-header">
                <h3>√ñzet</h3>
            </div>
            <div class="card-body">
                <div class="summary-stats">
                    <div class="stat-item">
                        <label>Total Items</label>
                        <div class="stat-value" id="totalItems">247</div>
                    </div>
                    <div class="stat-item">
                        <label>Counting result Quantity</label>
                        <div class="stat-value" style="color: #28a745;" id="countedItems">247</div>
                    </div>
                    <div class="stat-item">
                        <label>Differences</label>
                        <div class="stat-value" style="color: #ffc107;" id="differenceItems">18</div>
                    </div>
                    <div class="stat-item">
                        <label>Toplam Differences by quantity Deƒüeri</label>
                        <div class="stat-value" style="color: #dc3545;" id="totalDifference">3,247.50 TRY</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <style>
        .detail-header {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .detail-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        .detail-col label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: block;
            margin-bottom: 5px;
        }
        .detail-value {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }
        .table-container {
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 8px;
        }
        .table-container table {
            margin-bottom: 0;
        }
        .table-container thead {
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
        }
        .difference-positive { color: #28a745; font-weight: 700; }
        .difference-negative { color: #dc3545; font-weight: 700; }
        .difference-zero { color: #6c757d; font-weight: 600; }
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 8px;
        }
        .stat-item { text-align: center; }
        .stat-item label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: block;
            margin-bottom: 8px;
        }
        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #2c3e50;
        }
    </style>

    <script>
        // Sample session data
        const sessions = {
            'IC-HDR-2025-0012': {
                id: 'IC-HDR-2025-0012',
                type: 'Yƒ±llƒ±k',
                storage: 'Merkez Storage',
                status: 'Tamamlandƒ±',
                statusClass: 'status-active',
                creationDate: '2025-12-14',
                createdBy: 'Ahmet Yƒ±lmaz',
                createdFor: 'Mehmet Kaya',
                totalItems: 247,
                countedItems: 247,
                differenceItems: 18,
                totalDifference: '3,247.50 TRY'
            },
            'IC-HDR-2025-0011': {
                id: 'IC-HDR-2025-0011',
                type: 'D√∂nemsel',
                storage: 'Hat 1 Deposu',
                status: 'Tamamlandƒ±',
                statusClass: 'status-active',
                creationDate: '2025-12-10',
                createdBy: 'Ahmet Yƒ±lmaz',
                createdFor: 'Ali Veli',
                totalItems: 89,
                countedItems: 89,
                differenceItems: 5,
                totalDifference: '1,125.00 TRY'
            },
            'IC-HDR-2025-0010': {
                id: 'IC-HDR-2025-0010',
                type: 'D√∂nemsel',
                storage: 'Konsinye Storage',
                status: 'Tamamlandƒ±',
                statusClass: 'status-active',
                creationDate: '2025-12-05',
                createdBy: 'Ahmet Yƒ±lmaz',
                createdFor: 'Fatma ≈ûen',
                totalItems: 156,
                countedItems: 156,
                differenceItems: 12,
                totalDifference: '2,890.00 TRY'
            },
            'IC-HDR-2025-0009': {
                id: 'IC-HDR-2025-0009',
                type: 'Yƒ±llƒ±k',
                storage: 'Yardƒ±mcƒ± Storage',
                status: 'Tamamlandƒ±',
                statusClass: 'status-active',
                creationDate: '2025-11-28',
                createdBy: 'Ahmet Yƒ±lmaz',
                createdFor: 'Kemal Aydƒ±n',
                totalItems: 324,
                countedItems: 324,
                differenceItems: 22,
                totalDifference: '5,430.00 TRY'
            }
        };

        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return { id: params.get('id') || null };
        }

        function initializePage() {
            const { id } = getUrlParams();
            if (id && sessions[id]) {
                loadSessionData(sessions[id]);
            } else {
                alert('Counting oturumu bulunamadƒ±!');
                window.location.href = 'inventory-counting.html';
            }
        }

        function loadSessionData(session) {
            document.getElementById('sessionId').textContent = session.id;
            document.getElementById('detailId').textContent = session.id;
            document.getElementById('detailType').textContent = session.type;
            document.getElementById('detailStorage').textContent = session.storage;
            document.getElementById('detailStatus').innerHTML = `<span class="status-badge ${session.statusClass}">${session.status}</span>`;
            document.getElementById('detailCreationDate').textContent = session.creationDate;
            document.getElementById('detailCreatedBy').textContent = session.createdBy;
            document.getElementById('detailCreatedFor').textContent = session.createdFor;
            document.getElementById('detailTotalItems').textContent = session.totalItems;
            document.getElementById('totalItems').textContent = session.totalItems;
            document.getElementById('countedItems').textContent = session.countedItems;
            document.getElementById('differenceItems').textContent = session.differenceItems;
            document.getElementById('totalDifference').textContent = session.totalDifference;
        }

        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>
