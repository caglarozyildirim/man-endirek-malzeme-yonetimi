<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tercih Detay - IMMA</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<!--
================================================================================
IMMA DEVELOPER DOCUMENTATION
================================================================================

SCREEN: 15 BP - Budget Preference (Detail)
FILE: budget-preference-detail.html
LAST UPDATED: 2025-12-23

--------------------------------------------------------------------------------
RELATED DATABASE TABLES
--------------------------------------------------------------------------------

TABLE: Budget Preference (Data Structure IMMA.xlsx)
| Field Name                    | Type | Length | Description                 |
|-------------------------------|------|--------|-----------------------------|
| Budget Preference Id          | int  | 8      | Primary key                 |
| Budget Approval request Type  | char | 1      | Onay tipi kodu (1-6)        |
| Department code               | text | 8      | Departman kodu              |

--------------------------------------------------------------------------------
BUDGET APPROVAL REQUEST TYPES
--------------------------------------------------------------------------------

| Code | Type Name                           | Description                        |
|------|-------------------------------------|------------------------------------|
| 1    | SL Approval                         | Her talep iÃ§in SL onayÄ± gerekli    |
| 2    | SL over budget approval             | Sadece bÃ¼tÃ§e aÅŸÄ±mÄ±nda SL onayÄ±     |
| 3    | Manager approval                    | Her talep iÃ§in yÃ¶netici onayÄ±      |
| 4    | Manager Over budget Approval        | Sadece bÃ¼tÃ§e aÅŸÄ±mÄ±nda yÃ¶netici     |
| 5    | Only TL and above material request  | Sadece TL ve Ã¼stÃ¼ talep yapabilir  |
| 6    | Budget approval doesn't required    | BÃ¼tÃ§e onayÄ± gerekmez               |

--------------------------------------------------------------------------------
SCREEN FIELDS (UI Elements) - Screen Designs: 15 BP Detail
--------------------------------------------------------------------------------

FORM SECTION:
- Budget Preference Id (text, readonly) - Otomatik oluÅŸturulur
- Budget Approval Request Type (select, zorunlu) - 1-6 arasÄ± seÃ§im
- Department Code (select, zorunlu) - BAKIM/URETIM/KALITE/LOJISTIK/ARASTIRMA
- Threshold Value (number) - Hibrit tip iÃ§in limit deÄŸeri
- Active Status (select) - Aktif/Pasif
- Validity Start Date (date) - Tercih baÅŸlangÄ±Ã§ tarihi

ACTION BUTTONS:
- Kaydet (primary button) - create/edit modunda gÃ¶rÃ¼nÃ¼r
- Ä°ptal (outline button) - create/edit modunda gÃ¶rÃ¼nÃ¼r
- DÃ¼zenle (primary button) - view modunda gÃ¶rÃ¼nÃ¼r
- Listeye DÃ¶n (link) - Her modda gÃ¶rÃ¼nÃ¼r

--------------------------------------------------------------------------------
Ä°Å KURALLARI
--------------------------------------------------------------------------------

BÃœTÃ‡E TERCÄ°HÄ° YAPILANDIRMASI:
1. Her departmanÄ±n tanÄ±mlÄ± bir BÃ¼tÃ§e Tercihi olabilir
2. Onay Tipi departman iÃ§in tÃ¼m talep akÄ±ÅŸlarÄ±nÄ± belirler
3. Departman kodu benzersiz olmalÄ±dÄ±r (departman baÅŸÄ±na benzersiz)
4. Aktif/Ä°naktif durumu ayarlanabilir
5. GeÃ§erlilik baÅŸlangÄ±Ã§ tarihi tanÄ±mlanabilir

BÃœTÃ‡E ONAY TALEP TÄ°PLERÄ°:
Tip 1 - SL OnayÄ±: TÃ¼m talepler SL onayÄ± gerektirir
Tip 2 - SL bÃ¼tÃ§e aÅŸÄ±mÄ± onayÄ±: Sadece bÃ¼tÃ§e aÅŸÄ±mÄ± talepleri SL onayÄ± gerektirir
Tip 3 - YÃ¶netici onayÄ±: TÃ¼m talepler yÃ¶netici onayÄ± gerektirir
Tip 4 - YÃ¶netici bÃ¼tÃ§e aÅŸÄ±mÄ± onayÄ±: Sadece bÃ¼tÃ§e aÅŸÄ±mÄ± talepleri yÃ¶netici onayÄ± gerektirir
Tip 5 - Sadece TL ve Ã¼stÃ¼ malzeme talebi: Sadece TakÄ±m Lideri ve Ã¼stÃ¼ pozisyonlar talep oluÅŸturabilir
Tip 6 - BÃ¼tÃ§e onayÄ± gerekli deÄŸil: Onay gerekmez, talepler doÄŸrudan iÅŸlenir

TERCÄ°HE GÃ–RE BÃœTÃ‡E TÃœKETÄ°MÄ°:
6. Talep eden kullanÄ±cÄ± bir SL'ye baÄŸlÄ±ysa, SL bÃ¼tÃ§esi tanÄ±mlÄ± deÄŸilse ancak SL onayÄ± gerekiyorsa "SL bÃ¼tÃ§esi gerekli" uyarÄ±sÄ± gÃ¶sterilmelidir
7. Talep eden kullanÄ±cÄ± bir SL'ye baÄŸlÄ±ysa, SL bÃ¼tÃ§esi tanÄ±mlÄ±ysa ve SL onayÄ± gerekiyorsa: SL aylÄ±k bÃ¼tÃ§esi, Departman aylÄ±k bÃ¼tÃ§esi ve departman yÄ±llÄ±k bÃ¼tÃ§esi tÃ¼ketilir
8. Talep eden kullanÄ±cÄ± bir SL'ye baÄŸlÄ± deÄŸilse talep Departman AylÄ±k bÃ¼tÃ§esini ve departman yÄ±llÄ±k bÃ¼tÃ§esini tÃ¼ketir
9. Talep eden kullanÄ±cÄ± bir SL'ye baÄŸlÄ±ysa, SL bÃ¼tÃ§esi tanÄ±mlÄ± deÄŸilse ve SL onayÄ± gerekmiyorsa; departman AylÄ±k bÃ¼tÃ§esi ve departman yÄ±llÄ±k bÃ¼tÃ§esi tÃ¼ketilir
10. KullanÄ±cÄ± bir SL'ye baÄŸlÄ± deÄŸilse ve Departman AylÄ±k bÃ¼tÃ§esi tanÄ±mlÄ±ysa ancak yÃ¶netici onayÄ± gerekiyorsa: Departman yÄ±llÄ±k ve aylÄ±k bÃ¼tÃ§esi tÃ¼ketilir

GENEL KURALLAR:
11. TÃ¼m bÃ¼tÃ§e aktiviteleri iÃ§in para birimi Euro'dur
12. Malzeme fiyatÄ± onaylardan Ã¶nce ve sonra deÄŸiÅŸtirilebilir
13. Fiyat onaylandÄ±ysa yeni fiyatlar iÃ§in ek onay gerekmez
14. YÃ¶neticiler istedikleri zaman bÃ¼tÃ§eyi deÄŸiÅŸtirebilir veya bÃ¼tÃ§e aÅŸÄ±mÄ± taleplerini onaylayabilir
15. TÃ¼m bÃ¼tÃ§eler SL'lere veya aylara daÄŸÄ±tÄ±lmaz, bir kÄ±smÄ± yedekte tutulabilir
16. Hafta bÃ¼tÃ§esi iki ay arasÄ±ndaysa, bÃ¼tÃ§e ve tÃ¼ketim 6 gÃ¼n faktÃ¶rÃ¼yle iki aya daÄŸÄ±tÄ±lÄ±r (Pazar hesaba katÄ±lmaz)
17. SL'nin kendisinde tanÄ±mlÄ± haftalÄ±k bÃ¼tÃ§esi varsa bu bÃ¼tÃ§enin de tÃ¼ketilmesi gerekir

BÃœTÃ‡E HÄ°YERARÅÄ°SÄ°:
YÄ±l â†’ Ay â†’ SL AylÄ±k â†’ SL HaftalÄ±k

--------------------------------------------------------------------------------
FORM MODES
--------------------------------------------------------------------------------

- view: TÃ¼m alanlar disabled, sadece gÃ¶rÃ¼ntÃ¼leme
- edit: Department ve Approval Type dÃ¼zenlenebilir
- create: Yeni preference oluÅŸturma

URL Parametreleri:
- mode: view | edit | create
- id: Budget Preference ID (view/edit iÃ§in)

--------------------------------------------------------------------------------
FIELD VALIDATIONS
--------------------------------------------------------------------------------

- Budget Preference Id: Otomatik oluÅŸturulur (readonly)
- Budget Approval Request Type: Zorunlu (1-6 arasÄ±)
- Department Code: Zorunlu (text, maxlength=8)

--------------------------------------------------------------------------------
INTEGRATION NOTES
--------------------------------------------------------------------------------

- Material Request oluÅŸturulurken bu preference kontrol edilir
- Approval akÄ±ÅŸÄ± bu preference'a gÃ¶re belirlenir
- Budget tablosuyla bÃ¼tÃ§e aÅŸÄ±mÄ± kontrolÃ¼ iÃ§in entegrasyon

================================================================================
-->
<body>
    <!-- NAVBAR - Top Navigation (Maximo Style) -->
    <nav class="modern-navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">
                <div class="navbar-logo">M</div>
                <div class="brand-text">
                    <span class="brand-name">IMMA</span>
                    <span class="brand-subtitle">Endirek Malzeme YÃ¶netimi</span>
                </div>
            </a>
            <ul class="navbar-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <span class="nav-icon">ğŸ“Š</span>
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="material-list.html" class="nav-link">
                        <span class="nav-icon">ğŸ“¦</span>
                        Ana Veriler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-list.html" class="dropdown-item">Malzeme Listesi</a>
                        <a href="supplier-list.html" class="dropdown-item">TedarikÃ§i Listesi</a>
                        <a href="storage-type-list.html" class="dropdown-item">Depo Tipi Listesi</a>
                        <a href="number-series.html" class="dropdown-item">Numara Serileri</a>
                        <a href="material-group.html" class="dropdown-item">Malzeme GruplarÄ±</a>
                        <a href="unit-of-measure-list.html" class="dropdown-item">Ã–lÃ§Ã¼ Birimleri</a>
                        <a href="department-cost-center-list.html" class="dropdown-item">Departman-Masraf Merkezi</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="mrp.html" class="nav-link">
                        <span class="nav-icon">ğŸ“ˆ</span>
                        MRP
                    </a>
                </li>
                <li class="nav-item">
                    <a href="srm-list.html" class="nav-link">
                        <span class="nav-icon">ğŸ›’</span>
                        SatÄ±nalma
                    </a>
                    <div class="dropdown-menu">
                        <a href="srm-list.html" class="dropdown-item">Talep Listesi</a>
                        <a href="goods-receipt.html" class="dropdown-item">Mal Kabul</a>
                        <a href="po-list.html" class="dropdown-item">SatÄ±nalma SipariÅŸleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="budget-management.html" class="nav-link active">
                        <span class="nav-icon">ğŸ’°</span>
                        Budget
                    </a>
                    <div class="dropdown-menu">
                        <a href="budget-management.html" class="dropdown-item">BÃ¼tÃ§e YÃ¶netimi</a>
                        <a href="budget-preference.html" class="dropdown-item active">BÃ¼tÃ§e Tercihleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="material-request-list.html" class="nav-link">
                        <span class="nav-icon">ğŸ“‹</span>
                        Talepler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-request-list.html" class="dropdown-item">Talep Listesi</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="transfer-list.html" class="nav-link">
                        <span class="nav-icon">ğŸ­</span>
                        Stock
                    </a>
                    <div class="dropdown-menu">
                        <a href="direct-issue.html" class="dropdown-item">DoÄŸrudan Ã‡Ä±kÄ±ÅŸ</a>
                        <a href="warehouse-transfer.html" class="dropdown-item">Depo Transferi</a>
                        <a href="transfer-list.html" class="dropdown-item">Transfer Listesi</a>
                        <a href="inventory-counting.html" class="dropdown-item">SayÄ±m Ä°ÅŸlemleri</a>
                        <a href="single-material-counting.html" class="dropdown-item">Tekli Malzeme SayÄ±mÄ±</a>
                        <a href="scrapping.html" class="dropdown-item">Hurda Ä°ÅŸlemleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="user-material-limit-list.html" class="nav-link">
                        <span class="nav-icon">âš™ï¸</span>
                        Ayarlar
                    </a>
                    <div class="dropdown-menu">
                        <a href="user-material-limit-list.html" class="dropdown-item">KullanÄ±cÄ± Malzeme Limitleri</a>
                        <a href="accounting-confirmation.html" class="dropdown-item">Muhasebe OnaylarÄ±</a>
                    </div>
                </li>
            </ul>
            <div class="navbar-user">
                <span class="user-name">Ahmet YÄ±lmaz</span>
                <div class="user-avatar">AY</div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="modern-container">
        <div class="page-header">
            <div>
                <h1 class="page-title" id="pageTitle">Budget Tercih Detay</h1>
                <p class="page-subtitle">Budget > BÃ¼tÃ§e Tercihleri > <span id="breadcrumbAction">GÃ¶rÃ¼ntÃ¼le</span></p>
            </div>
            <div class="page-actions">
                <a href="budget-preference.html" class="btn btn-outline">â† Listeye DÃ¶n</a>
                <button class="btn btn-primary" id="editModeBtn" style="display: none;">DÃ¼zenle</button>
            </div>
        </div>

        <!-- Preference Form -->
        <div class="card">
            <div class="card-header">
                <h3 id="formTitle">Budget Preference Information</h3>
            </div>
            <div class="card-body">
                <form id="preferenceForm">
                    <div class="form-row">
                        <div class="form-group col-4">
                            <label>Budget Preference Id</label>
                            <input type="text" class="form-control" id="preferenceId" readonly>
                            <small class="form-text">Otomatik oluÅŸturulur</small>
                        </div>
                        <div class="form-group col-4">
                            <label>Budget Approval Request Type <span class="required">*</span></label>
                            <select class="form-control" id="approvalRequestType" required>
                                <option value="">SeÃ§iniz...</option>
                                <option value="1">1 - SL Approval</option>
                                <option value="2">2 - SL over budget approval</option>
                                <option value="3">3 - Manager approval</option>
                                <option value="4">4 - Manager Over budget Approval</option>
                                <option value="5">5 - Only TL and above material request</option>
                                <option value="6">6 - Budget approval doesn't required</option>
                            </select>
                            <small class="form-text">Onay sÃ¼recinin tipi</small>
                        </div>
                        <div class="form-group col-4">
                            <label>Department Code <span class="required">*</span></label>
                            <select class="form-control" id="departmentCode" required>
                                <option value="">SeÃ§iniz...</option>
                                <option value="BAKIM">BAKIM - BakÄ±m DepartmentÄ±</option>
                                <option value="URETIM">URETIM - Ãœretim DepartmentÄ±</option>
                                <option value="KALITE">KALITE - Kalite Kontrol</option>
                                <option value="LOJISTIK">LOJISTIK - Lojistik</option>
                                <option value="ARASTIRMA">ARASTIRMA - Ar-Ge</option>
                            </select>
                            <small class="form-text">Tercih uygulanacak departman</small>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-4" id="thresholdGroup">
                            <label>Threshold Value</label>
                            <input type="number" class="form-control" id="thresholdValue">
                            <small class="form-text">Hibrit tip iÃ§in limit deÄŸeri</small>
                        </div>
                        <div class="form-group col-4">
                            <label>Active Status</label>
                            <select class="form-control" id="activeStatus">
                                <option value="ACTIVE" selected>Aktif</option>
                                <option value="INACTIVE">Pasif</option>
                            </select>
                            <small class="form-text">Tercih durumu</small>
                        </div>
                        <div class="form-group col-4">
                            <label>Validity Start Date</label>
                            <input type="date" class="form-control" id="validFrom" value="2025-01-01">
                            <small class="form-text">Tercih baÅŸlangÄ±Ã§ tarihi</small>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions" style="margin-top: 30px;" id="formActions">
                        <a href="budget-preference.html" class="btn btn-outline">Ä°ptal</a>
                        <button type="submit" class="btn btn-primary" id="saveBtn">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Info Note -->

        <!-- Database Schema -->
    </main>

    <style>
        .required {
            color: #dc3545;
            font-weight: bold;
        }
        .form-text {
            display: block;
            margin-top: 4px;
            font-size: 11px;
            color: #6c757d;
        }
        .form-control[readonly] {
            background-color: #f5f5f5;
        }
        .form-control:disabled {
            background-color: #f5f5f5;
            cursor: not-allowed;
        }
    </style>

    <script>
        // Sample data (backend'den gelecek)
        // Budget Approval Request Type: 1-6 arasÄ± deÄŸerler (IMMA Data Structure)
        const budgetPreferences = {
            'BP-2025-001': {
                id: 'BP-2025-001',
                departmentCode: 'BAKIM',
                departmentName: 'BakÄ±m DepartmentÄ±',
                approvalType: '1',
                thresholdValue: null,
                status: 'ACTIVE',
                validFrom: '2025-01-01'
            },
            'BP-2025-002': {
                id: 'BP-2025-002',
                departmentCode: 'URETIM',
                departmentName: 'Ãœretim DepartmentÄ±',
                approvalType: '2',
                thresholdValue: null,
                status: 'ACTIVE',
                validFrom: '2025-01-01'
            },
            'BP-2025-003': {
                id: 'BP-2025-003',
                departmentCode: 'KALITE',
                departmentName: 'Kalite Kontrol',
                approvalType: '3',
                thresholdValue: null,
                status: 'ACTIVE',
                validFrom: '2025-01-01'
            },
            'BP-2025-004': {
                id: 'BP-2025-004',
                departmentCode: 'LOJISTIK',
                departmentName: 'Lojistik',
                approvalType: '5',
                thresholdValue: null,
                status: 'ACTIVE',
                validFrom: '2025-01-01'
            },
            'BP-2024-099': {
                id: 'BP-2024-099',
                departmentCode: 'ARASTIRMA',
                departmentName: 'Ar-Ge',
                approvalType: '6',
                thresholdValue: null,
                status: 'INACTIVE',
                validFrom: '2024-01-01'
            }
        };

        // URL parametrelerini al
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                mode: params.get('mode') || 'view',
                id: params.get('id') || null
            };
        }

        // Sayfa moduna gÃ¶re ayarla
        function initializePage() {
            const { mode, id } = getUrlParams();
            const formElements = document.querySelectorAll('#preferenceForm input:not([type="checkbox"]), #preferenceForm select');

            switch(mode) {
                case 'view':
                    document.getElementById('pageTitle').textContent = 'Budget Tercih GÃ¶rÃ¼ntÃ¼le';
                    document.getElementById('breadcrumbAction').textContent = 'GÃ¶rÃ¼ntÃ¼le';
                    document.getElementById('formTitle').textContent = 'Budget Preference Information (Read Only)';
                    document.getElementById('editModeBtn').style.display = 'inline-block';
                    document.getElementById('formActions').style.display = 'none';

                    // TÃ¼m alanlarÄ± disabled yap
                    formElements.forEach(el => {
                        el.disabled = true;
                    });

                    // DÃ¼zenle butonuna tÄ±klayÄ±nca edit moduna geÃ§
                    document.getElementById('editModeBtn').addEventListener('click', function() {
                        window.location.href = `budget-preference-detail.html?mode=edit&id=${id}`;
                    });

                    if (id && budgetPreferences[id]) {
                        loadPreferenceData(budgetPreferences[id]);
                    }
                    break;

                case 'edit':
                    document.getElementById('pageTitle').textContent = 'Budget Tercih DÃ¼zenle';
                    document.getElementById('breadcrumbAction').textContent = 'DÃ¼zenle';
                    document.getElementById('formTitle').textContent = 'Budget Tercih DÃ¼zenleme';
                    document.getElementById('editModeBtn').style.display = 'none';
                    document.getElementById('formActions').style.display = 'flex';

                    // AlanlarÄ± aktif yap (readonly olanlar hariÃ§)
                    formElements.forEach(el => {
                        if (!el.hasAttribute('readonly')) {
                            el.disabled = false;
                        }
                    });

                    if (id && budgetPreferences[id]) {
                        loadPreferenceData(budgetPreferences[id]);
                    }
                    break;

                case 'create':
                    document.getElementById('pageTitle').textContent = 'Yeni Budget Tercihi OluÅŸtur';
                    document.getElementById('breadcrumbAction').textContent = 'Yeni';
                    document.getElementById('formTitle').textContent = 'Yeni Budget Tercihi';
                    document.getElementById('editModeBtn').style.display = 'none';
                    document.getElementById('formActions').style.display = 'flex';

                    // Yeni ID oluÅŸtur
                    const newId = 'BP-2025-' + String(Math.floor(Math.random() * 900) + 100);
                    document.getElementById('preferenceId').value = newId;

                    // AlanlarÄ± aktif yap
                    formElements.forEach(el => {
                        if (!el.hasAttribute('readonly')) {
                            el.disabled = false;
                        }
                    });
                    break;
            }

            updateThresholdVisibility();
        }

        // Tercih verilerini forma yÃ¼kle
        function loadPreferenceData(preference) {
            document.getElementById('preferenceId').value = preference.id;
            document.getElementById('approvalRequestType').value = preference.approvalType;
            document.getElementById('departmentCode').value = preference.departmentCode;
            document.getElementById('thresholdValue').value = preference.thresholdValue || '';
            document.getElementById('activeStatus').value = preference.status;
            document.getElementById('validFrom').value = preference.validFrom;

            updateThresholdVisibility();
        }

        // EÅŸik deÄŸer alanÄ± gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼
        function updateThresholdVisibility() {
            const thresholdGroup = document.getElementById('thresholdGroup');
            const approvalType = document.getElementById('approvalRequestType').value;

            if (approvalType === 'HYBRID' || approvalType === 'MULTI_LEVEL') {
                thresholdGroup.style.opacity = '1';
                document.getElementById('thresholdValue').required = true;
            } else {
                thresholdGroup.style.opacity = '0.5';
                document.getElementById('thresholdValue').required = false;
            }
        }

        document.getElementById('approvalRequestType').addEventListener('change', updateThresholdVisibility);

        // Form submit
        document.getElementById('preferenceForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const { mode } = getUrlParams();
            const preferenceData = {
                id: document.getElementById('preferenceId').value,
                approvalType: document.getElementById('approvalRequestType').value,
                departmentCode: document.getElementById('departmentCode').value,
                thresholdValue: document.getElementById('thresholdValue').value,
                status: document.getElementById('activeStatus').value,
                validFrom: document.getElementById('validFrom').value
            };

            if (!preferenceData.approvalType || !preferenceData.departmentCode) {
                alert('LÃ¼tfen zorunlu alanlarÄ± doldurun!\n\n- Budget Onay Talep Tipi\n- Department Kodu');
                return;
            }

            const action = mode === 'create' ? 'oluÅŸturuldu' : 'gÃ¼ncellendi';
            alert(`Budget Tercihi ${action}!\n\nTercih ID: ${preferenceData.id}\nDepartment: ${preferenceData.departmentCode}\nOnay Tipi: ${preferenceData.approvalType}\n\n(Backend entegrasyonu ile Ã§alÄ±ÅŸacak)`);

            // Liste sayfasÄ±na dÃ¶n
            window.location.href = 'budget-preference.html';
        });

        // Sayfa yÃ¼klendiÄŸinde baÅŸlat
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>

    <!-- DEVELOPER DOCUMENTATION PANEL -->
    <div id="devDocsPanel" class="dev-docs-panel">
        <button class="dev-docs-toggle" onclick="toggleDevDocs()">ğŸ“‹ GeliÅŸtirici DokÃ¼mantasyonu</button>
        <div class="dev-docs-content" id="devDocsContent">
            <div class="dev-docs-header">
                <h2>ğŸ“‹ 15 BP - Budget Preference (Detail)</h2>
                <button class="dev-docs-close" onclick="toggleDevDocs()">âœ•</button>
            </div>
            <div class="dev-docs-body">
                <div class="dev-docs-tabs">
                    <button class="dev-tab active" onclick="showDevTab('dataStructure')">Veri YapÄ±larÄ±</button>
                    <button class="dev-tab" onclick="showDevTab('formFields')">Form AlanlarÄ±</button>
                    <button class="dev-tab" onclick="showDevTab('businessRules')">Ä°ÅŸ KurallarÄ±</button>
                </div>
                <div id="dataStructure" class="dev-tab-content active">
                    <h3>Budget Preference Tablosu</h3>
                    <table class="dev-table"><thead><tr><th>Field Name</th><th>Type</th><th>Length</th><th>Description</th></tr></thead>
                        <tbody>
                            <tr><td>Budget Preference Id</td><td>int</td><td>8</td><td>Primary key</td></tr>
                            <tr><td>Budget Approval request Type</td><td>char</td><td>1</td><td>Onay tipi kodu (1-6)</td></tr>
                            <tr><td>Department code</td><td>text</td><td>8</td><td>Departman kodu (unique)</td></tr>
                        </tbody>
                    </table>
                    <h3>Budget Approval Request Types</h3>
                    <table class="dev-table"><thead><tr><th>Kod</th><th>Tip AdÄ±</th><th>AÃ§Ä±klama</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>SL Approval</td><td>Her talep iÃ§in SL onayÄ±</td></tr>
                            <tr><td>2</td><td>SL over budget approval</td><td>Sadece bÃ¼tÃ§e aÅŸÄ±mÄ±nda SL onayÄ±</td></tr>
                            <tr><td>3</td><td>Manager approval</td><td>Her talep iÃ§in yÃ¶netici onayÄ±</td></tr>
                            <tr><td>4</td><td>Manager Over budget Approval</td><td>Sadece bÃ¼tÃ§e aÅŸÄ±mÄ±nda yÃ¶netici</td></tr>
                            <tr><td>5</td><td>Only TL and above</td><td>Sadece TL ve Ã¼stÃ¼ talep yapabilir</td></tr>
                            <tr><td>6</td><td>Not required</td><td>BÃ¼tÃ§e onayÄ± gerekmez</td></tr>
                        </tbody>
                    </table>
                </div>
                <div id="formFields" class="dev-tab-content">
                    <h3>Form AlanlarÄ±</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>AÃ§Ä±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Budget Preference Id</td><td>readonly</td><td>Sistem otomatik oluÅŸturur</td></tr>
                            <tr><td>Department code *</td><td>dropdown</td><td>Departman seÃ§imi (unique)</td></tr>
                            <tr><td>Budget Approval request Type *</td><td>dropdown</td><td>Onay tipi seÃ§imi (1-6)</td></tr>
                        </tbody>
                    </table>
                    <h3>Budget Approval Request Types</h3>
                    <table class="dev-table">
                        <thead><tr><th>Kod</th><th>Tip AdÄ±</th><th>AÃ§Ä±klama</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>SL Approval</td><td>Her talep iÃ§in SL onayÄ±</td></tr>
                            <tr><td>2</td><td>SL over budget approval</td><td>Sadece bÃ¼tÃ§e aÅŸÄ±mÄ±nda SL onayÄ±</td></tr>
                            <tr><td>3</td><td>Manager approval</td><td>Her talep iÃ§in yÃ¶netici onayÄ±</td></tr>
                            <tr><td>4</td><td>Manager Over budget Approval</td><td>Sadece bÃ¼tÃ§e aÅŸÄ±mÄ±nda yÃ¶netici</td></tr>
                            <tr><td>5</td><td>Only TL and above</td><td>Sadece TL+ talep yapabilir</td></tr>
                            <tr><td>6</td><td>Not required</td><td>Onay gerekmez</td></tr>
                        </tbody>
                    </table>
                    <h3>Action Buttons</h3>
                    <table class="dev-table">
                        <thead><tr><th>Buton</th><th>AÃ§Ä±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Kaydet</td><td>Preference kaydet</td></tr>
                            <tr><td>Ä°ptal</td><td>Listeye geri dÃ¶ner</td></tr>
                        </tbody>
                    </table>
                </div>
                <div id="businessRules" class="dev-tab-content">
                    <h3>Ä°ÅŸ KurallarÄ±</h3>
                    <div class="rules-section">
                        <h4>ğŸ“‹ Budget Preference KonfigÃ¼rasyonu</h4>
                        <ul>
                            <li>Her departman iÃ§in <strong>tek bir Budget Preference</strong> tanÄ±mlanabilir</li>
                            <li>Approval Type departmanÄ±n tÃ¼m talep akÄ±ÅŸlarÄ±nÄ± belirler</li>
                            <li>Department code benzersiz olmalÄ± (unique)</li>
                            <li>Aktif/Pasif durumu ayarlanabilir</li>
                            <li>GeÃ§erlilik baÅŸlangÄ±Ã§ tarihi belirlenebilir</li>
                        </ul>
                        <h4>âœ… BÃ¼tÃ§e Onay Talep Tipleri</h4>
                        <ul>
                            <li><strong>Tip 1 - SL Approval:</strong> TÃ¼m talepler SL onayÄ± gerektirir</li>
                            <li><strong>Tip 2 - SL over budget approval:</strong> Sadece bÃ¼tÃ§e aÅŸan talepler SL onayÄ± gerektirir</li>
                            <li><strong>Tip 3 - Manager approval:</strong> TÃ¼m talepler yÃ¶netici onayÄ± gerektirir</li>
                            <li><strong>Tip 4 - Manager Over budget Approval:</strong> Sadece bÃ¼tÃ§e aÅŸan talepler yÃ¶netici onayÄ± gerektirir</li>
                            <li><strong>Tip 5 - Only TL and above material request:</strong> Sadece Team Leader ve Ã¼zeri pozisyonlar talep oluÅŸturabilir</li>
                            <li><strong>Tip 6 - Budget approval doesn't required:</strong> Onay gerekmez, talepler doÄŸrudan iÅŸleme alÄ±nÄ±r</li>
                        </ul>
                        <h4>ğŸ”„ Preference'a GÃ¶re BÃ¼tÃ§e TÃ¼ketimi</h4>
                        <ul>
                            <li><strong>Senaryo 1:</strong> Talep eden kullanÄ±cÄ± bir SL'ye baÄŸlÄ±ysa, SL bÃ¼tÃ§esi tanÄ±mlÄ± deÄŸilse ancak SL onayÄ± gerekiyorsa: "SL budget required" engelleyici uyarÄ± gÃ¶sterilmeli</li>
                            <li><strong>Senaryo 2:</strong> Talep eden kullanÄ±cÄ± bir SL'ye baÄŸlÄ±ysa, SL bÃ¼tÃ§esi tanÄ±mlÄ±ysa ve SL onayÄ± gerekiyorsa: SL aylÄ±k bÃ¼tÃ§e, Departman aylÄ±k bÃ¼tÃ§e ve Departman yÄ±llÄ±k bÃ¼tÃ§e tÃ¼ketilir</li>
                            <li><strong>Senaryo 3:</strong> Talep eden kullanÄ±cÄ± bir SL'ye baÄŸlÄ± deÄŸilse: Departman aylÄ±k bÃ¼tÃ§e ve Departman yÄ±llÄ±k bÃ¼tÃ§e tÃ¼ketilir</li>
                            <li><strong>Senaryo 4:</strong> Talep eden kullanÄ±cÄ± bir SL'ye baÄŸlÄ±ysa, SL bÃ¼tÃ§esi tanÄ±mlÄ± deÄŸilse ve SL onayÄ± gerekmiyorsa: Departman aylÄ±k bÃ¼tÃ§e ve Departman yÄ±llÄ±k bÃ¼tÃ§e tÃ¼ketilir</li>
                            <li><strong>Senaryo 5:</strong> KullanÄ±cÄ± bir SL'ye baÄŸlÄ± deÄŸilse ve Departman aylÄ±k bÃ¼tÃ§e tanÄ±mlÄ±ysa ancak yÃ¶netici onayÄ± gerekiyorsa: Departman yÄ±llÄ±k ve aylÄ±k bÃ¼tÃ§e tÃ¼ketilir</li>
                        </ul>
                        <h4>ğŸ’° Genel Kurallar</h4>
                        <ul>
                            <li>TÃ¼m bÃ¼tÃ§e aktiviteleri <strong>Euro cinsindendir</strong></li>
                            <li>Malzeme fiyatÄ± onaylardan Ã¶nce ve sonra deÄŸiÅŸtirilebilir</li>
                            <li>Fiyat onaylandÄ±ysa yeni fiyatlar iÃ§in ek onay gerekmez</li>
                            <li>YÃ¶neticiler istedikleri zaman bÃ¼tÃ§eyi deÄŸiÅŸtirebilir veya bÃ¼tÃ§e aÅŸan talepleri onaylayabilir</li>
                            <li>TÃ¼m bÃ¼tÃ§elerin SL'lere veya aylara daÄŸÄ±tÄ±lmasÄ± zorunlu deÄŸil, bir kÄ±smÄ± ayrÄ±labilir</li>
                            <li>Hafta iki aya denk gelirse bÃ¼tÃ§e ve tÃ¼ketim 6 gÃ¼nlÃ¼k faktÃ¶re gÃ¶re iki aya daÄŸÄ±tÄ±lÄ±r (Pazar hesaba katÄ±lmaz)</li>
                            <li>SL'nin kendisine tanÄ±mlÄ± haftalÄ±k bÃ¼tÃ§esi varsa bu bÃ¼tÃ§e de tÃ¼ketilmeli</li>
                        </ul>
                        <h4>ğŸ“Š BÃ¼tÃ§e HiyerarÅŸisi</h4>
                        <ul>
                            <li>Year â†’ Month â†’ SL Monthly â†’ SL Weekly</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>
        .dev-docs-panel{position:fixed;bottom:0;left:0;right:0;z-index:9999;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}
        .dev-docs-toggle{position:absolute;bottom:100%;right:20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:10px 20px;border-radius:8px 8px 0 0;cursor:pointer;font-weight:600;font-size:14px;box-shadow:0 -2px 10px rgba(0,0,0,0.2)}
        .dev-docs-content{display:none;background:#1a1a2e;color:#eee;max-height:60vh;overflow-y:auto;box-shadow:0 -5px 20px rgba(0,0,0,0.3)}
        .dev-docs-content.active{display:block}
        .dev-docs-header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);position:sticky;top:0}
        .dev-docs-header h2{margin:0;font-size:18px}
        .dev-docs-close{background:rgba(255,255,255,0.2);border:none;color:#fff;width:30px;height:30px;border-radius:50%;cursor:pointer;font-size:16px}
        .dev-docs-body{padding:20px}
        .dev-docs-tabs{display:flex;gap:10px;margin-bottom:20px;border-bottom:1px solid #333;padding-bottom:10px}
        .dev-tab{background:#2d2d44;color:#aaa;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;transition:all 0.3s}
        .dev-tab:hover,.dev-tab.active{background:#667eea;color:#fff}
        .dev-tab-content{display:none}
        .dev-tab-content.active{display:block}
        .dev-table{width:100%;border-collapse:collapse;margin:15px 0;font-size:13px}
        .dev-table th,.dev-table td{padding:10px;text-align:left;border:1px solid #333}
        .dev-table th{background:#2d2d44;color:#667eea;font-weight:600}
        .dev-table tr:nth-child(even){background:#252538}
        .dev-docs-body h3{color:#667eea;margin:20px 0 10px;font-size:16px;border-bottom:1px solid #333;padding-bottom:5px}
        .dev-docs-body ul{margin:0 0 15px 20px;line-height:1.8}
        .rules-section{background:#252538;padding:15px;border-radius:8px}
    </style>
    <script>
        function toggleDevDocs(){document.getElementById('devDocsContent').classList.toggle('active')}
        function showDevTab(tabId){document.querySelectorAll('.dev-tab-content').forEach(c=>c.classList.remove('active'));document.querySelectorAll('.dev-tab').forEach(t=>t.classList.remove('active'));document.getElementById(tabId).classList.add('active');event.target.classList.add('active')}
    </script>
</body>
</html>
