<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tekli Malzeme Sayƒ±mƒ± - IMMA</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<!--
================================================================================
IMMA DEVELOPER DOCUMENTATION
================================================================================

SCREEN: 23 IC-SMC - Single Material Counting
FILE: single-material-counting.html
LAST UPDATED: 2025-12-18

--------------------------------------------------------------------------------
RELATED DATABASE TABLES
--------------------------------------------------------------------------------

TABLE: Inventory Counting Header (Data Structure IMMA.xlsx - simplified for single)
| Field Name                    | Type     | Length | Description                  |
|-------------------------------|----------|--------|------------------------------|
| Inventory Counting Header Id  | int      | 8      | Primary key (IC-SMC-XXXX)    |
| Correction type               | char     | 1      | D√ºzeltme tipi                |
| Creation date time            | datetime | -      | Olu≈üturma tarihi             |
| Created by user info          | int      | 8      | Olu≈üturan kullanƒ±cƒ±          |
| Counted by user info          | int      | 8      | Sayan kullanƒ±cƒ±              |
| Correction finalized check    | bool     | -      | D√ºzeltme tamamlandƒ± mƒ±       |

TABLE: Inventory Counting Item (Data Structure IMMA.xlsx - single record)
| Field Name                    | Type     | Length | Description                  |
|-------------------------------|----------|--------|------------------------------|
| Inventory Counting item id    | int      | 8      | Primary key                  |
| Material number               | text     | 13     | Malzeme numarasƒ±             |
| Stock record Id               | int      | 8      | Stok kaydƒ± referansƒ±         |
| Stock quantity                | float    | 15     | Sistem stok miktarƒ±          |
| Counting result quantity      | float    | 15     | Sayƒ±m sonucu miktarƒ±         |

--------------------------------------------------------------------------------
SINGLE MATERIAL COUNTING WORKFLOW
--------------------------------------------------------------------------------

1. SEARCH STEP:
   - Malzeme arama (min 2 karakter)
   - Storage ve Location filtreleri
   - Autocomplete dropdown ile se√ßim

2. COUNTING STEP:
   - Se√ßilen malzeme bilgileri g√∂r√ºnt√ºlenir
   - Fiziksel sayƒ±m deƒüeri girilir
   - Fark otomatik hesaplanƒ±r
   - Fark varsa gerek√ße zorunlu

--------------------------------------------------------------------------------
CORRECTION TYPES
--------------------------------------------------------------------------------

- spot_count: Spot Sayƒ±m
- recount: Yeniden Sayƒ±m
- discrepancy: Fark ƒ∞ncelemesi
- emergency: Acil D√ºzeltme

--------------------------------------------------------------------------------
ƒ∞≈û KURALLARI (Business Rules)
--------------------------------------------------------------------------------

ENVANTER D√úZELTMELERƒ∞ ƒ∞≈û KURALLARI:
1. A√ßƒ±k sayƒ±m belgesi varsa etkilenen malzemeler i√ßin yeni malzeme talebi engellenir
   ancak onay s√ºreci devam edebilmelidir
2. Sayƒ±m belgesi mevcut stok miktarlarƒ±nƒ± i√ßermemelidir
3. Tekli malzeme envanter d√ºzeltmesi i√ßin onay s√ºreci olmayacaktƒ±r
4. Sayƒ±m bin bazƒ±nda yapƒ±ldƒ±ƒüƒ±ndan sayƒ±m belgesi kapsamƒ± i√ßin se√ßim listesi
   bin numaralarƒ±na g√∂re ayrƒ±lmƒ±≈ü bilgi i√ßerecektir
5. Diƒüer ve hurda envanter d√ºzeltmeleri i√ßin onaylayan y√∂netici malzeme grubuna
   baƒülƒ± kayƒ±ttan se√ßilecektir. S√ºre√ß endirek ve GPS malzeme anahtar kullanƒ±cƒ±sƒ±
   tarafƒ±ndan ba≈ülatƒ±lacak ve muhasebe ile ilgiliyse muhasebe endirek ve GPS
   sorumlu kullanƒ±cƒ±sƒ± tarafƒ±ndan tamamlanacaktƒ±r.
6. Ek belge zorunludur
7. A√ßƒ±klama zorunludur
8. Onay sƒ±rasƒ± malzeme grubuna baƒülƒ± kayƒ±ttaki gibi takip edilecektir
   (onay sƒ±rasƒ±, departman kodu, malzeme grubu)
9. Stok transferleri ile d√ºzeltmeler yalnƒ±zca malzemenin t√ºm stoƒüu aynƒ± sayƒ±m
   belgesi i√ßinde sayƒ±ma se√ßildiƒüinde hesaplanƒ±r. Bir bin'deki eksik miktarƒ±
   ba≈üka bir bin'deki fazla miktardan kar≈üƒ±lamak i√ßin √∂neriler olu≈üturulacaktƒ±r.
10. T√ºm geri almalar yanlƒ±≈ülƒ±kla yapƒ±lan bir i≈ülemin d√ºzeltilmesidir.
    Admin kullanƒ±cƒ± tarafƒ±ndan yapƒ±labilir
11. Hurda ve diƒüer d√ºzeltmeler i√ßin en az bir y√∂netici onaylayƒ±cƒ± olarak
    eklenmelidir. Bu belge endirek malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan
    olu≈üturulabilir ve onaylayƒ±cƒ± eklenebilir.

--------------------------------------------------------------------------------
DISPLAYED FIELDS
--------------------------------------------------------------------------------

Material Information (Read-only):
- Material number
- Material description
- Stock Record ID

Stock Information (Read-only):
- Storage / Location / Bin
- System Stock Quantity
- Unit of measure
- Currency
- Unit value (TRY/EUR)
- Total Stock Value
- Cost Center
- Cost Date
- Open Material Requests / SRM / PO
- Goods Movement ID
- Confirmed by / Date

Correction Document (Editable):
- Correction document Id (auto-generated)
- Correction document title
- Correction type

Counting Input:
- Counting value (kullanƒ±cƒ± giri≈üi)
- Differences by quantity (hesaplanan)
- TRY/EUR differences value (hesaplanan)
- Differences status (badge)
- Differences reason (fark varsa zorunlu)
- Counting Date
- Counted by

--------------------------------------------------------------------------------
MOVEMENT TYPES
--------------------------------------------------------------------------------

| Code | Type                    | Description                    |
|------|-------------------------|--------------------------------|
| 8    | Inventory positive record| Sayƒ±m fazlasƒ±                 |
| 9    | Inventory negative record| Sayƒ±m eksiƒüi                  |

================================================================================
-->
<body>
    <!-- NAVBAR - Top Navigation (Maximo Style) -->
    <nav class="modern-navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">
                <div class="navbar-logo">M</div>
                <div class="brand-text">
                    <span class="brand-name">IMMA</span>
                    <span class="brand-subtitle">Endirek Malzeme Y√∂netimi</span>
                </div>
            </a>
                        <ul class="navbar-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="material-list.html" class="nav-link">
                        <span class="nav-icon">üì¶</span>
                        Ana Veriler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-list.html" class="dropdown-item">Malzeme Listesi</a>
                        <a href="supplier-list.html" class="dropdown-item">Tedarik√ßi Listesi</a>
                        <a href="storage-type-list.html" class="dropdown-item">Depo Tipi Listesi</a>
                        <a href="number-series.html" class="dropdown-item">Numara Serileri</a>
                        <a href="material-group.html" class="dropdown-item">Malzeme Gruplarƒ±</a>
                        <a href="unit-of-measure-list.html" class="dropdown-item">√ñl√ß√º Birimleri</a>
                        <a href="department-cost-center-list.html" class="dropdown-item">Departman-Masraf Merkezi</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="mrp.html" class="nav-link">
                        <span class="nav-icon">üìà</span>
                        MRP
                    </a>
                </li>
                <li class="nav-item">
                    <a href="srm-list.html" class="nav-link">
                        <span class="nav-icon">üõí</span>
                        Satƒ±nalma
                    </a>
                    <div class="dropdown-menu">
                        <a href="srm-list.html" class="dropdown-item">Talep Listesi</a>
                        <a href="goods-receipt.html" class="dropdown-item">Mal Kabul</a>
                        <a href="po-list.html" class="dropdown-item">Satƒ±nalma Sipari≈üleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="budget-management.html" class="nav-link">
                        <span class="nav-icon">üí∞</span>
                        Budget
                    </a>
                    <div class="dropdown-menu">
                        <a href="budget-management.html" class="dropdown-item">B√ºt√ße Y√∂netimi</a>
                        <a href="budget-preference.html" class="dropdown-item">B√ºt√ße Tercihleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="material-request-list.html" class="nav-link">
                        <span class="nav-icon">üìã</span>
                        Talepler
                    </a>
                    <div class="dropdown-menu">
                        <a href="material-request-list.html" class="dropdown-item">Talep Listesi</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="transfer-list.html" class="nav-link active">
                        <span class="nav-icon">üè≠</span>
                        Stock
                    </a>
                    <div class="dropdown-menu">
                        <a href="direct-issue.html" class="dropdown-item">Doƒürudan √áƒ±kƒ±≈ü</a>
                        <a href="warehouse-transfer.html" class="dropdown-item">Depo Transferi</a>
                        <a href="transfer-list.html" class="dropdown-item">Transfer Listesi</a>
                        <a href="inventory-counting.html" class="dropdown-item">Sayƒ±m ƒ∞≈ülemleri</a>
                        <a href="single-material-counting.html" class="dropdown-item active">Tekli Malzeme Sayƒ±mƒ±</a>
                        <a href="scrapping.html" class="dropdown-item">Hurda ƒ∞≈ülemleri</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="user-material-limit-list.html" class="nav-link">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        Ayarlar
                    </a>
                    <div class="dropdown-menu">
                        <a href="user-material-limit-list.html" class="dropdown-item">Kullanƒ±cƒ± Malzeme Limitleri</a>
                        <a href="accounting-confirmation.html" class="dropdown-item">Muhasebe Onaylarƒ±</a>
                    </div>
                </li>
            </ul>
            <div class="navbar-user">
                <span class="user-name">Ahmet Yƒ±lmaz</span>
                <div class="user-avatar">AY</div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="modern-container">
        <div class="page-header">
            <div>
                <h1 class="page-title">Tekli Malzeme Sayƒ±mƒ±</h1>
                <p class="page-subtitle">Stock > Tekli Malzeme Sayƒ±mƒ±</p>
            </div>
            <div class="page-actions">
                <button class="btn btn-outline" onclick="window.location.href='inventory-counting.html'">
                    ‚Üê Sayƒ±m ƒ∞≈ülemleri
                </button>
            </div>
        </div>

        <!-- Developer Notes - Main -->


        <!-- Material Search Section (CVCD Step 1) -->
        <div class="card" id="searchSection">
            <div class="card-header">
                <h3>Material Search and Select</h3>
            </div>
            <div class="card-body">
                <div class="form-row">
                    <div class="form-group col-5">
                        <label>Material number / Tanƒ±m <span class="required">*</span></label>
                        <div class="autocomplete-wrapper">
                            <input type="text" class="form-control autocomplete-input" id="materialSearch"
                                   placeholder="En az 2 karakter yazarak arayƒ±n..." autocomplete="off">
                            <div class="autocomplete-results" id="materialResults"></div>
                        </div>
                        <small class="form-hint">Malzeme numarasƒ± veya a√ßƒ±klama yazarak arama yapƒ±n</small>
                    </div>
                    <div class="form-group col-3">
                        <label>Storage</label>
                        <select class="form-control" id="warehouseFilter">
                            <option value="">T√ºm Storagelar</option>
                            <option value="central">Merkez Storage</option>
                            <option value="line1">Hat 1 Deposu</option>
                            <option value="line2">Hat 2 Deposu</option>
                        </select>
                    </div>
                    <div class="form-group col-3">
                        <label>Location</label>
                        <select class="form-control" id="locationFilter">
                            <option value="">T√ºm√º</option>
                            <option value="A">A B√∂lgesi</option>
                            <option value="B">B B√∂lgesi</option>
                            <option value="C">C B√∂lgesi</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Counting Form Section (CVCD Step 2 - Hidden by default) -->
        <div class="card" id="countingSection" style="display: none;">
            <div class="card-header">
                <h3>Material Counting Form</h3>
                <button class="btn btn-sm btn-outline" id="backToSearch">‚Üê Select Different Material</button>
            </div>
            <div class="card-body">
                <!-- Material Info Display -->
                <div class="info-section">
                    <h4>Material Information</h4>
                    <div class="form-row">
                        <div class="form-group col-3">
                            <label>Material number</label>
                            <div class="form-control-static" id="displayMaterialNo">-</div>
                        </div>
                        <div class="form-group col-5">
                            <label>Material description</label>
                            <div class="form-control-static" id="displayMaterialTitle">-</div>
                        </div>
                        <div class="form-group col-4">
                            <label>Stock Kayƒ±t No (Stock Record ID)</label>
                            <div class="form-control-static" id="displayStockRecordId">-</div>
                        </div>
                    </div>
                </div>

                <!-- Current Stock Information -->
                <div class="info-section" style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin: 20px 0;">
                    <h4>Stock Information</h4>
                    <div class="form-row">
                        <div class="form-group col-2">
                            <label>Storage</label>
                            <div class="form-control-static" id="displayStorage">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Location</label>
                            <div class="form-control-static" id="displayLocation">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Bin</label>
                            <div class="form-control-static" id="displayBin">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>System Stock Quantity</label>
                            <div class="form-control-static" id="displayStockQty" style="font-weight: bold; color: #0066cc;">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Unit of measure</label>
                            <div class="form-control-static" id="displayUoM">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Cost Center</label>
                            <div class="form-control-static" id="displayCostId">-</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-2">
                            <label>Currency</label>
                            <div class="form-control-static" id="displayCurrency">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Unit value (TRY)</label>
                            <div class="form-control-static" id="displayUnitValue">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Unit value (EUR)</label>
                            <div class="form-control-static" id="displayUnitValueEUR">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Total Stock Value</label>
                            <div class="form-control-static" id="displayTotalValue" style="font-weight: bold; color: #28a745;">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Cost Date</label>
                            <div class="form-control-static" id="displayCostingDate">-</div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-2">
                            <label>Open material requests</label>
                            <div class="form-control-static" id="displayOpenMaterialRequest">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Open SRM requests</label>
                            <div class="form-control-static" id="displayOpenSRM">-</div>
                        </div>
                        <div class="form-group col-2">
                            <label>Open purchasing orders</label>
                            <div class="form-control-static" id="displayOpenPO">-</div>
                        </div>
                        <div class="form-group col-3">
                            <label>Goods Movement ID</label>
                            <div class="form-control-static" id="displayGoodsMovementId">-</div>
                        </div>
                        <div class="form-group col-3">
                            <label>Approved by user info / Date</label>
                            <div class="form-control-static" id="displayConfirmedBy">-</div>
                        </div>
                    </div>
                </div>

                <!-- Correction Document Info -->
                <div class="info-section">
                    <h4>Correction Document Information</h4>
                    <div class="form-row">
                        <div class="form-group col-3">
                            <label>Correction document Id <span class="required">*</span></label>
                            <input type="text" class="form-control" id="correctionDocId"
                                   value="IC-SMC-2025-0001" readonly>
                        </div>
                        <div class="form-group col-5">
                            <label>Correction document title <span class="required">*</span></label>
                            <input type="text" class="form-control" id="correctionDocTitle"
                                   placeholder="√ñrn: Merkez Storage Spot Counting - Motor Rulman">
                        </div>
                        <div class="form-group col-4">
                            <label>Correction type <span class="required">*</span></label>
                            <select class="form-control" id="correctionType">
                                <option value="">Se√ßiniz...</option>
                                <option value="spot_count">Spot Counting</option>
                                <option value="recount">Yeniden Counting</option>
                                <option value="discrepancy">Differences by quantity ƒ∞ncelemesi</option>
                                <option value="emergency">Acil D√ºzeltme</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Counting Input -->
                <div class="info-section" style="background: #fff3cd; padding: 20px; border-radius: 6px; border: 2px solid #ffc107;">
                    <h4>Physical Counting (Warehouse Manager)</h4>
                    <div class="form-row">
                        <div class="form-group col-2">
                            <label>Counting value <span class="required">*</span></label>
                            <input type="number" class="form-control" id="countingValue"
                                   placeholder="Counting sonucu" step="0.01" min="0">
                        </div>
                        <div class="form-group col-2">
                            <label>Differences by quantity</label>
                            <input type="text" class="form-control" id="difference" readonly
                                   style="font-weight: bold; background: #e9ecef;">
                        </div>
                        <div class="form-group col-2">
                            <label>TRY differences value</label>
                            <input type="text" class="form-control" id="differenceValue" readonly
                                   style="font-weight: bold; background: #e9ecef;">
                        </div>
                        <div class="form-group col-2">
                            <label>Euro differences value</label>
                            <input type="text" class="form-control" id="differenceValueEUR" readonly
                                   style="font-weight: bold; background: #e9ecef;">
                        </div>
                        <div class="form-group col-4">
                            <label>Differences status</label>
                            <div class="form-control-static" id="differenceStatus">
                                <span class="badge badge-secondary">Counting bekleniyor</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-12">
                            <label>Differences reason <span id="reasonRequired" style="display: none;" class="required">*</span></label>
                            <textarea class="form-control" id="countReason" rows="3"
                                      placeholder="Differences by quantity tespit edildiƒüinde gerek√ße giriniz..."></textarea>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-3">
                            <label>Counting Date <span class="required">*</span></label>
                            <input type="datetime-local" class="form-control" id="countDate"
                                   value="2025-12-15T14:30">
                        </div>
                        <div class="form-group col-3">
                            <label>Counted by (Warehouse Manager)</label>
                            <input type="text" class="form-control" id="countedBy"
                                   value="Hasan Kara" readonly>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="form-actions">
                    <button class="btn btn-outline" id="cancelButton">ƒ∞ptal</button>
                    <button class="btn btn-secondary" id="saveDraftButton">Taslak Kaydet</button>
                    <button class="btn btn-primary" id="submitCountButton">
                        ‚úÖ Sayƒ±mƒ± Onayla ve Stocku D√ºzelt
                    </button>
                </div>
            </div>
        </div>

        <!-- Database Operations -->



    </main>

    <style>
        /* Autocomplete Styles */
        .autocomplete-wrapper {
            position: relative;
            width: 100%;
        }
        .autocomplete-input {
            width: 100%;
        }
        .autocomplete-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: none;
        }
        .autocomplete-results.show {
            display: block;
        }
        .autocomplete-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.15s;
        }
        .autocomplete-item:last-child {
            border-bottom: none;
        }
        .autocomplete-item:hover,
        .autocomplete-item.selected {
            background-color: #f0f7ff;
        }
        .autocomplete-item .material-info {
            display: flex;
            flex-direction: column;
        }
        .autocomplete-item .material-number {
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        .autocomplete-item .material-desc {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }
        .autocomplete-item .stock-info {
            text-align: right;
            font-size: 12px;
        }
        .autocomplete-item .stock-qty {
            font-weight: 600;
            color: #28a745;
        }
        .autocomplete-item .stock-location {
            color: #666;
            margin-top: 2px;
        }
        .autocomplete-no-results {
            padding: 15px;
            text-align: center;
            color: #666;
            font-style: italic;
        }
        .form-hint {
            font-size: 11px;
            color: #888;
            margin-top: 4px;
            display: block;
        }

        .info-section {
            margin-bottom: 20px;
        }
        .info-section h4 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #333;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 8px;
        }
        .form-control-static {
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 4px;
            min-height: 38px;
            display: flex;
            align-items: center;
        }
        .badge {
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        .badge-secondary {
            background: #6c757d;
            color: white;
        }
        .badge-success {
            background: #28a745;
            color: white;
        }
        .badge-warning {
            background: #ffc107;
            color: #000;
        }
        .badge-danger {
            background: #dc3545;
            color: white;
        }
        #countingSection .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>

    <script>
        // Sample material data for search - with all Data Structure fields
        const materialDatabase = [
            {
                materialNo: 'MAT-2024-0156',
                materialTitle: 'SKF 6208-2RS Rulman',
                stockRecordId: 'STK-0156-001',
                storage: 'Merkez Storage',
                location: 'A-12',
                bin: 'Bin-05',
                stockQty: 45,
                uom: 'Adet',
                currency: 'TRY',
                unitValue: 125.50,
                unitValueEUR: 3.50,
                totalValue: 5647.50,
                costId: 'CC-MAINT-001',
                costingDate: '2025-12-01',
                openMaterialRequest: 3,
                openSRM: 1,
                openPO: 2,
                goodsMovementId: null,
                confirmedBy: null,
                confirmedDate: null
            },
            {
                materialNo: 'MAT-2024-0089',
                materialTitle: 'Tork Somunu M12x1.5',
                stockRecordId: 'STK-0089-001',
                storage: 'Merkez Storage',
                location: 'B-08',
                bin: 'Kutu-23',
                stockQty: 320,
                uom: 'Adet',
                currency: 'TRY',
                unitValue: 3.75,
                unitValueEUR: 0.10,
                totalValue: 1200.00,
                costId: 'CC-PROD-002',
                costingDate: '2025-11-15',
                openMaterialRequest: 0,
                openSRM: 2,
                openPO: 0,
                goodsMovementId: 'GM-2025-00456',
                confirmedBy: 'Ahmet Yƒ±lmaz',
                confirmedDate: '2025-12-10'
            },
            {
                materialNo: 'MAT-2024-0234',
                materialTitle: 'Hidrolik Yaƒü ISO VG 46 - 20L',
                stockRecordId: 'STK-0234-001',
                storage: 'Hat 1 Deposu',
                location: 'C-15',
                bin: 'Zemin-02',
                stockQty: 12,
                uom: 'Bidon',
                currency: 'TRY',
                unitValue: 850.00,
                unitValueEUR: 23.60,
                totalValue: 10200.00,
                costId: 'CC-MAINT-001',
                costingDate: '2025-12-05',
                openMaterialRequest: 1,
                openSRM: 0,
                openPO: 1,
                goodsMovementId: null,
                confirmedBy: null,
                confirmedDate: null
            },
            {
                materialNo: 'MAT-2024-0345',
                materialTitle: 'V-Kayƒ±≈ü A-68',
                stockRecordId: 'STK-0345-001',
                storage: 'Merkez Storage',
                location: 'A-05',
                bin: 'Bin-12',
                stockQty: 85,
                uom: 'Adet',
                currency: 'TRY',
                unitValue: 45.00,
                unitValueEUR: 1.25,
                totalValue: 3825.00,
                costId: 'CC-MAINT-001',
                costingDate: '2025-12-08',
                openMaterialRequest: 2,
                openSRM: 0,
                openPO: 1,
                goodsMovementId: null,
                confirmedBy: null,
                confirmedDate: null
            },
            {
                materialNo: 'MAT-2024-0456',
                materialTitle: 'Elektrik Motoru 5.5kW',
                stockRecordId: 'STK-0456-001',
                storage: 'Hat 1 Deposu',
                location: 'B-03',
                bin: 'Zemin-05',
                stockQty: 3,
                uom: 'Adet',
                currency: 'TRY',
                unitValue: 8500.00,
                unitValueEUR: 236.00,
                totalValue: 25500.00,
                costId: 'CC-MAINT-002',
                costingDate: '2025-11-20',
                openMaterialRequest: 0,
                openSRM: 1,
                openPO: 0,
                goodsMovementId: null,
                confirmedBy: null,
                confirmedDate: null
            },
            {
                materialNo: 'MAT-2024-0567',
                materialTitle: 'Pn√∂matik Silindir 32x100',
                stockRecordId: 'STK-0567-001',
                storage: 'Hat 2 Deposu',
                location: 'A-02',
                bin: 'Bin-08',
                stockQty: 15,
                uom: 'Adet',
                currency: 'TRY',
                unitValue: 320.00,
                unitValueEUR: 8.90,
                totalValue: 4800.00,
                costId: 'CC-PROD-001',
                costingDate: '2025-12-10',
                openMaterialRequest: 1,
                openSRM: 0,
                openPO: 2,
                goodsMovementId: null,
                confirmedBy: null,
                confirmedDate: null
            },
            {
                materialNo: 'MAT-2024-0678',
                materialTitle: 'Kontakt√∂r 25A 3P',
                stockRecordId: 'STK-0678-001',
                storage: 'Hat 2 Deposu',
                location: 'C-01',
                bin: 'Kutu-15',
                stockQty: 28,
                uom: 'Adet',
                currency: 'TRY',
                unitValue: 185.00,
                unitValueEUR: 5.15,
                totalValue: 5180.00,
                costId: 'CC-ELEC-001',
                costingDate: '2025-12-12',
                openMaterialRequest: 0,
                openSRM: 0,
                openPO: 0,
                goodsMovementId: 'GM-2025-00789',
                confirmedBy: 'Mehmet Demir',
                confirmedDate: '2025-12-14'
            },
            {
                materialNo: 'MAT-2024-0789',
                materialTitle: 'Sƒ±zdƒ±rmazlƒ±k Contasƒ± DN100',
                stockRecordId: 'STK-0789-001',
                storage: 'Merkez Storage',
                location: 'C-08',
                bin: 'Bin-22',
                stockQty: 150,
                uom: 'Adet',
                currency: 'TRY',
                unitValue: 28.50,
                unitValueEUR: 0.79,
                totalValue: 4275.00,
                costId: 'CC-MAINT-001',
                costingDate: '2025-12-05',
                openMaterialRequest: 5,
                openSRM: 1,
                openPO: 0,
                goodsMovementId: null,
                confirmedBy: null,
                confirmedDate: null
            }
        ];

        let selectedMaterial = null;

        // Autocomplete elements
        const materialInput = document.getElementById('materialSearch');
        const materialResults = document.getElementById('materialResults');
        const warehouseFilter = document.getElementById('warehouseFilter');
        const locationFilter = document.getElementById('locationFilter');

        // Warehouse mapping
        const warehouseMap = {
            'central': 'Merkez Storage',
            'line1': 'Hat 1 Deposu',
            'line2': 'Hat 2 Deposu'
        };

        // Dynamic search on input
        materialInput.addEventListener('input', function() {
            const query = this.value.toLowerCase().trim();

            if (query.length < 2) {
                materialResults.classList.remove('show');
                return;
            }

            performSearch(query);
        });

        // Also filter when dropdown changes
        warehouseFilter.addEventListener('change', function() {
            const query = materialInput.value.toLowerCase().trim();
            if (query.length >= 2) {
                performSearch(query);
            }
        });

        locationFilter.addEventListener('change', function() {
            const query = materialInput.value.toLowerCase().trim();
            if (query.length >= 2) {
                performSearch(query);
            }
        });

        // Perform search and show results
        function performSearch(query) {
            let results = materialDatabase;

            // Apply text search
            if (query) {
                results = results.filter(m =>
                    m.materialNo.toLowerCase().includes(query) ||
                    m.materialTitle.toLowerCase().includes(query)
                );
            }

            // Apply warehouse filter
            const selectedWarehouse = warehouseFilter.value;
            if (selectedWarehouse) {
                results = results.filter(m => m.storage === warehouseMap[selectedWarehouse]);
            }

            // Apply location filter
            const selectedLocation = locationFilter.value;
            if (selectedLocation) {
                results = results.filter(m => m.location.startsWith(selectedLocation));
            }

            // Display results
            if (results.length === 0) {
                materialResults.innerHTML = '<div class="autocomplete-no-results">Sonu√ß bulunamadƒ±</div>';
            } else {
                materialResults.innerHTML = results.map(m => `
                    <div class="autocomplete-item" data-material='${JSON.stringify(m)}'>
                        <div class="material-info">
                            <span class="material-number">${m.materialNo}</span>
                            <span class="material-desc">${m.materialTitle}</span>
                        </div>
                        <div class="stock-info">
                            <div class="stock-qty">${m.stockQty} ${m.uom}</div>
                            <div class="stock-location">${m.storage} - ${m.location}</div>
                        </div>
                    </div>
                `).join('');
            }
            materialResults.classList.add('show');
        }

        // Handle item selection from dropdown
        materialResults.addEventListener('click', function(e) {
            const item = e.target.closest('.autocomplete-item');
            if (item) {
                const material = JSON.parse(item.dataset.material);
                selectMaterialFromDropdown(material);
            }
        });

        // Close results when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.autocomplete-wrapper')) {
                materialResults.classList.remove('show');
            }
        });

        // Select material from dropdown and load into form
        function selectMaterialFromDropdown(material) {
            materialInput.value = material.materialNo + ' - ' + material.materialTitle;
            materialResults.classList.remove('show');
            loadMaterialForCounting(material);
        }

        // Load material into counting form
        function loadMaterialForCounting(material) {
            selectedMaterial = material;

            // Populate material info
            document.getElementById('displayMaterialNo').textContent = material.materialNo;
            document.getElementById('displayMaterialTitle').textContent = material.materialTitle;
            document.getElementById('displayStockRecordId').textContent = material.stockRecordId;
            document.getElementById('displayStorage').textContent = material.storage;
            document.getElementById('displayLocation').textContent = material.location;
            document.getElementById('displayBin').textContent = material.bin;
            document.getElementById('displayStockQty').textContent = material.stockQty + ' ' + material.uom;
            document.getElementById('displayUoM').textContent = material.uom;
            document.getElementById('displayCurrency').textContent = material.currency;
            document.getElementById('displayUnitValue').textContent = material.unitValue.toLocaleString('tr-TR') + ' TRY';
            document.getElementById('displayUnitValueEUR').textContent = material.unitValueEUR.toFixed(2) + ' EUR';
            document.getElementById('displayTotalValue').textContent = material.totalValue.toLocaleString('tr-TR') + ' TRY';
            document.getElementById('displayCostId').textContent = material.costId;
            document.getElementById('displayCostingDate').textContent = material.costingDate || '-';
            document.getElementById('displayOpenMaterialRequest').textContent = material.openMaterialRequest;
            document.getElementById('displayOpenSRM').textContent = material.openSRM;
            document.getElementById('displayOpenPO').textContent = material.openPO;
            document.getElementById('displayGoodsMovementId').textContent = material.goodsMovementId || 'Yeni olu≈üturulacak';
            document.getElementById('displayConfirmedBy').textContent = material.confirmedBy ? (material.confirmedBy + ' - ' + material.confirmedDate) : 'Hen√ºz onaylanmadƒ±';

            // Auto-generate correction doc title
            const today = new Date().toLocaleDateString('tr-TR');
            document.getElementById('correctionDocTitle').value =
                `Tekli Counting - ${material.storage} - ${material.materialTitle} (${today})`;

            // Show counting section, hide search
            document.getElementById('searchSection').style.display = 'none';
            document.getElementById('countingSection').style.display = 'block';

            // Scroll to counting section
            document.getElementById('countingSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Back to search button
        document.getElementById('backToSearch').addEventListener('click', function() {
            if (confirm('Counting formundan √ßƒ±kmak istediƒüinize emin misiniz?\n\nGirilen veriler kaybolacak.')) {
                document.getElementById('searchSection').style.display = 'block';
                document.getElementById('countingSection').style.display = 'none';
                resetCountingForm();
                document.getElementById('searchSection').scrollIntoView({ behavior: 'smooth' });
            }
        });

        // Calculate difference when counting value changes
        document.getElementById('countingValue').addEventListener('input', function() {
            const countingValue = parseFloat(this.value) || 0;
            const systemQty = selectedMaterial ? selectedMaterial.stockQty : 0;
            const difference = countingValue - systemQty;
            const unitValue = selectedMaterial ? selectedMaterial.unitValue : 0;
            const unitValueEUR = selectedMaterial ? selectedMaterial.unitValueEUR : 0;
            const differenceValue = difference * unitValue;
            const differenceValueEUR = difference * unitValueEUR;

            // Update difference fields
            document.getElementById('difference').value = difference.toFixed(2);
            document.getElementById('differenceValue').value =
                differenceValue.toLocaleString('tr-TR') + ' TRY';
            document.getElementById('differenceValueEUR').value =
                differenceValueEUR.toFixed(2) + ' EUR';

            // Update status badge
            const statusDiv = document.getElementById('differenceStatus');
            const reasonRequired = document.getElementById('reasonRequired');

            if (difference === 0) {
                statusDiv.innerHTML = '<span class="badge badge-success">‚úÖ Differences by quantity Yok</span>';
                reasonRequired.style.display = 'none';
            } else if (difference > 0) {
                statusDiv.innerHTML = `<span class="badge badge-warning">‚¨ÜÔ∏è Fazla: +${difference.toFixed(2)}</span>`;
                reasonRequired.style.display = 'inline';
            } else {
                statusDiv.innerHTML = `<span class="badge badge-danger">‚¨áÔ∏è Eksik: ${difference.toFixed(2)}</span>`;
                reasonRequired.style.display = 'inline';
            }
        });

        // Submit count button
        document.getElementById('submitCountButton').addEventListener('click', function() {
            if (!validateCountingForm()) {
                return;
            }

            const countingValue = parseFloat(document.getElementById('countingValue').value);
            const systemQty = selectedMaterial.stockQty;
            const difference = countingValue - systemQty;
            const correctionDocTitle = document.getElementById('correctionDocTitle').value;
            const correctionType = document.getElementById('correctionType').value;
            const reason = document.getElementById('countReason').value;

            let message = `Counting onaylanacak ve stok d√ºzeltmesi yapƒ±lacak!\n\n`;
            message += `Malzeme: ${selectedMaterial.materialNo} - ${selectedMaterial.materialTitle}\n`;
            message += `Storage/Location: ${selectedMaterial.storage} - ${selectedMaterial.location} - ${selectedMaterial.bin}\n\n`;
            message += `Sistem Stock: ${systemQty} ${selectedMaterial.uom}\n`;
            message += `Counting value: ${countingValue} ${selectedMaterial.uom}\n`;
            message += `Differences by quantity: ${difference.toFixed(2)} ${selectedMaterial.uom}\n\n`;

            if (difference !== 0) {
                const differenceValue = difference * selectedMaterial.unitValue;
                message += `Parasal Differences by quantity: ${differenceValue.toLocaleString('tr-TR')} ${selectedMaterial.currency}\n`;
                message += `Gerek√ße: ${reason}\n\n`;
            }

            message += `Devam etmek istiyor musunuz?`;

            if (confirm(message)) {
                // Simulate API call
                setTimeout(() => {
                    alert(`‚úÖ Counting ba≈üarƒ±yla kaydedildi!\n\nCorrection document Id: ${document.getElementById('correctionDocId').value}\n\nStock g√ºncellendi:\n${systemQty} ‚Üí ${countingValue} ${selectedMaterial.uom}`);

                    // Reset and go back to search
                    document.getElementById('searchSection').style.display = 'block';
                    document.getElementById('countingSection').style.display = 'none';
                    resetCountingForm();
                    document.getElementById('searchSection').scrollIntoView({ behavior: 'smooth' });
                }, 500);
            }
        });

        // Save draft button
        document.getElementById('saveDraftButton').addEventListener('click', function() {
            const correctionDocId = document.getElementById('correctionDocId').value;

            if (confirm('Counting taslak olarak kaydedilecek.\n\nDaha sonra devam edebilirsiniz.\n\nDevam etmek istiyor musunuz?')) {
                alert(`üíæ Taslak kaydedildi!\n\nDok√ºman No: ${correctionDocId}\n\nDaha sonra "Sayƒ±m ƒ∞≈ülemleri" ekranƒ±ndan devam edebilirsiniz.`);

                // Reset and go back to search
                document.getElementById('searchSection').style.display = 'block';
                document.getElementById('countingSection').style.display = 'none';
                resetCountingForm();
            }
        });

        // Cancel button
        document.getElementById('cancelButton').addEventListener('click', function() {
            if (confirm('Counting iptal edilecek!\n\nGirilen veriler kaybolacak.\n\nDevam etmek istiyor musunuz?')) {
                document.getElementById('searchSection').style.display = 'block';
                document.getElementById('countingSection').style.display = 'none';
                resetCountingForm();
                document.getElementById('searchSection').scrollIntoView({ behavior: 'smooth' });
            }
        });

        // Form validation
        function validateCountingForm() {
            const correctionDocTitle = document.getElementById('correctionDocTitle').value.trim();
            const correctionType = document.getElementById('correctionType').value;
            const countingValue = document.getElementById('countingValue').value;
            const difference = parseFloat(document.getElementById('difference').value) || 0;
            const reason = document.getElementById('countReason').value.trim();

            if (!correctionDocTitle) {
                alert('‚ö†Ô∏è L√ºtfen d√ºzeltme dok√ºman ba≈ülƒ±ƒüƒ± giriniz.');
                document.getElementById('correctionDocTitle').focus();
                return false;
            }

            if (!correctionType) {
                alert('‚ö†Ô∏è L√ºtfen d√ºzeltme tipini se√ßiniz.');
                document.getElementById('correctionType').focus();
                return false;
            }

            if (!countingValue || countingValue === '') {
                alert('‚ö†Ô∏è L√ºtfen sayƒ±m deƒüerini giriniz.');
                document.getElementById('countingValue').focus();
                return false;
            }

            if (difference !== 0 && !reason) {
                alert('‚ö†Ô∏è Differences by quantity tespit edildiƒüi i√ßin gerek√ße girmeniz zorunludur.');
                document.getElementById('countReason').focus();
                return false;
            }

            return true;
        }

        // Reset counting form
        function resetCountingForm() {
            selectedMaterial = null;
            document.getElementById('correctionDocTitle').value = '';
            document.getElementById('correctionType').value = '';
            document.getElementById('countingValue').value = '';
            document.getElementById('difference').value = '';
            document.getElementById('differenceValue').value = '';
            document.getElementById('countReason').value = '';
            document.getElementById('differenceStatus').innerHTML = '<span class="badge badge-secondary">Counting bekleniyor</span>';
            document.getElementById('reasonRequired').style.display = 'none';

            // Generate new correction doc ID
            const newDocId = 'IC-SMC-2025-' + String(Math.floor(Math.random() * 10000)).padStart(4, '0');
            document.getElementById('correctionDocId').value = newDocId;
        }

        // Handle keyboard navigation in autocomplete
        materialInput.addEventListener('keydown', function(e) {
            const items = materialResults.querySelectorAll('.autocomplete-item');
            const selected = materialResults.querySelector('.autocomplete-item.selected');

            if (e.key === 'ArrowDown') {
                e.preventDefault();
                if (!selected && items.length > 0) {
                    items[0].classList.add('selected');
                } else if (selected && selected.nextElementSibling) {
                    selected.classList.remove('selected');
                    selected.nextElementSibling.classList.add('selected');
                    selected.nextElementSibling.scrollIntoView({ block: 'nearest' });
                }
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                if (selected && selected.previousElementSibling) {
                    selected.classList.remove('selected');
                    selected.previousElementSibling.classList.add('selected');
                    selected.previousElementSibling.scrollIntoView({ block: 'nearest' });
                }
            } else if (e.key === 'Enter') {
                e.preventDefault();
                if (selected) {
                    const material = JSON.parse(selected.dataset.material);
                    selectMaterialFromDropdown(material);
                } else if (items.length === 1) {
                    // Auto-select if only one result
                    const material = JSON.parse(items[0].dataset.material);
                    selectMaterialFromDropdown(material);
                }
            } else if (e.key === 'Escape') {
                materialResults.classList.remove('show');
            }
        });

        // Initialize correction doc ID
        window.addEventListener('load', function() {
            const newDocId = 'IC-SMC-2025-' + String(Math.floor(Math.random() * 10000)).padStart(4, '0');
            document.getElementById('correctionDocId').value = newDocId;
        });
    </script>

    <!-- DEVELOPER DOCUMENTATION PANEL -->
    <div id="devDocsPanel" class="dev-docs-panel">
        <button class="dev-docs-toggle" onclick="toggleDevDocs()">üìã Geli≈ütirici Dok√ºmantasyonu</button>
        <div class="dev-docs-content" id="devDocsContent">
            <div class="dev-docs-header">
                <h2>üìã 23 IC-SMC - Single Material Counting</h2>
                <button class="dev-docs-close" onclick="toggleDevDocs()">‚úï</button>
            </div>
            <div class="dev-docs-body">
                <div class="dev-docs-tabs">
                    <button class="dev-tab active" onclick="showDevTab('dataStructure')">Veri Yapƒ±larƒ±</button>
                    <button class="dev-tab" onclick="showDevTab('formFields')">Form Alanlarƒ±</button>
                    <button class="dev-tab" onclick="showDevTab('businessRules')">ƒ∞≈ü Kurallarƒ±</button>
                    <button class="dev-tab" onclick="showDevTab('workflow')">ƒ∞≈ü Akƒ±≈üƒ±</button>
                </div>
                <div id="dataStructure" class="dev-tab-content active">
                    <h3>Inventory Counting Header Tablosu</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>Uzunluk</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Inventory Counting Header Id</td><td>int</td><td>8</td><td>Primary key</td></tr>
                            <tr><td>Correction type</td><td>char</td><td>1</td><td>D√ºzeltme tipi</td></tr>
                            <tr><td>Creation date time</td><td>datetime</td><td>-</td><td>Olu≈üturma tarihi</td></tr>
                            <tr><td>Created by user info</td><td>int</td><td>8</td><td>Olu≈üturan</td></tr>
                            <tr><td>Created for user info</td><td>int</td><td>8</td><td>Sorumlu</td></tr>
                            <tr><td>Counted by user info</td><td>int</td><td>8</td><td>Sayan ki≈üi</td></tr>
                            <tr><td>Entered by user info</td><td>int</td><td>8</td><td>Giren ki≈üi</td></tr>
                            <tr><td>Document group Id</td><td>int</td><td>8</td><td>Dok√ºman grubu</td></tr>
                            <tr><td>Correction finalized check</td><td>bool</td><td>-</td><td>Tamamlandƒ± mƒ±</td></tr>
                        </tbody>
                    </table>
                    <h3>Inventory Counting Item Tablosu</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>Tip</th><th>Uzunluk</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Inventory Counting item id</td><td>int</td><td>8</td><td>Primary key</td></tr>
                            <tr><td>Inventory Counting item number</td><td>int</td><td>4</td><td>Sƒ±ra no</td></tr>
                            <tr><td>Material number</td><td>text</td><td>13</td><td>Malzeme no</td></tr>
                            <tr><td>Stock record Id</td><td>int</td><td>8</td><td>Stok kaydƒ± ref.</td></tr>
                            <tr><td>Stock quantity</td><td>float</td><td>15</td><td>Sistem stoƒüu</td></tr>
                            <tr><td>Counting result quantity</td><td>float</td><td>15</td><td>Sayƒ±m sonucu</td></tr>
                        </tbody>
                    </table>
                </div>
                <div id="formFields" class="dev-tab-content">
                    <h3>Material Information (Read-only)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>ID</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Material number</td><td>displayMaterialNo</td><td>Malzeme numarasƒ±</td></tr>
                            <tr><td>Material description</td><td>displayMaterialTitle</td><td>Malzeme a√ßƒ±klamasƒ±</td></tr>
                            <tr><td>Stock Record ID</td><td>displayStockRecordId</td><td>Stok kaydƒ± referans numarasƒ±</td></tr>
                        </tbody>
                    </table>
                    <h3>Stock Information (Read-only)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>ID</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Storage</td><td>displayStorage</td><td>Depo adƒ±</td></tr>
                            <tr><td>Location</td><td>displayLocation</td><td>Lokasyon kodu</td></tr>
                            <tr><td>Bin</td><td>displayBin</td><td>Bin numarasƒ±</td></tr>
                            <tr><td>System Stock Quantity</td><td>displayStockQty</td><td>Sistem stok miktarƒ±</td></tr>
                            <tr><td>Unit of measure</td><td>displayUoM</td><td>√ñl√ß√º birimi</td></tr>
                            <tr><td>Currency</td><td>displayCurrency</td><td>Para birimi</td></tr>
                            <tr><td>Unit value (TRY)</td><td>displayUnitValue</td><td>Birim fiyat TRY</td></tr>
                            <tr><td>Unit value (EUR)</td><td>displayUnitValueEUR</td><td>Birim fiyat EUR</td></tr>
                            <tr><td>Total Stock Value</td><td>displayTotalValue</td><td>Toplam stok deƒüeri</td></tr>
                            <tr><td>Cost Center</td><td>displayCostId</td><td>Masraf merkezi</td></tr>
                            <tr><td>Cost Date</td><td>displayCostingDate</td><td>Maliyet tarihi</td></tr>
                            <tr><td>Open material requests</td><td>displayOpenMaterialRequest</td><td>A√ßƒ±k malzeme talepleri sayƒ±sƒ±</td></tr>
                            <tr><td>Open SRM requests</td><td>displayOpenSRM</td><td>A√ßƒ±k SRM talepleri sayƒ±sƒ±</td></tr>
                            <tr><td>Open purchasing orders</td><td>displayOpenPO</td><td>A√ßƒ±k satƒ±nalma sipari≈üleri sayƒ±sƒ±</td></tr>
                            <tr><td>Goods Movement ID</td><td>displayGoodsMovementId</td><td>Mal hareketi referansƒ±</td></tr>
                            <tr><td>Approved by user info / Date</td><td>displayConfirmedBy</td><td>Onaylayan ve tarih</td></tr>
                        </tbody>
                    </table>
                    <h3>Correction Document Information</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>ID</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Correction document Id *</td><td>correctionDocId</td><td>readonly</td><td>Otomatik olu≈üturulan d√ºzeltme belge no (IC-SMC-XXXX)</td></tr>
                            <tr><td>Correction document title *</td><td>correctionDocTitle</td><td>input</td><td>D√ºzeltme belge ba≈ülƒ±ƒüƒ±</td></tr>
                            <tr><td>Correction type *</td><td>correctionType</td><td>select</td><td>D√ºzeltme tipi (spot_count, recount, discrepancy, emergency)</td></tr>
                        </tbody>
                    </table>
                    <h3>Physical Counting (Warehouse Manager)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Alan</th><th>ID</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>Counting value *</td><td>countingValue</td><td>number input</td><td>Fiziksel sayƒ±m sonucu</td></tr>
                            <tr><td>Differences by quantity</td><td>difference</td><td>readonly</td><td>Fark miktarƒ± (hesaplanan)</td></tr>
                            <tr><td>TRY differences value</td><td>differenceValue</td><td>readonly</td><td>TRY fark deƒüeri (hesaplanan)</td></tr>
                            <tr><td>Euro differences value</td><td>differenceValueEUR</td><td>readonly</td><td>EUR fark deƒüeri (hesaplanan)</td></tr>
                            <tr><td>Differences status</td><td>differenceStatus</td><td>badge</td><td>Fark durumu (Yok/Fazla/Eksik)</td></tr>
                            <tr><td>Differences reason</td><td>countReason</td><td>textarea</td><td>Fark gerek√ßesi (fark varsa zorunlu)</td></tr>
                            <tr><td>Counting Date *</td><td>countDate</td><td>datetime-local</td><td>Sayƒ±m tarihi</td></tr>
                            <tr><td>Counted by</td><td>countedBy</td><td>readonly</td><td>Sayan ki≈üi (Warehouse Manager)</td></tr>
                        </tbody>
                    </table>
                    <h3>Correction Types (D√ºzeltme Tipleri)</h3>
                    <table class="dev-table">
                        <thead><tr><th>Value</th><th>Label</th><th>A√ßƒ±klama</th></tr></thead>
                        <tbody>
                            <tr><td>spot_count</td><td>Spot Counting</td><td>Anlƒ±k/rastgele sayƒ±m</td></tr>
                            <tr><td>recount</td><td>Yeniden Counting</td><td>Tekrar sayƒ±m</td></tr>
                            <tr><td>discrepancy</td><td>Differences by quantity ƒ∞ncelemesi</td><td>Fark tespit sonrasƒ± inceleme</td></tr>
                            <tr><td>emergency</td><td>Acil D√ºzeltme</td><td>Acil stok d√ºzeltmesi</td></tr>
                        </tbody>
                    </table>
                </div>
                <div id="businessRules" class="dev-tab-content">
                    <div class="rules-section">
                        <h4>Envanter D√ºzeltmeleri ƒ∞≈ü Kurallarƒ±</h4>
                        <ul>
                            <li><strong>Kural 1:</strong> A√ßƒ±k sayƒ±m belgesi varsa etkilenen malzemeler i√ßin yeni malzeme talebi engellenir ancak onay s√ºreci devam edebilmelidir</li>
                            <li><strong>Kural 2:</strong> Sayƒ±m belgesi mevcut stok miktarlarƒ±nƒ± i√ßermemelidir</li>
                            <li><strong>Kural 3:</strong> Tekli malzeme envanter d√ºzeltmesi i√ßin onay s√ºreci olmayacaktƒ±r</li>
                            <li><strong>Kural 4:</strong> Sayƒ±m bin bazƒ±nda yapƒ±ldƒ±ƒüƒ±ndan sayƒ±m belgesi kapsamƒ± i√ßin se√ßim listesi bin numaralarƒ±na g√∂re ayrƒ±lmƒ±≈ü bilgi i√ßerecektir</li>
                            <li><strong>Kural 5:</strong> Diƒüer ve hurda envanter d√ºzeltmeleri i√ßin onaylayan y√∂netici malzeme grubuna baƒülƒ± kayƒ±ttan se√ßilecektir. S√ºre√ß endirek ve GPS malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan ba≈ülatƒ±lacak ve muhasebe ile ilgiliyse muhasebe endirek ve GPS sorumlu kullanƒ±cƒ±sƒ± tarafƒ±ndan tamamlanacaktƒ±r.</li>
                            <li><strong>Kural 6:</strong> Ek belge zorunludur</li>
                            <li><strong>Kural 7:</strong> A√ßƒ±klama zorunludur</li>
                            <li><strong>Kural 8:</strong> Onay sƒ±rasƒ± malzeme grubuna baƒülƒ± kayƒ±ttaki gibi takip edilecektir (onay sƒ±rasƒ±, departman kodu, malzeme grubu)</li>
                            <li><strong>Kural 9:</strong> Stok transferleri ile d√ºzeltmeler yalnƒ±zca malzemenin t√ºm stoƒüu aynƒ± sayƒ±m belgesi i√ßinde sayƒ±ma se√ßildiƒüinde hesaplanƒ±r. Bir bin'deki eksik miktarƒ± ba≈üka bir bin'deki fazla miktardan kar≈üƒ±lamak i√ßin √∂neriler olu≈üturulacaktƒ±r.</li>
                            <li><strong>Kural 10:</strong> T√ºm geri almalar yanlƒ±≈ülƒ±kla yapƒ±lan bir i≈ülemin d√ºzeltilmesidir. Admin kullanƒ±cƒ± tarafƒ±ndan yapƒ±labilir</li>
                            <li><strong>Kural 11:</strong> Hurda ve diƒüer d√ºzeltmeler i√ßin en az bir y√∂netici onaylayƒ±cƒ± olarak eklenmelidir. Bu belge endirek malzeme anahtar kullanƒ±cƒ±sƒ± tarafƒ±ndan olu≈üturulabilir ve onaylayƒ±cƒ± eklenebilir.</li>
                        </ul>
                    </div>
                </div>
                <div id="workflow" class="dev-tab-content">
                    <div class="rules-section">
                        <h4>ƒ∞≈ü Akƒ±≈üƒ±</h4>
                        <ol style="padding-left:20px;">
                            <li>Malzeme arama (3+ karakter)</li>
                            <li>Depo/Lokasyon filtresi (opsiyonel)</li>
                            <li>Stok kaydƒ± se√ßimi</li>
                            <li>Fiziksel sayƒ±m giri≈üi</li>
                            <li>Fark varsa gerek√ße giri≈üi</li>
                            <li>Sayƒ±m onayƒ± veya taslak kaydet</li>
                        </ol>
                    </div>
                    <div class="rules-section">
                        <h4>Hareket Tipleri</h4>
                        <table class="dev-table">
                            <thead><tr><th>Kod</th><th>Tip</th><th>A√ßƒ±klama</th></tr></thead>
                            <tbody>
                                <tr><td>8</td><td>Inventory positive record</td><td>Fazla stok</td></tr>
                                <tr><td>9</td><td>Inventory negative record</td><td>Eksik stok</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>.dev-docs-panel{position:fixed;bottom:0;left:0;right:0;z-index:9999;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.dev-docs-toggle{width:100%;padding:12px 20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;cursor:pointer;font-size:14px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:8px}.dev-docs-toggle:hover{background:linear-gradient(135deg,#5a6fd6 0%,#6a4190 100%)}.dev-docs-content{display:none;background:#1a1a2e;color:#eee;max-height:70vh;overflow-y:auto}.dev-docs-content.active{display:block}.dev-docs-header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:#16213e;border-bottom:2px solid #667eea}.dev-docs-header h2{margin:0;font-size:16px;color:#fff}.dev-docs-close{background:#e74c3c;color:#fff;border:none;width:30px;height:30px;border-radius:50%;cursor:pointer;font-size:16px}.dev-docs-body{padding:20px}.dev-docs-tabs{display:flex;gap:10px;margin-bottom:20px;border-bottom:2px solid #333;padding-bottom:10px}.dev-tab{padding:8px 16px;background:#2d2d44;color:#aaa;border:none;border-radius:6px 6px 0 0;cursor:pointer;font-size:13px}.dev-tab.active,.dev-tab:hover{background:#667eea;color:#fff}.dev-tab-content{display:none}.dev-tab-content.active{display:block}.dev-table{width:100%;border-collapse:collapse;margin:15px 0;font-size:13px}.dev-table th,.dev-table td{padding:10px;text-align:left;border:1px solid #333}.dev-table th{background:#2d2d44;color:#667eea;font-weight:600}.dev-table tr:nth-child(even){background:#1f1f35}.rules-section{margin-bottom:20px}.rules-section h4{color:#667eea;margin-bottom:10px;font-size:14px}.rules-section ul,.rules-section ol{margin:0;padding-left:20px}.rules-section li{margin-bottom:6px;line-height:1.5;font-size:13px}</style>
    <script>function toggleDevDocs(){document.getElementById('devDocsContent').classList.toggle('active')}function showDevTab(tabId){document.querySelectorAll('.dev-tab-content').forEach(c=>c.classList.remove('active'));document.querySelectorAll('.dev-tab').forEach(t=>t.classList.remove('active'));document.getElementById(tabId).classList.add('active');event.target.classList.add('active')}</script>
</body>
</html>
